<!DOCTYPE html>
<html id="docs" lang="fr" class="">
	<head>
	

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-36037335-10"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-36037335-10');
</script>
<meta charset="utf-8">
<title>Déploiements - Kubernetes</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="theme-color" content="#326ce5">
<link rel="shortcut icon" type="image/png" href="/images/favicon.png">









<link rel="stylesheet" href="/css/style.b7b8403eb5b1fddd0a2da2a8383d5b53e6ef81c23e4b0e292e6103bd91f9502d.css" integrity="sha256-t7hAPrWx/d0KLaKoOD1bU&#43;bvgcI&#43;Sw4pLmEDvZH5UC0=">


<link rel="stylesheet" href="/css/base_fonts.css">
<link rel="stylesheet" href="/css/jquery-ui.min.css">
<link rel="stylesheet" href="/css/callouts.css">
<link rel="stylesheet" href="/css/custom-jekyll/tags.css">



<meta name="description" content="">
<meta property="og:description" content="">
<meta name="twitter:description" content="">
<meta property="og:url" content="https://kubernetes.io/fr/docs/concepts/workloads/controllers/deployment/">
<meta property="og:title" content="Déploiements">
<meta name="twitter:title" content="Déploiements">
<meta name="twitter:image" content="https://kubernetes.io/images/favicon.png" />

<meta name="twitter:image:alt" content="Kubernetes">

<meta property="og:image" content="/images/kubernetes-horizontal-color.png">

<meta property="og:type" content="article">
<script src="/js/anchor-4.1.1.min.js"></script>
<script src="/js/jquery-3.2.1.min.js"></script>
<script src="/js/jquery-ui-1.12.1.min.js"></script>
<script src="/js/bootstrap-4.3.1.min.js"></script>
<script src="/js/sweetalert-2.1.2.min.js"></script>

<script src="/js/script.js"></script>
<script src="/js/custom-jekyll/tags.js"></script>


	</head>
	<body>
		<div id="cellophane" onclick="kub.toggleMenu()"></div>

<header>
    <a href="/fr/" class="logo" title="Solution professionnelle d’orchestration de conteneurs - Kubernetes" aria-label="Kubernetes website"></a>

    <div class="nav-buttons" data-auto-burger="primary">
        <ul class="global-nav">
            
            
            <li><a href="/fr/docs/" class="active">Documentation</a></li>
            
            <li><a href="/fr/blog/">Blog</a></li>
            
            
            
            <li><a href="/fr/partners/">Partenaires</a></li>
            
            <li><a href="/fr/community/">Communauté</a></li>
            
            <li><a href="/fr/case-studies/">Études de cas</a></li>
            
            
            
             <li>
                <a href="#">
                    Français <span class="ui-icon ui-icon-carat-1-s"></span>
                </a>
                <ul>
                
                    <li><a href="/docs/concepts/workloads/controllers/deployment/">English</a></li>
                
                    <li><a href="/zh/docs/concepts/workloads/controllers/deployment/">中文 Chinese</a></li>
                
                    <li><a href="/ko/docs/concepts/workloads/controllers/deployment/">한국어 Korean</a></li>
                
                    <li><a href="/ja/docs/concepts/workloads/controllers/deployment/">日本語 Japanese</a></li>
                
                    <li><a href="/id/docs/concepts/workloads/controllers/deployment/">Bahasa Indonesia</a></li>
                
                </ul>
            </li>

            <li>
                <a href="#">
                    v1.17 <span class="ui-icon ui-icon-carat-1-s"></span>
                </a>
                <ul>
                
                    <li><a href="https://kubernetes.io/fr/docs/concepts/workloads/controllers/deployment/">v1.21</a></li>
                
                    <li><a href="https://v1-20.docs.kubernetes.io/fr/docs/concepts/workloads/controllers/deployment/">v1.20</a></li>
                
                    <li><a href="https://v1-19.docs.kubernetes.io/fr/docs/concepts/workloads/controllers/deployment/">v1.19</a></li>
                
                    <li><a href="https://v1-18.docs.kubernetes.io/fr/docs/concepts/workloads/controllers/deployment/">v1.18</a></li>
                
                    <li><a href="https://v1-17.docs.kubernetes.io/fr/docs/concepts/workloads/controllers/deployment/">v1.17</a></li>
                
                </ul>
            </li>
        </ul>
        
        <a href="/fr/docs/tutorials/kubernetes-basics/" class="button" id="tryKubernetes" data-auto-burger-exclude>Apprendre les bases de Kubernetes</a>
        

        <button id="hamburger" onclick="kub.toggleMenu()" data-auto-burger-exclude><div></div></button>
    </div>

    <nav id="mainNav">
        <div class="main-section" data-auto-burger="primary">
         
           <div class="nav-box">
            <h3><a href="/fr/docs/tutorials/hello-minikube/">Démarrer</a></h3>
           <p>Prêt à mettre les mains dans le cambouis ? Créez un cluster Kubernetes simple qui exécute "Hello World" avec Node.js.</p>>.

            </div>
         
           <div class="nav-box">
            <h3><a href="/fr/docs/home/">Documentation</a></h3>
           <p>Apprenez à utiliser Kubernetes à l'aide d'une documentation conceptuelle, didactique et de référence. Vous pouvez même <a href="/editdocs/" data-auto-burger-exclude>aider en contribuant à la documentation</a>!</p>

            </div>
         
           <div class="nav-box">
            <h3><a href="/fr/blog/">Blog</a></h3>
           <p>Lisez les dernières nouvelles à propos de Kubernetes et des conteneurs en général. Obtenez les derniers tutoriels techniques.</p>

            </div>
         
        </div>
        <div class="main-section" data-auto-burger="primary">
            <div class="left">
                <h5 class="github-invite">Souhaitez vous contribuer au code de Kubernetes ?</h5>
                <a href="https://github.com/kubernetes/kubernetes" class="button" data-auto-burger-exclude>Voir sur GitHub</a>
            </div>

            <div class="right">
                <h5 class="github-invite">Explorez la communauté</h5>
                <div class="social">
                    <a href="https://twitter.com/kubernetesio" class="twitter"><span>Twitter</span></a>
                    <a href="https://github.com/kubernetes/kubernetes" class="github"><span>GitHub</span></a>
                    <a href="http://slack.k8s.io/" class="slack"><span>Slack Slack</span></a>
                    <a href="https://stackoverflow.com/questions/tagged/kubernetes" class="stack-overflow"><span>Stack Overflow</span></a>
                    <a href="https://www.youtube.com/kubernetescommunity" class="youtube"><span>YouTube</span></a>
                    <a href="https://discuss.kubernetes.io" class="mailing-list"><span>Forum</span></a>
                    <a href="https://calendar.google.com/calendar/embed?src=nt2tcnbtbied3l6gi2h29slvc0%40group.calendar.google.com" class="calendar"><span>Calendrier</span></a>
                </div>
            </div>
            <div class="clear" style="clear: both"></div>
        </div>
    </nav>
</header>

		
		
		<section id="hero" class="light-text no-sub">
			









<h1>Concepts</h1>
<h5></h5>










<div id="vendorStrip" class="light-text">
	<ul>
		
		
		<li><a href="/fr/docs/home/">ACCUEIL</a></li>
		
		
		<li><a href="/fr/docs/setup/">INSTALLATION</a></li>
		
		
		<li><a href="/fr/docs/concepts/" class="YAH">CONCEPTS</a></li>
		
		
		<li><a href="/fr/docs/tasks/">TÂCHES</a></li>
		
		
		<li><a href="/fr/docs/tutorials/">TUTORIELS</a></li>
		
		
		<li><a href="/fr/docs/reference/">RÉFÉRENCE</a></li>
		
		
		<li><a href="/fr/docs/contribute/">CONTRIBUER</a></li>
		
	</ul>
	<form id="searchBox" action="/docs/search/" role="search">
		<input type="text" id="search" name="q" placeholder="Recherche" aria-label="Search">
	</form>
</div>

		</section>
		
    
		
<section id="deprecationWarning">
  <main>
    <div class="content deprecation-warning">
      <h3>
	 Kubernetes v1.17
	  documentation non maintenue. Vous consultez une version statique. Pour une documentation à jour, veuillez consulter: 
	 <a href="https://kubernetes.io/docs/home/">dernière version.</a>
      </h3>
    </div>
  </main>
</section>


    <main>
        <section id="encyclopedia">
          
<div id="docsToc">
     <div class="pi-accordion">
    	
        
        
        
        
        
         
             
                 
             
         
             
                 
             
         
             
                 
                          
                          
                 
             
         
             
         
             
         
             
         
             
         
             
         
         
        
        <a class="item" data-title="Concepts" href="/fr/docs/concepts/"></a>

	
	
			
			
			
			
			
		
	
	
	
		
			
<div class="item" data-title="Vue d&#39;ensemble">
	<div class="container">
		
		
	
	
			
			
			
			
			
		
	
	
	
		
			

<a class="item" data-title="Qu&#39;est-ce-que Kubernetes ?" href="/fr/docs/concepts/overview/what-is-kubernetes/"></a>

		
	
		
			

<a class="item" data-title="Composants de Kubernetes" href="/fr/docs/concepts/overview/components/"></a>

		
	
		
			

<a class="item" target="_blank" data-title="The Kubernetes API <small>(EN)</small>" href="/docs/concepts/overview/kubernetes-api/"></a>

		
	
		
			
<div class="item" data-title="Utilisation des objets Kubernetes">
	<div class="container">
		
		
	
	
			
			
			
			
			
		
	
	
	
		
			

<a class="item" target="_blank" data-title="Understanding Kubernetes Objects <small>(EN)</small>" href="/docs/concepts/overview/working-with-objects/kubernetes-objects/"></a>

		
	
		
			

<a class="item" target="_blank" data-title="Kubernetes Object Management <small>(EN)</small>" href="/docs/concepts/overview/working-with-objects/object-management/"></a>

		
	
		
			

<a class="item" target="_blank" data-title="Object Names and IDs <small>(EN)</small>" href="/docs/concepts/overview/working-with-objects/names/"></a>

		
	
		
			

<a class="item" target="_blank" data-title="Namespaces <small>(EN)</small>" href="/docs/concepts/overview/working-with-objects/namespaces/"></a>

		
	
		
			

<a class="item" target="_blank" data-title="Labels and Selectors <small>(EN)</small>" href="/docs/concepts/overview/working-with-objects/labels/"></a>

		
	
		
			

<a class="item" target="_blank" data-title="Annotations <small>(EN)</small>" href="/docs/concepts/overview/working-with-objects/annotations/"></a>

		
	
		
			

<a class="item" target="_blank" data-title="Field Selectors <small>(EN)</small>" href="/docs/concepts/overview/working-with-objects/field-selectors/"></a>

		
	
		
			

<a class="item" target="_blank" data-title="Recommended Labels <small>(EN)</small>" href="/docs/concepts/overview/working-with-objects/common-labels/"></a>

		
	

	</div>
</div>

		
	

	</div>
</div>

		
	
		
			
<div class="item" data-title="Architecture de Kubernetes">
	<div class="container">
		
		
	
	
			
			
			
			
			
		
	
	
	
		
			

<a class="item" data-title="Noeuds" href="/fr/docs/concepts/architecture/nodes/"></a>

		
	
		
			

<a class="item" data-title="Communication Master-Node" href="/fr/docs/concepts/architecture/master-node-communication/"></a>

		
	
		
			

<a class="item" data-title="Concepts sous-jacents au Cloud Controller Manager" href="/fr/docs/concepts/architecture/cloud-controller/"></a>

		
	
		
			

<a class="item" target="_blank" data-title="Controllers <small>(EN)</small>" href="/docs/concepts/architecture/controller/"></a>

		
	

	</div>
</div>

		
	
		
			
<div class="item" data-title="Les conteneurs">
	<div class="container">
		
		
	
	
			
			
			
			
			
		
	
	
	
		
			

<a class="item" target="_blank" data-title="Containers overview <small>(EN)</small>" href="/docs/concepts/containers/overview/"></a>

		
	
		
			

<a class="item" data-title="Images" href="/fr/docs/concepts/containers/images/"></a>

		
	
		
			

<a class="item" data-title="Classe d&#39;exécution (Runtime Class)" href="/fr/docs/concepts/containers/runtime-class/"></a>

		
	
		
			

<a class="item" target="_blank" data-title="Container Environment <small>(EN)</small>" href="/docs/concepts/containers/container-environment/"></a>

		
	
		
			

<a class="item" data-title="Les variables d’environnement du conteneur" href="/fr/docs/concepts/containers/container-environment-variables/"></a>

		
	
		
			

<a class="item" data-title="Hooks de cycle de vie de conteneurs" href="/fr/docs/concepts/containers/container-lifecycle-hooks/"></a>

		
	

	</div>
</div>

		
	
		
			
<div class="item" data-title="Workloads">
	<div class="container">
		
		
	
	
			
			
			
			
			
		
	
	
	
		
			
<div class="item" data-title="Pods">
	<div class="container">
		
		
	
	
			
			
			
			
			
		
	
	
	
		
			

<a class="item" data-title="Aperçu du Pod" href="/fr/docs/concepts/workloads/pods/pod-overview/"></a>

		
	
		
			

<a class="item" data-title="Pods" href="/fr/docs/concepts/workloads/pods/pod/"></a>

		
	
		
			

<a class="item" data-title="Cycle de vie d&#39;un Pod" href="/fr/docs/concepts/workloads/pods/pod-lifecycle/"></a>

		
	
		
			

<a class="item" data-title="Init Containers" href="/fr/docs/concepts/workloads/pods/init-containers/"></a>

		
	
		
			

<a class="item" target="_blank" data-title="Pod Preset <small>(EN)</small>" href="/docs/concepts/workloads/pods/podpreset/"></a>

		
	
		
			

<a class="item" target="_blank" data-title="Pod Topology Spread Constraints <small>(EN)</small>" href="/docs/concepts/workloads/pods/pod-topology-spread-constraints/"></a>

		
	
		
			

<a class="item" target="_blank" data-title="Disruptions <small>(EN)</small>" href="/docs/concepts/workloads/pods/disruptions/"></a>

		
	
		
			

<a class="item" target="_blank" data-title="Ephemeral Containers <small>(EN)</small>" href="/docs/concepts/workloads/pods/ephemeral-containers/"></a>

		
	

	</div>
</div>

		
	
		
			
<div class="item" data-title="Contrôleurs">
	<div class="container">
		
		
	
	
			
			
			
			
			
		
	
	
	
		
			

<a class="item" data-title="ReplicaSet" href="/fr/docs/concepts/workloads/controllers/replicaset/"></a>

		
	
		
			

<a class="item" target="_blank" data-title="ReplicationController <small>(EN)</small>" href="/docs/concepts/workloads/controllers/replicationcontroller/"></a>

		
	
		
			

<a class="item" data-title="Déploiements" href="/fr/docs/concepts/workloads/controllers/deployment/"></a>

		
	
		
			

<a class="item" target="_blank" data-title="StatefulSets <small>(EN)</small>" href="/docs/concepts/workloads/controllers/statefulset/"></a>

		
	
		
			

<a class="item" target="_blank" data-title="DaemonSet <small>(EN)</small>" href="/docs/concepts/workloads/controllers/daemonset/"></a>

		
	
		
			

<a class="item" target="_blank" data-title="Garbage Collection <small>(EN)</small>" href="/docs/concepts/workloads/controllers/garbage-collection/"></a>

		
	
		
			

<a class="item" target="_blank" data-title="TTL Controller for Finished Resources <small>(EN)</small>" href="/docs/concepts/workloads/controllers/ttlafterfinished/"></a>

		
	
		
			

<a class="item" target="_blank" data-title="Jobs - Run to Completion <small>(EN)</small>" href="/docs/concepts/workloads/controllers/jobs-run-to-completion/"></a>

		
	
		
			

<a class="item" target="_blank" data-title="CronJob <small>(EN)</small>" href="/docs/concepts/workloads/controllers/cron-jobs/"></a>

		
	

	</div>
</div>

		
	

	</div>
</div>

		
	
		
			
<div class="item" data-title="Services, Equilibreur de charge, et Réseau">
	<div class="container">
		
		
	
	
			
			
			
			
			
		
	
	
	
		
			

<a class="item" target="_blank" data-title="EndpointSlices <small>(EN)</small>" href="/docs/concepts/services-networking/endpoint-slices/"></a>

		
	
		
			

<a class="item" data-title="Service" href="/fr/docs/concepts/services-networking/service/"></a>

		
	
		
			

<a class="item" target="_blank" data-title="Service Topology <small>(EN)</small>" href="/docs/concepts/services-networking/service-topology/"></a>

		
	
		
			

<a class="item" data-title="DNS pour les services et les pods" href="/fr/docs/concepts/services-networking/dns-pod-service/"></a>

		
	
		
			

<a class="item" target="_blank" data-title="Connecting Applications with Services <small>(EN)</small>" href="/docs/concepts/services-networking/connect-applications-service/"></a>

		
	
		
			

<a class="item" data-title="Ingress" href="/fr/docs/concepts/services-networking/ingress/"></a>

		
	
		
			

<a class="item" target="_blank" data-title="Ingress Controllers <small>(EN)</small>" href="/docs/concepts/services-networking/ingress-controllers/"></a>

		
	
		
			

<a class="item" target="_blank" data-title="Network Policies <small>(EN)</small>" href="/docs/concepts/services-networking/network-policies/"></a>

		
	
		
			

<a class="item" target="_blank" data-title="Adding entries to Pod /etc/hosts with HostAliases <small>(EN)</small>" href="/docs/concepts/services-networking/add-entries-to-pod-etc-hosts-with-host-aliases/"></a>

		
	
		
			

<a class="item" target="_blank" data-title="IPv4/IPv6 dual-stack <small>(EN)</small>" href="/docs/concepts/services-networking/dual-stack/"></a>

		
	

	</div>
</div>

		
	
		
			
<div class="item" data-title="Stockage">
	<div class="container">
		
		
	
	
			
			
			
			
			
		
	
	
	
		
			

<a class="item" data-title="Volumes" href="/fr/docs/concepts/storage/volumes/"></a>

		
	
		
			

<a class="item" target="_blank" data-title="Volume Snapshots <small>(EN)</small>" href="/docs/concepts/storage/volume-snapshots/"></a>

		
	
		
			

<a class="item" data-title="Volumes persistants" href="/fr/docs/concepts/storage/persistent-volumes/"></a>

		
	
		
			

<a class="item" target="_blank" data-title="CSI Volume Cloning <small>(EN)</small>" href="/docs/concepts/storage/volume-pvc-datasource/"></a>

		
	
		
			

<a class="item" target="_blank" data-title="Storage Classes <small>(EN)</small>" href="/docs/concepts/storage/storage-classes/"></a>

		
	
		
			

<a class="item" target="_blank" data-title="Volume Snapshot Classes <small>(EN)</small>" href="/docs/concepts/storage/volume-snapshot-classes/"></a>

		
	
		
			

<a class="item" target="_blank" data-title="Dynamic Volume Provisioning <small>(EN)</small>" href="/docs/concepts/storage/dynamic-provisioning/"></a>

		
	
		
			

<a class="item" target="_blank" data-title="Node-specific Volume Limits <small>(EN)</small>" href="/docs/concepts/storage/storage-limits/"></a>

		
	

	</div>
</div>

		
	
		
			
<div class="item" data-title="Configuration">
	<div class="container">
		
		
	
	
			
			
			
			
			
		
	
	
	
		
			

<a class="item" target="_blank" data-title="Configuration Best Practices <small>(EN)</small>" href="/docs/concepts/configuration/overview/"></a>

		
	
		
			

<a class="item" target="_blank" data-title="Resource Bin Packing for Extended Resources <small>(EN)</small>" href="/docs/concepts/configuration/resource-bin-packing/"></a>

		
	
		
			

<a class="item" target="_blank" data-title="Managing Compute Resources for Containers <small>(EN)</small>" href="/docs/concepts/configuration/manage-compute-resources-container/"></a>

		
	
		
			

<a class="item" target="_blank" data-title="Pod Overhead <small>(EN)</small>" href="/docs/concepts/configuration/pod-overhead/"></a>

		
	
		
			

<a class="item" target="_blank" data-title="Assigning Pods to Nodes <small>(EN)</small>" href="/docs/concepts/configuration/assign-pod-node/"></a>

		
	
		
			

<a class="item" target="_blank" data-title="Taints and Tolerations <small>(EN)</small>" href="/docs/concepts/configuration/taint-and-toleration/"></a>

		
	
		
			

<a class="item" data-title="Secrets" href="/fr/docs/concepts/configuration/secret/"></a>

		
	
		
			

<a class="item" target="_blank" data-title="Organizing Cluster Access Using kubeconfig Files <small>(EN)</small>" href="/docs/concepts/configuration/organize-cluster-access-kubeconfig/"></a>

		
	
		
			

<a class="item" target="_blank" data-title="Pod Priority and Preemption <small>(EN)</small>" href="/docs/concepts/configuration/pod-priority-preemption/"></a>

		
	
		
			

<a class="item" target="_blank" data-title="Scheduling Framework <small>(EN)</small>" href="/docs/concepts/configuration/scheduling-framework/"></a>

		
	

	</div>
</div>

		
	
		
			
<div class="item" data-title="Sécurité">
	<div class="container">
		
		
	
	
			
			
			
			
			
		
	
	
	
		
			

<a class="item" target="_blank" data-title="Overview of Cloud Native Security <small>(EN)</small>" href="/docs/concepts/security/overview/"></a>

		
	

	</div>
</div>

		
	
		
			
<div class="item" data-title="Politiques">
	<div class="container">
		
		
	
	
			
			
			
			
			
		
	
	
	
		
			

<a class="item" target="_blank" data-title="Limit Ranges <small>(EN)</small>" href="/docs/concepts/policy/limit-range/"></a>

		
	
		
			

<a class="item" target="_blank" data-title="Resource Quotas <small>(EN)</small>" href="/docs/concepts/policy/resource-quotas/"></a>

		
	
		
			

<a class="item" target="_blank" data-title="Pod Security Policies <small>(EN)</small>" href="/docs/concepts/policy/pod-security-policy/"></a>

		
	

	</div>
</div>

		
	
		
			
<div class="item" data-title="Scheduling">
	<div class="container">
		
		
	
	
			
			
		
	
	
	
		
			

<a class="item" target="_blank" data-title="Kubernetes Scheduler <small>(EN)</small>" href="/docs/concepts/scheduling/kube-scheduler/"></a>

		
	
		
			

<a class="item" target="_blank" data-title="Scheduler Performance Tuning <small>(EN)</small>" href="/docs/concepts/scheduling/scheduler-perf-tuning/"></a>

		
	

	</div>
</div>

		
	
		
			
<div class="item" data-title="Administration d&#39;un cluster">
	<div class="container">
		
		
	
	
			
			
			
			
			
		
	
	
	
		
			

<a class="item" data-title="Vue d&#39;ensemble de l&#39;administration d&#39;un cluster" href="/fr/docs/concepts/cluster-administration/cluster-administration-overview/"></a>

		
	
		
			

<a class="item" data-title="Certificats" href="/fr/docs/concepts/cluster-administration/certificates/"></a>

		
	
		
			

<a class="item" target="_blank" data-title="Cloud Providers <small>(EN)</small>" href="/docs/concepts/cluster-administration/cloud-providers/"></a>

		
	
		
			

<a class="item" target="_blank" data-title="Managing Resources <small>(EN)</small>" href="/docs/concepts/cluster-administration/manage-deployment/"></a>

		
	
		
			

<a class="item" target="_blank" data-title="Cluster Networking <small>(EN)</small>" href="/docs/concepts/cluster-administration/networking/"></a>

		
	
		
			

<a class="item" data-title="Architecture de Journalisation d&#39;évènements (logging)" href="/fr/docs/concepts/cluster-administration/logging/"></a>

		
	
		
			

<a class="item" target="_blank" data-title="Metrics For The Kubernetes Control Plane <small>(EN)</small>" href="/docs/concepts/cluster-administration/monitoring/"></a>

		
	
		
			

<a class="item" target="_blank" data-title="Configuring kubelet Garbage Collection <small>(EN)</small>" href="/docs/concepts/cluster-administration/kubelet-garbage-collection/"></a>

		
	
		
			

<a class="item" target="_blank" data-title="Proxies in Kubernetes <small>(EN)</small>" href="/docs/concepts/cluster-administration/proxies/"></a>

		
	
		
			

<a class="item" target="_blank" data-title="Installing Addons <small>(EN)</small>" href="/docs/concepts/cluster-administration/addons/"></a>

		
	

	</div>
</div>

		
	
		
			
<div class="item" data-title="Extensions Kubernetes">
	<div class="container">
		
		
	
	
			
			
			
			
			
		
	
	
	
		
			

<a class="item" target="_blank" data-title="Extending your Kubernetes Cluster <small>(EN)</small>" href="/docs/concepts/extend-kubernetes/extend-cluster/"></a>

		
	
		
			
<div class="item" data-title="Extensions de l&#39;API Kubernetes">
	<div class="container">
		
		
	
	
			
			
			
			
			
		
	
	
	
		
			

<a class="item" target="_blank" data-title="Custom Resources <small>(EN)</small>" href="/docs/concepts/extend-kubernetes/api-extension/custom-resources/"></a>

		
	
		
			

<a class="item" target="_blank" data-title="Extending the Kubernetes API with the aggregation layer <small>(EN)</small>" href="/docs/concepts/extend-kubernetes/api-extension/apiserver-aggregation/"></a>

		
	

	</div>
</div>

		
	
		
			
<div class="item" data-title="Extensions compute, stockage et réseau">
	<div class="container">
		
		
	
	
			
			
			
			
			
		
	
	
	
		
			

<a class="item" target="_blank" data-title="Network Plugins <small>(EN)</small>" href="/docs/concepts/extend-kubernetes/compute-storage-net/network-plugins/"></a>

		
	
		
			

<a class="item" target="_blank" data-title="Device Plugins <small>(EN)</small>" href="/docs/concepts/extend-kubernetes/compute-storage-net/device-plugins/"></a>

		
	

	</div>
</div>

		
	
		
			

<a class="item" target="_blank" data-title="Operator pattern <small>(EN)</small>" href="/docs/concepts/extend-kubernetes/operator/"></a>

		
	
		
			

<a class="item" target="_blank" data-title="Service Catalog <small>(EN)</small>" href="/docs/concepts/extend-kubernetes/service-catalog/"></a>

		
	
		
			

<a class="item" target="_blank" data-title="Poseidon-Firmament Scheduler <small>(EN)</small>" href="/docs/concepts/extend-kubernetes/poseidon-firmament-alternate-scheduler/"></a>

		
	

	</div>
</div>

		
	





     </div> 
    <button class="push-menu-close-button" onclick="kub.toggleToc()"></button>
</div> 


          <div id="docsContent">
            

<p>
  <a href="https://github.com/kubernetes/website/edit/master/content/fr/docs/concepts/workloads/controllers/deployment.md" id="editPageButton" target="_blank">
    Edit This Page
  </a>
</p>

<h1>Déploiements</h1>



<p>Un <em>Deployment</em> (déploiement en français) fournit des mises à jour déclaratives pour <a href="/fr/docs/concepts/workloads/pods/pod/">Pods</a> et <a href="/fr/docs/concepts/workloads/controllers/replicaset/">ReplicaSets</a>.</p>

<p>Vous décrivez un <em>état désiré</em> dans un déploiement et le <a class='glossary-tooltip' href='/docs/admin/kube-controller-manager/' target='_blank'>controlleur<span class='tooltip-text'>Boucle de contrôle surveillant l&rsquo;état partagé du cluster à travers l&rsquo;apiserver et effectuant des changements en essayant de déplacer l&rsquo;état actuel vers l&rsquo;état désiré.</span>
</a> déploiement change l&rsquo;état réel à l&rsquo;état souhaité à un rythme contrôlé.
Vous pouvez définir des Deployments pour créer de nouveaux ReplicaSets, ou pour supprimer des déploiements existants et adopter toutes leurs ressources avec de nouveaux déploiements.</p>

<blockquote class="note">
  <div><strong>Note:</strong> Ne gérez pas les ReplicaSets appartenant à un Deployment.
Pensez à ouvrir un ticket dans le dépot Kubernetes principal si votre cas d&rsquo;utilisation n&rsquo;est pas traité ci-dessous.</div>
</blockquote>









<ul id="markdown-toc">










<li><a href="#cas-d-utilisation">Cas d’utilisation</a></li>




<li><a href="#cr%c3%a9ation-d-un-d%c3%a9ploiement">Création d’un déploiement</a></li>




<li><a href="#mise-%c3%a0-jour-d-un-d%c3%a9ploiement">Mise à jour d’un déploiement</a></li>




<li><a href="#annulation-d-un-d%c3%a9ploiement">Annulation d’un déploiement</a></li>




<li><a href="#mise-%c3%a0-l-%c3%a9chelle-d-un-d%c3%a9ploiement">Mise à l’échelle d’un déploiement</a></li>




<li><a href="#pause-et-reprise-d-un-d%c3%a9ploiement">Pause et reprise d’un déploiement</a></li>




<li><a href="#statut-de-d%c3%a9ploiement">Statut de déploiement</a></li>




<li><a href="#politique-de-nettoyage">Politique de nettoyage</a></li>




<li><a href="#d%c3%a9ploiement-des-canaries">Déploiement des Canaries</a></li>




<li><a href="#%c3%a9criture-d-une-sp%c3%a9cification-de-d%c3%a9ploiement">Écriture d’une spécification de déploiement</a></li>




<li><a href="#alternative-aux-d%c3%a9ploiements">Alternative aux déploiements</a></li>



















</ul>


<h2 id="cas-d-utilisation">Cas d&rsquo;utilisation</h2>

<p>Voici des cas d&rsquo;utilisation typiques pour les déploiements:</p>

<ul>
<li><a href="#création-dun-déploiement">Créer un déploiement pour déployer un ReplicaSet</a>.
Le ReplicaSet crée des pods en arrière-plan.
Vérifiez l&rsquo;état du déploiement pour voir s&rsquo;il réussit ou non.</li>
<li><a href="#mise-à-jour-dun-déploiement">Déclarez le nouvel état des Pods</a> en mettant à jour le PodTemplateSpec du déploiement.
Un nouveau ReplicaSet est créé et le déploiement gère le déplacement des pods de l&rsquo;ancien ReplicaSet vers le nouveau à un rythme contrôlé.
Chaque nouveau ReplicaSet met à jour la révision du déploiement.</li>
<li><a href="#annulation-dun-déploiement">Revenir à une révision de déploiement antérieure</a> si l&rsquo;état actuel du déploiement n&rsquo;est pas stable.
Chaque restauration met à jour la révision du déploiement.</li>
<li><a href="#mise-à-léchelle-dun-déploiement">Augmentez le déploiement pour traiter plus de charge</a>.</li>
<li><a href="#pause-et-reprise-dun-déploiement">Suspendre le déploiement</a> d&rsquo;appliquer plusieurs correctifs à son PodTemplateSpec, puis de le reprendre pour démarrer un nouveau déploiement.</li>
<li><a href="#statut-de-déploiement">Utiliser l&rsquo;état du déploiement</a> comme indicateur qu&rsquo;un déploiement est bloqué.</li>
<li><a href="#politique-de-nettoyage">Nettoyer les anciens ReplicaSets</a> dont vous n&rsquo;avez plus besoin.</li>
</ul>

<h2 id="création-d-un-déploiement">Création d&rsquo;un déploiement</h2>

<p>Voici un exemple de déploiement.
Il crée un ReplicaSet pour faire apparaître trois pods <code>nginx</code>:</p>

<table class="includecode" id="controllers-nginx-deployment-yaml">
    <thead>
        <tr>
            <th>
                <a href="https://raw.githubusercontent.com/kubernetes/website/master/content/fr/examples/controllers/nginx-deployment.yaml" download="controllers/nginx-deployment.yaml">
                    <code>controllers/nginx-deployment.yaml</code>
                </a>
                <img src="/images/copycode.svg" style="max-height:24px; cursor: pointer" onclick="copyCode('controllers-nginx-deployment-yaml')" title="Copy controllers/nginx-deployment.yaml to clipboard">
            </th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">apiVersion:<span style="color:#bbb"> </span>apps/v1<span style="color:#bbb">
</span><span style="color:#bbb"></span>kind:<span style="color:#bbb"> </span>Deployment<span style="color:#bbb">
</span><span style="color:#bbb"></span>metadata:<span style="color:#bbb">
</span><span style="color:#bbb">  </span>name:<span style="color:#bbb"> </span>nginx-deployment<span style="color:#bbb">
</span><span style="color:#bbb">  </span>labels:<span style="color:#bbb">
</span><span style="color:#bbb">    </span>app:<span style="color:#bbb"> </span>nginx<span style="color:#bbb">
</span><span style="color:#bbb"></span>spec:<span style="color:#bbb">
</span><span style="color:#bbb">  </span>replicas:<span style="color:#bbb"> </span><span style="color:#666">3</span><span style="color:#bbb">
</span><span style="color:#bbb">  </span>selector:<span style="color:#bbb">
</span><span style="color:#bbb">    </span>matchLabels:<span style="color:#bbb">
</span><span style="color:#bbb">      </span>app:<span style="color:#bbb"> </span>nginx<span style="color:#bbb">
</span><span style="color:#bbb">  </span>template:<span style="color:#bbb">
</span><span style="color:#bbb">    </span>metadata:<span style="color:#bbb">
</span><span style="color:#bbb">      </span>labels:<span style="color:#bbb">
</span><span style="color:#bbb">        </span>app:<span style="color:#bbb"> </span>nginx<span style="color:#bbb">
</span><span style="color:#bbb">    </span>spec:<span style="color:#bbb">
</span><span style="color:#bbb">      </span>containers:<span style="color:#bbb">
</span><span style="color:#bbb">      </span>-<span style="color:#bbb"> </span>name:<span style="color:#bbb"> </span>nginx<span style="color:#bbb">
</span><span style="color:#bbb">        </span>image:<span style="color:#bbb"> </span>nginx:<span style="color:#666">1.7.9</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span>ports:<span style="color:#bbb">
</span><span style="color:#bbb">        </span>-<span style="color:#bbb"> </span>containerPort:<span style="color:#bbb"> </span><span style="color:#666">80</span><span style="color:#bbb">
</span></code></pre></div>  </td>
        </tr>
    </tbody>
</table>

<p>Dans cet exemple:</p>

<ul>
<li>Un déploiement nommé <code>nginx-deployment</code> est créé, indiqué par le champ <code>.metadata.name</code>.</li>
<li>Le déploiement crée trois pods répliqués, indiqués par le champ <code>replicas</code>.</li>
<li>Le champ <code>selector</code> définit comment le déploiement trouve les pods à gérer.
Dans ce cas, vous sélectionnez simplement un label définie dans le template de pod (<code>app:nginx</code>).
Cependant, des règles de sélection plus sophistiquées sont possibles, tant que le modèle de pod satisfait lui-même la règle.</li>
</ul>

<p><blockquote class="note">
  <div><strong>Note:</strong> Le champ <code>matchLabels</code> est une table de hash {clé, valeur}.
  Une seule {clé, valeur} dans la table <code>matchLabels</code> est équivalente à un élément de <code>matchExpressions</code>, dont le champ clé est &ldquo;clé&rdquo;, l&rsquo;opérateur est &ldquo;In&rdquo; et le tableau de valeurs contient uniquement &ldquo;valeur&rdquo;.
  Toutes les exigences, à la fois de <code>matchLabels</code> et de <code>matchExpressions</code>, doivent être satisfaites pour correspondre.</div>
</blockquote></p>

<ul>
<li>Le champ <code>template</code> contient les sous-champs suivants:

<ul>
<li>Les Pods reçoivent le label <code>app:nginx</code> dans le champ <code>labels</code>.</li>
<li>La spécification du template de pod dans le champ <code>.template.spec</code>, indique que les pods exécutent un conteneur, <code>nginx</code>, qui utilise l&rsquo;image <code>nginx</code> <a href="https://hub.docker.com/" target="_blank">Docker Hub</a> à la version 1.7.9.</li>
<li>Créez un conteneur et nommez-le <code>nginx</code> en utilisant le champ <code>name</code>.</li>
</ul></li>
</ul>

<p>Suivez les étapes ci-dessous pour créer le déploiement ci-dessus:</p>

<p>Avant de commencer, assurez-vous que votre cluster Kubernetes est opérationnel.</p>

<ol>
<li>Créez le déploiement en exécutant la commande suivante:</li>
</ol>

<p><blockquote class="note">
  <div><strong>Note:</strong> Vous pouvez spécifier l&rsquo;indicateur <code>&ndash;record</code> pour écrire la commande exécutée dans l&rsquo;annotation de ressource <code>kubernetes.io/change-cause</code>.
   C&rsquo;est utile pour une future introspection.
   Par exemple, pour voir les commandes exécutées dans chaque révision de déploiement.</div>
</blockquote></p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">   kubectl apply -f https://k8s.io/examples/controllers/nginx-deployment.yaml</code></pre></div>
<ol>
<li><p>Exécutez <code>kubectl get deployments</code> pour vérifier si le déploiement a été créé.
Si le déploiement est toujours en cours de création, la sortie est similaire à:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">NAME               READY   UP-TO-DATE   AVAILABLE   AGE
nginx-deployment   <span style="color:#666">0</span>/3     <span style="color:#666">0</span>            <span style="color:#666">0</span>           1s</code></pre></div></li>
</ol>

<p>Lorsque vous inspectez les déploiements de votre cluster, les champs suivants s&rsquo;affichent:</p>

<ul>
<li><code>NAME</code> répertorie les noms des déploiements dans le cluster.</li>
<li><code>DESIRED</code> affiche le nombre souhaité de <em>répliques</em> de l&rsquo;application, que vous définissez lorsque vous créez le déploiement.
  C&rsquo;est l&rsquo;<em>état désiré</em>.</li>
<li><code>CURRENT</code> affiche le nombre de réplicas en cours d&rsquo;exécution.</li>
<li><code>UP-TO-DATE</code> affiche le nombre de réplicas qui ont été mises à jour pour atteindre l&rsquo;état souhaité.</li>
<li><code>AVAILABLE</code> affiche le nombre de réplicas de l&rsquo;application disponibles pour vos utilisateurs.</li>
<li><code>AGE</code> affiche la durée d&rsquo;exécution de l&rsquo;application.</li>
</ul>

<p>Notez que le nombre de réplicas souhaitées est de 3 selon le champ <code>.spec.replicas</code>.</p>

<ol>
<li><p>Pour voir l&rsquo;état du déploiement, exécutez:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl rollout status deployment.v1.apps/nginx-deployment</code></pre></div></li>
</ol>

<p>La sortie est similaire à ceci:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">   Waiting <span style="color:#a2f;font-weight:bold">for</span> rollout to finish: <span style="color:#666">2</span> out of <span style="color:#666">3</span> new replicas have been updated...
   deployment.apps/nginx-deployment successfully rolled out</code></pre></div>
<ol>
<li><p>Exécutez à nouveau <code>kubectl get deployments</code> quelques secondes plus tard.
La sortie est similaire à ceci:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">NAME               READY   UP-TO-DATE   AVAILABLE   AGE
nginx-deployment   3/3     3            3           18s</code></pre></div></li>
</ol>

<p>Notez que le déploiement a créé les trois répliques et que toutes les répliques sont à jour (elles contiennent le dernier modèle de pod) et disponibles.</p>

<ol>
<li><p>Pour voir le ReplicaSet (<code>rs</code>) créé par le déploiement, exécutez <code>kubectl get rs</code>.
La sortie est similaire à ceci:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">NAME                          DESIRED   CURRENT   READY   AGE
nginx-deployment-75675f5897   3         3         3       18s</code></pre></div></li>
</ol>

<p>Notez que le nom du ReplicaSet est toujours formaté comme: <code>[DEPLOYMENT-NAME]-[RANDOM-STRING]</code>.
   La chaîne aléatoire est générée aléatoirement et utilise le pod-template-hash comme graine.</p>

<ol>
<li><p>Pour voir les labels générées automatiquement pour chaque Pod, exécutez <code>kubectl get pods --show-labels</code>.
La sortie est similaire à ceci:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">NAME                                READY     STATUS    RESTARTS   AGE       LABELS
nginx-deployment-75675f5897-7ci7o   1/1       Running   0          18s       app=nginx,pod-template-hash=3123191453
nginx-deployment-75675f5897-kzszj   1/1       Running   0          18s       app=nginx,pod-template-hash=3123191453
nginx-deployment-75675f5897-qqcnn   1/1       Running   0          18s       app=nginx,pod-template-hash=3123191453</code></pre></div></li>
</ol>

<p>Le ReplicaSet créé garantit qu&rsquo;il y a trois pods <code>nginx</code>.</p>

<blockquote class="note">
  <div><strong>Note:</strong> Vous devez spécifier un sélecteur approprié et des labels de template de pod dans un déploiement (dans ce cas, <code>app: nginx</code>).
Ne superposez pas les étiquettes ou les sélecteurs avec d&rsquo;autres contrôleurs (y compris d&rsquo;autres déploiements et StatefulSets).
Kubernetes n&rsquo;empêche pas les chevauchements de noms, et si plusieurs contrôleurs ont des sélecteurs qui se chevauchent, ces contrôleurs peuvent entrer en conflit et se comporter de façon inattendue.</div>
</blockquote>

<h3 id="étiquette-pod-template-hash">Étiquette pod-template-hash</h3>

<blockquote class="note">
  <div><strong>Note:</strong> Ne modifiez pas ce label.</div>
</blockquote>

<p>Le label <code>pod-template-hash</code> est ajoutée par le contrôleur de déploiement à chaque ReplicaSet créé ou adopté par un déploiement.</p>

<p>Ce label garantit que les ReplicaSets enfants d&rsquo;un déploiement ne se chevauchent pas.
Il est généré en hachant le <code>PodTemplate</code> du ReplicaSet et en utilisant le hachage résultant comme valeur de label qui est ajoutée au sélecteur ReplicaSet, aux labels de template de pod et dans tous les pods existants que le ReplicaSet peut avoir.</p>

<h2 id="mise-à-jour-d-un-déploiement">Mise à jour d&rsquo;un déploiement</h2>

<blockquote class="note">
  <div><strong>Note:</strong> Le re-déploiement d&rsquo;un déploiement est déclenché si et seulement si le modèle de pod du déploiement (c&rsquo;est-à-dire <code>.spec.template</code>) est modifié, par exemple si les labels ou les images de conteneur du template sont mis à jour.
D&rsquo;autres mises à jour, telles que la mise à l&rsquo;échelle du déploiement, ne déclenchent pas de rollout.</div>
</blockquote>

<p>Suivez les étapes ci-dessous pour mettre à jour votre déploiement:</p>

<ol>
<li><p>Mettons à jour les pods nginx pour utiliser l&rsquo;image <code>nginx: 1.9.1</code> au lieu de l&rsquo;image <code>nginx: 1.7.9</code>.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl --record deployment.apps/nginx-deployment <span style="color:#a2f">set</span> image deployment.v1.apps/nginx-deployment <span style="color:#b8860b">nginx</span><span style="color:#666">=</span>nginx:1.9.1</code></pre></div>
<p>ou utilisez la commande suivante:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl <span style="color:#a2f">set</span> image deployment/nginx-deployment <span style="color:#b8860b">nginx</span><span style="color:#666">=</span>nginx:1.9.1 --record</code></pre></div>
<p>La sortie est similaire à ceci:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">deployment.apps/nginx-deployment image updated</code></pre></div>
<p>Alternativement, vous pouvez <code>éditer</code> le déploiement et changer <code>.spec.template.spec.containers[0].image</code> de <code>nginx: 1.7.9</code> à <code>nginx: 1.9.1</code>:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl edit deployment.v1.apps/nginx-deployment</code></pre></div>
<p>La sortie est similaire à ceci:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">deployment.apps/nginx-deployment edited</code></pre></div></li>

<li><p>Pour voir l&rsquo;état du déploiement, exécutez:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl rollout status deployment.v1.apps/nginx-deployment</code></pre></div>
<p>La sortie est similaire à ceci:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">Waiting for rollout to finish: 2 out of 3 new replicas have been updated...</code></pre></div>
<p>ou</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">deployment.apps/nginx-deployment successfully rolled out</code></pre></div></li>
</ol>

<p>Obtenez plus de détails sur votre déploiement mis à jour:</p>

<ul>
<li><p>Une fois le déploiement réussi, vous pouvez afficher le déploiement en exécutant <code>kubectl get deployments</code>.
La sortie est similaire à ceci:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">NAME               READY   UP-TO-DATE   AVAILABLE   AGE
nginx-deployment   3/3     3            3           36s</code></pre></div></li>

<li><p>Exécutez <code>kubectl get rs</code> pour voir que le déploiement a mis à jour les pods en créant un nouveau ReplicaSet et en le redimensionnant jusqu&rsquo;à 3 replicas, ainsi qu&rsquo;en réduisant l&rsquo;ancien ReplicaSet à 0 réplicas.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl get rs</code></pre></div>
<p>La sortie est similaire à ceci:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">NAME                          DESIRED   CURRENT   READY   AGE
nginx-deployment-1564180365   3         3         3       6s
nginx-deployment-2035384211   0         0         0       36s</code></pre></div></li>

<li><p>L&rsquo;exécution de <code>kubectl get pods</code> ne devrait désormais afficher que les nouveaux pods:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl get pods</code></pre></div>
<p>La sortie est similaire à ceci:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">NAME                                READY     STATUS    RESTARTS   AGE
nginx-deployment-1564180365-khku8   1/1       Running   0          14s
nginx-deployment-1564180365-nacti   1/1       Running   0          14s
nginx-deployment-1564180365-z9gth   1/1       Running   0          14s</code></pre></div>
<p>La prochaine fois que vous souhaitez mettre à jour ces pods, il vous suffit de mettre à jour le modèle de pod de déploiement à nouveau.</p>

<p>Le déploiement garantit que seul un certain nombre de pods sont en panne pendant leur mise à jour.
Par défaut, il garantit qu&rsquo;au moins 75% du nombre souhaité de pods sont en place (25% max indisponible).</p>

<p>Le déploiement garantit également que seul un certain nombre de pods sont créés au-dessus du nombre souhaité de pods.
Par défaut, il garantit qu&rsquo;au plus 125% du nombre de pods souhaité sont en hausse (surtension maximale de 25%).</p>

<p>Par exemple, si vous regardez attentivement le déploiement ci-dessus, vous verrez qu&rsquo;il a d&rsquo;abord créé un nouveau pod, puis supprimé certains anciens pods et en a créé de nouveaux.
Il ne tue pas les anciens Pods tant qu&rsquo;un nombre suffisant de nouveaux Pods n&rsquo;est pas apparu, et ne crée pas de nouveaux Pods tant qu&rsquo;un nombre suffisant de Pods anciens n&rsquo;a pas été tué.
Il s&rsquo;assure qu&rsquo;au moins 2 pods sont disponibles et qu&rsquo;au maximum 4 pods au total sont disponibles.</p></li>

<li><p>Obtenez les détails de votre déploiement:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl describe deployments</code></pre></div>
<p>La sortie est similaire à ceci:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">Name:                   nginx-deployment
Namespace:              default
CreationTimestamp:      Thu, 30 Nov 2017 10:56:25 +0000
Labels:                 app=nginx
Annotations:            deployment.kubernetes.io/revision=2
Selector:               app=nginx
Replicas:               3 desired | 3 updated | 3 total | 3 available | 0 unavailable
StrategyType:           RollingUpdate
MinReadySeconds:        0
RollingUpdateStrategy:  25% max unavailable, 25% max surge
Pod Template:
    Labels:  app=nginx
    Containers:
    nginx:
        Image:        nginx:1.9.1
        Port:         80/TCP
        Environment:  &lt;none&gt;
        Mounts:       &lt;none&gt;
    Volumes:        &lt;none&gt;
    Conditions:
    Type           Status  Reason
    ----           ------  ------
    Available      True    MinimumReplicasAvailable
    Progressing    True    NewReplicaSetAvailable
    OldReplicaSets:  &lt;none&gt;
    NewReplicaSet:   nginx-deployment-1564180365 (3/3 replicas created)
    Events:
    Type    Reason             Age   From                   Message
    ----    ------             ----  ----                   -------
    Normal  ScalingReplicaSet  2m    deployment-controller  Scaled up replica set nginx-deployment-2035384211 to 3
    Normal  ScalingReplicaSet  24s   deployment-controller  Scaled up replica set nginx-deployment-1564180365 to 1
    Normal  ScalingReplicaSet  22s   deployment-controller  Scaled down replica set nginx-deployment-2035384211 to 2
    Normal  ScalingReplicaSet  22s   deployment-controller  Scaled up replica set nginx-deployment-1564180365 to 2
    Normal  ScalingReplicaSet  19s   deployment-controller  Scaled down replica set nginx-deployment-2035384211 to 1
    Normal  ScalingReplicaSet  19s   deployment-controller  Scaled up replica set nginx-deployment-1564180365 to 3
    Normal  ScalingReplicaSet  14s   deployment-controller  Scaled down replica set nginx-deployment-2035384211 to 0</code></pre></div>
<p>Ici, vous voyez que lorsque vous avez créé le déploiement pour la première fois, il a créé un ReplicaSet (nginx-deployment-2035384211) et l&rsquo;a mis à l&rsquo;échelle directement jusqu&rsquo;à 3 réplicas.
Lorsque vous avez mis à jour le déploiement, il a créé un nouveau ReplicaSet (nginx-deployment-1564180365) et l&rsquo;a mis à l&rsquo;échelle jusqu&rsquo;à 1, puis a réduit l&rsquo;ancien ReplicaSet à 2, de sorte qu&rsquo;au moins 2 pods étaient disponibles et au plus 4 pods ont été créés à chaque fois.
Il a ensuite poursuivi la montée en puissance du nouveau et de l&rsquo;ancien ReplicaSet, avec la même stratégie de mise à jour continue.
Enfin, vous aurez 3 réplicas disponibles dans le nouveau ReplicaSet, et l&rsquo;ancien ReplicaSet est réduit à 0.</p></li>
</ul>

<h3 id="rollover">Rollover (alias plusieurs mises à jour en vol)</h3>

<p>Chaque fois qu&rsquo;un nouveau déploiement est observé par le contrôleur de déploiement, un ReplicaSet est créé pour afficher les pods souhaités.
Si le déploiement est mis à jour, le ReplicaSet existant qui contrôle les pods dont les étiquettes correspondent à <code>.spec.selector</code> mais dont le modèle ne correspond pas à <code>.spec.template</code> est réduit.
Finalement, le nouveau ReplicaSet est mis à l&rsquo;échelle à <code>.spec.replicas</code> et tous les anciens ReplicaSets sont mis à l&rsquo;échelle à 0.</p>

<p>Si vous mettez à jour un déploiement alors qu&rsquo;un déploiement existant est en cours, le déploiement crée un nouveau ReplicaSet conformément à la mise à jour et commence à le mettre à l&rsquo;échelle, et arrête de mettre à jour le ReplicaSet qu&rsquo;il augmentait précédemment - il l&rsquo;ajoutera à sa liste de anciens ReplicaSets et commencera à le réduire.</p>

<p>Par exemple, supposons que vous créez un déploiement pour créer 5 répliques de <code>nginx: 1.7.9</code>, puis mettez à jour le déploiement pour créer 5 répliques de <code>nginx: 1.9.1</code>, alors que seulement 3 répliques de <code>nginx:1.7.9</code> avait été créés.
Dans ce cas, le déploiement commence immédiatement à tuer les 3 pods <code>nginx: 1.7.9</code> qu&rsquo;il avait créés et commence à créer des pods <code>nginx: 1.9.1</code>.
Il n&rsquo;attend pas que les 5 répliques de <code>nginx: 1.7.9</code> soient créées avant de changer de cap.</p>

<h3 id="mises-à-jour-du-sélecteur-de-labels">Mises à jour du sélecteur de labels</h3>

<p>Il est généralement déconseillé de mettre à jour le sélecteur de labels et il est suggéré de planifier vos sélecteurs à l&rsquo;avance.
Dans tous les cas, si vous devez effectuer une mise à jour du sélecteur de labels, soyez très prudent et assurez-vous d&rsquo;avoir saisi toutes les implications.</p>

<blockquote class="note">
  <div><strong>Note:</strong> Dans la version d&rsquo;API <code>apps/v1</code>, le sélecteur de label d&rsquo;un déploiement est immuable après sa création.</div>
</blockquote>

<ul>
<li>Les ajouts de sélecteur nécessitent que les labels de template de pod dans la spécification de déploiement soient également mises à jour avec les nouveaux labels, sinon une erreur de validation est renvoyée.
Cette modification ne se chevauche pas, ce qui signifie que le nouveau sélecteur ne sélectionne pas les ReplicaSets et les pods créés avec l&rsquo;ancien sélecteur, ce qui entraîne la perte de tous les anciens ReplicaSets et la création d&rsquo;un nouveau ReplicaSet.</li>
<li>Les mises à jour du sélecteur modifient la valeur existante dans une clé de sélection - entraînent le même comportement que les ajouts.</li>
<li>La suppression de sélecteur supprime une clé existante du sélecteur de déploiement - ne nécessite aucune modification dans les labels du template de pod.
Les ReplicaSets existants ne sont pas orphelins et aucun nouveau ReplicaSet n&rsquo;est créé, mais notez que le label supprimé existe toujours dans tous les Pods et ReplicaSets existants.</li>
</ul>

<h2 id="annulation-d-un-déploiement">Annulation d&rsquo;un déploiement</h2>

<p>Parfois, vous souhaiterez peut-être annuler un déploiement; par exemple, lorsque le déploiement n&rsquo;est pas stable, comme en cas d&rsquo;échecs à répétition (CrashLoopBackOff).
Par défaut, tout l&rsquo;historique des déploiements d&rsquo;un déploiement est conservé dans le système afin que vous puissiez le restaurer à tout moment (vous pouvez le modifier en modifiant la limite de l&rsquo;historique des révisions).</p>

<blockquote class="note">
  <div><strong>Note:</strong> La révision d&rsquo;un déploiement est créée lorsque le déploiement d&rsquo;un déploiement est déclenché.
Cela signifie qu&rsquo;une nouvelle révision est créée si et seulement si le template de pod de déploiement (<code>.spec.template</code>) est modifié, par exemple si vous mettez à jour les labels ou les images de conteneur du template.
D&rsquo;autres mises à jour, telles que la mise à l&rsquo;échelle du déploiement, ne créent pas de révision de déploiement, de sorte que vous puissiez faciliter la mise à l&rsquo;échelle manuelle ou automatique simultanée.
Cela signifie que lorsque vous revenez à une révision antérieure, seule la partie du template de pod de déploiement est annulée.</div>
</blockquote>

<ul>
<li><p>Supposons que vous ayez fait une faute de frappe lors de la mise à jour du déploiement, en mettant le nom de l&rsquo;image sous la forme <code>nginx:1.91</code> au lieu de <code>nginx: 1.9.1</code>:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl <span style="color:#a2f">set</span> image deployment.v1.apps/nginx-deployment <span style="color:#b8860b">nginx</span><span style="color:#666">=</span>nginx:1.91 --record<span style="color:#666">=</span>true</code></pre></div>
<p>La sortie est similaire à ceci:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">deployment.apps/nginx-deployment image updated</code></pre></div></li>

<li><p>Le déploiement est bloqué.
Vous pouvez le vérifier en vérifiant l&rsquo;état du déploiement:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl rollout status deployment.v1.apps/nginx-deployment</code></pre></div>
<p>La sortie est similaire à ceci:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">Waiting for rollout to finish: 1 out of 3 new replicas have been updated...</code></pre></div></li>

<li><p>Appuyez sur Ctrl-C pour arrêter la surveillance d&rsquo;état de déploiement ci-dessus.
Pour plus d&rsquo;informations sur les déploiements bloqués, <a href="#deployment-status">en savoir plus ici</a>.</p></li>

<li><p>Vous voyez que le nombre d&rsquo;anciens réplicas (<code>nginx-deployment-1564180365</code> et <code>nginx-deployment-2035384211</code>) est 2, et les nouveaux réplicas (<code>nginx-deployment-3066724191</code>) est 1.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl get rs</code></pre></div>
<p>La sortie est similaire à ceci:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">NAME                          DESIRED   CURRENT   READY   AGE
nginx-deployment-1564180365   3         3         3       25s
nginx-deployment-2035384211   0         0         0       36s
nginx-deployment-3066724191   1         1         0       6s</code></pre></div></li>

<li><p>En regardant les pods créés, vous voyez que 1 pod créé par le nouveau ReplicaSet est coincé dans une boucle pour récupérer son image:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl get pods</code></pre></div>
<p>La sortie est similaire à ceci:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">NAME                                READY     STATUS             RESTARTS   AGE
nginx-deployment-1564180365-70iae   1/1       Running            0          25s
nginx-deployment-1564180365-jbqqo   1/1       Running            0          25s
nginx-deployment-1564180365-hysrc   1/1       Running            0          25s
nginx-deployment-3066724191-08mng   0/1       ImagePullBackOff   0          6s</code></pre></div>
<blockquote class="note">
<div><strong>Note:</strong> Le contrôleur de déploiement arrête automatiquement le mauvais déploiement et arrête la mise à l&rsquo;échelle du nouveau ReplicaSet.
Cela dépend des paramètres rollingUpdate (<code>maxUnavailable</code> spécifiquement) que vous avez spécifiés.
Kubernetes définit par défaut la valeur à 25%.</div>
</blockquote></li>

<li><p>Obtenez la description du déploiement:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl describe deployment</code></pre></div>
<p>La sortie est similaire à ceci:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">Name:           nginx-deployment
Namespace:      default
CreationTimestamp:  Tue, 15 Mar 2016 14:48:04 -0700
Labels:         app=nginx
Selector:       app=nginx
Replicas:       3 desired | 1 updated | 4 total | 3 available | 1 unavailable
StrategyType:       RollingUpdate
MinReadySeconds:    0
RollingUpdateStrategy:  25% max unavailable, 25% max surge
Pod Template:
  Labels:  app=nginx
  Containers:
   nginx:
    Image:        nginx:1.91
    Port:         80/TCP
    Host Port:    0/TCP
    Environment:  &lt;none&gt;
    Mounts:       &lt;none&gt;
  Volumes:        &lt;none&gt;
Conditions:
  Type           Status  Reason
  ----           ------  ------
  Available      True    MinimumReplicasAvailable
  Progressing    True    ReplicaSetUpdated
OldReplicaSets:     nginx-deployment-1564180365 (3/3 replicas created)
NewReplicaSet:      nginx-deployment-3066724191 (1/1 replicas created)
Events:
  FirstSeen LastSeen    Count   From                    SubObjectPath   Type        Reason              Message
  --------- --------    -----   ----                    -------------   --------    ------              -------
  1m        1m          1       {deployment-controller }                Normal      ScalingReplicaSet   Scaled up replica set nginx-deployment-2035384211 to 3
  22s       22s         1       {deployment-controller }                Normal      ScalingReplicaSet   Scaled up replica set nginx-deployment-1564180365 to 1
  22s       22s         1       {deployment-controller }                Normal      ScalingReplicaSet   Scaled down replica set nginx-deployment-2035384211 to 2
  22s       22s         1       {deployment-controller }                Normal      ScalingReplicaSet   Scaled up replica set nginx-deployment-1564180365 to 2
  21s       21s         1       {deployment-controller }                Normal      ScalingReplicaSet   Scaled down replica set nginx-deployment-2035384211 to 1
  21s       21s         1       {deployment-controller }                Normal      ScalingReplicaSet   Scaled up replica set nginx-deployment-1564180365 to 3
  13s       13s         1       {deployment-controller }                Normal      ScalingReplicaSet   Scaled down replica set nginx-deployment-2035384211 to 0
  13s       13s         1       {deployment-controller }                Normal      ScalingReplicaSet   Scaled up replica set nginx-deployment-3066724191 to 1</code></pre></div>
<p>Pour résoudre ce problème, vous devez revenir à une version précédente de Deployment qui est stable.</p></li>
</ul>

<h3 id="vérification-de-l-historique-de-déploiement-d-un-déploiement">Vérification de l&rsquo;historique de déploiement d&rsquo;un déploiement</h3>

<p>Suivez les étapes ci-dessous pour vérifier l&rsquo;historique de déploiement:</p>

<ol>
<li><p>Tout d&rsquo;abord, vérifiez les révisions de ce déploiement:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl rollout <span style="color:#a2f">history</span> deployment.v1.apps/nginx-deployment</code></pre></div>
<p>La sortie est similaire à ceci:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">deployments &#34;nginx-deployment&#34;
REVISION    CHANGE-CAUSE
1           kubectl apply --filename=https://k8s.io/examples/controllers/nginx-deployment.yaml --record=true
2           kubectl set image deployment.v1.apps/nginx-deployment nginx=nginx:1.9.1 --record=true
3           kubectl set image deployment.v1.apps/nginx-deployment nginx=nginx:1.91 --record=true</code></pre></div>
<p><code>CHANGE-CAUSE</code> est copié de l&rsquo;annotation de déploiement <code>kubernetes.io/change-cause</code> dans ses révisions lors de la création.
Vous pouvez spécifier le message<code>CHANGE-CAUSE</code> en:</p>

<ul>
<li>Annoter le déploiement avec <code>kubectl annotate deployment.v1.apps/nginx-deployment kubernetes.io/change-cause=&quot;image mis à jour en 1.9.1&quot;</code></li>
<li>Ajoutez le drapeau <code>--record</code> pour enregistrer la commande <code>kubectl</code> qui apporte des modifications à la ressource.</li>
<li>Modification manuelle du manifeste de la ressource.</li>
</ul></li>

<li><p>Pour voir les détails de chaque révision, exécutez:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl rollout <span style="color:#a2f">history</span> deployment.v1.apps/nginx-deployment --revision<span style="color:#666">=</span><span style="color:#666">2</span></code></pre></div>
<p>La sortie est similaire à ceci:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">deployments &#34;nginx-deployment&#34; revision 2
  Labels:       app=nginx
          pod-template-hash=1159050644
  Annotations:  kubernetes.io/change-cause=kubectl set image deployment.v1.apps/nginx-deployment nginx=nginx:1.9.1 --record=true
  Containers:
   nginx:
    Image:      nginx:1.9.1
    Port:       80/TCP
     QoS Tier:
        cpu:      BestEffort
        memory:   BestEffort
    Environment Variables:      &lt;none&gt;
  No volumes.</code></pre></div></li>
</ol>

<h3 id="revenir-à-une-révision-précédente">Revenir à une révision précédente</h3>

<p>Suivez les étapes ci-dessous pour restaurer le déploiement de la version actuelle à la version précédente, qui est la version 2.</p>

<ol>
<li><p>Vous avez maintenant décidé d&rsquo;annuler le déploiement actuel et le retour à la révision précédente:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl rollout undo deployment.v1.apps/nginx-deployment</code></pre></div>
<p>La sortie est similaire à ceci:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">deployment.apps/nginx-deployment</code></pre></div>
<p>Alternativement, vous pouvez revenir à une révision spécifique en la spécifiant avec <code>--to-revision</code>:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl rollout undo deployment.v1.apps/nginx-deployment --to-revision<span style="color:#666">=</span><span style="color:#666">2</span></code></pre></div>
<p>La sortie est similaire à ceci:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">deployment.apps/nginx-deployment</code></pre></div>
<p>Pour plus de détails sur les commandes liées au déploiement, lisez <a href="/docs/reference/generated/kubectl/kubectl-commands#rollout"><code>kubectl rollout</code></a>.</p>

<p>Le déploiement est maintenant rétabli à une précédente révision stable.
Comme vous pouvez le voir, un événement <code>DeploymentRollback</code> pour revenir à la révision 2 est généré à partir du contrôleur de déploiement.</p></li>

<li><p>Vérifiez si la restauration a réussi et que le déploiement s&rsquo;exécute comme prévu, exécutez:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl get deployment nginx-deployment</code></pre></div>
<p>La sortie est similaire à ceci:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">NAME               READY   UP-TO-DATE   AVAILABLE   AGE
nginx-deployment   3/3     3            3           30m</code></pre></div></li>

<li><p>Obtenez la description du déploiement:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl describe deployment nginx-deployment</code></pre></div>
<p>La sortie est similaire à ceci:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">Name:                   nginx-deployment
Namespace:              default
CreationTimestamp:      Sun, 02 Sep 2018 18:17:55 -0500
Labels:                 app=nginx
Annotations:            deployment.kubernetes.io/revision=4
                        kubernetes.io/change-cause=kubectl set image deployment.v1.apps/nginx-deployment nginx=nginx:1.9.1 --record=true
Selector:               app=nginx
Replicas:               3 desired | 3 updated | 3 total | 3 available | 0 unavailable
StrategyType:           RollingUpdate
MinReadySeconds:        0
RollingUpdateStrategy:  25% max unavailable, 25% max surge
Pod Template:
  Labels:  app=nginx
  Containers:
   nginx:
    Image:        nginx:1.9.1
    Port:         80/TCP
    Host Port:    0/TCP
    Environment:  &lt;none&gt;
    Mounts:       &lt;none&gt;
  Volumes:        &lt;none&gt;
Conditions:
  Type           Status  Reason
  ----           ------  ------
  Available      True    MinimumReplicasAvailable
  Progressing    True    NewReplicaSetAvailable
OldReplicaSets:  &lt;none&gt;
NewReplicaSet:   nginx-deployment-c4747d96c (3/3 replicas created)
Events:
  Type    Reason              Age   From                   Message
  ----    ------              ----  ----                   -------
  Normal  ScalingReplicaSet   12m   deployment-controller  Scaled up replica set nginx-deployment-75675f5897 to 3
  Normal  ScalingReplicaSet   11m   deployment-controller  Scaled up replica set nginx-deployment-c4747d96c to 1
  Normal  ScalingReplicaSet   11m   deployment-controller  Scaled down replica set nginx-deployment-75675f5897 to 2
  Normal  ScalingReplicaSet   11m   deployment-controller  Scaled up replica set nginx-deployment-c4747d96c to 2
  Normal  ScalingReplicaSet   11m   deployment-controller  Scaled down replica set nginx-deployment-75675f5897 to 1
  Normal  ScalingReplicaSet   11m   deployment-controller  Scaled up replica set nginx-deployment-c4747d96c to 3
  Normal  ScalingReplicaSet   11m   deployment-controller  Scaled down replica set nginx-deployment-75675f5897 to 0
  Normal  ScalingReplicaSet   11m   deployment-controller  Scaled up replica set nginx-deployment-595696685f to 1
  Normal  DeploymentRollback  15s   deployment-controller  Rolled back deployment &#34;nginx-deployment&#34; to revision 2
  Normal  ScalingReplicaSet   15s   deployment-controller  Scaled down replica set nginx-deployment-595696685f to 0</code></pre></div></li>
</ol>

<h2 id="mise-à-l-échelle-d-un-déploiement">Mise à l&rsquo;échelle d&rsquo;un déploiement</h2>

<p>Vous pouvez mettre à l&rsquo;échelle un déploiement à l&rsquo;aide de la commande suivante:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl scale deployment.v1.apps/nginx-deployment --replicas<span style="color:#666">=</span><span style="color:#666">10</span></code></pre></div>
<p>La sortie est similaire à ceci:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">deployment.apps/nginx-deployment scaled</code></pre></div>
<p>En supposant que l&rsquo;<a href="/docs/tasks/run-application/horizontal-pod-autoscale-walkthrough/">horizontal Pod autoscaling</a> est activé dans votre cluster, vous pouvez configurer une mise à l&rsquo;échelle automatique pour votre déploiement et choisir le nombre minimum et maximum de pods que vous souhaitez exécuter en fonction de l&rsquo;utilisation du processeur de vos pods existants.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl autoscale deployment.v1.apps/nginx-deployment --min<span style="color:#666">=</span><span style="color:#666">10</span> --max<span style="color:#666">=</span><span style="color:#666">15</span> --cpu-percent<span style="color:#666">=</span><span style="color:#666">80</span></code></pre></div>
<p>La sortie est similaire à ceci:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">deployment.apps/nginx-deployment scaled</code></pre></div>
<h3 id="mise-à-l-échelle-proportionnelle">Mise à l&rsquo;échelle proportionnelle</h3>

<p>Les déploiements RollingUpdate prennent en charge l&rsquo;exécution simultanée de plusieurs versions d&rsquo;une application.
Lorsque vous ou un autoscaler mettez à l&rsquo;échelle un déploiement RollingUpdate qui se trouve au milieu d&rsquo;un déploiement (en cours ou en pause), le contrôleur de déploiement équilibre les réplicas supplémentaires dans les ReplicaSets actifs existants (ReplicaSets avec pods) afin d&rsquo;atténuer le risque.
Ceci est appelé <em>mise à l&rsquo;échelle proportionnelle</em>.</p>

<p>Par exemple, vous exécutez un déploiement avec 10 réplicas, <a href="#max-surge">maxSurge</a>=3, et <a href="#max-unavailable">maxUnavailable</a>=2.</p>

<ul>
<li><p>Assurez-vous que les 10 réplicas de votre déploiement sont en cours d&rsquo;exécution.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl get deploy</code></pre></div>
<p>La sortie est similaire à ceci:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">NAME                 DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE
nginx-deployment     10        10        10           10          50s</code></pre></div></li>

<li><p>Vous effectuez une mise à jour vers une nouvelle image qui s&rsquo;avère impossible à résoudre depuis l&rsquo;intérieur du cluster.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl <span style="color:#a2f">set</span> image deployment.v1.apps/nginx-deployment <span style="color:#b8860b">nginx</span><span style="color:#666">=</span>nginx:sometag</code></pre></div>
<p>La sortie est similaire à ceci:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">deployment.apps/nginx-deployment image updated</code></pre></div></li>

<li><p>La mise à jour de l&rsquo;image démarre un nouveau déploiement avec ReplicaSet <code>nginx-deployment-1989198191</code>, mais elle est bloquée en raison de l&rsquo;exigence <code>maxUnavailable</code> que vous avez mentionnée ci-dessus.
Découvrez l&rsquo;état du déploiement:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl get rs</code></pre></div>
<p>La sortie est similaire à ceci:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">NAME                          DESIRED   CURRENT   READY     AGE
nginx-deployment-1989198191   5         5         0         9s
nginx-deployment-618515232    8         8         8         1m</code></pre></div></li>

<li><p>Ensuite, une nouvelle demande de mise à l&rsquo;échelle pour le déploiement arrive.
La mise à l&rsquo;échelle automatique incrémente les réplicas de déploiement à 15.
Le contrôleur de déploiement doit décider où ajouter ces 5 nouvelles répliques.
Si vous n&rsquo;utilisiez pas la mise à l&rsquo;échelle proportionnelle, les 5 seraient ajoutés dans le nouveau ReplicaSet.
Avec une mise à l&rsquo;échelle proportionnelle, vous répartissez les répliques supplémentaires sur tous les ReplicaSets.
Des proportions plus importantes vont aux ReplicaSets avec le plus de répliques et des proportions plus faibles vont aux ReplicaSets avec moins de replicas.
Tous les restes sont ajoutés au ReplicaSet avec le plus de répliques.
Les ReplicaSets avec zéro réplicas ne sont pas mis à l&rsquo;échelle.</p></li>
</ul>

<p>Dans notre exemple ci-dessus, 3 répliques sont ajoutées à l&rsquo;ancien ReplicaSet et 2 répliques sont ajoutées au nouveau ReplicaSet.
Le processus de déploiement devrait éventuellement déplacer toutes les répliques vers le nouveau ReplicaSet, en supposant que les nouvelles répliques deviennent saines.
Pour confirmer cela, exécutez:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl get deploy</code></pre></div>
<p>La sortie est similaire à ceci:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">NAME                 DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE
nginx-deployment     15        18        7            8           7m</code></pre></div>
<p>Le statut de déploiement confirme la façon dont les réplicas ont été ajoutés à chaque ReplicaSet.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl get rs</code></pre></div>
<p>La sortie est similaire à ceci:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">NAME                          DESIRED   CURRENT   READY     AGE
nginx-deployment-1989198191   7         7         0         7m
nginx-deployment-618515232    11        11        11        7m</code></pre></div>
<h2 id="pause-et-reprise-d-un-déploiement">Pause et reprise d&rsquo;un déploiement</h2>

<p>Vous pouvez suspendre un déploiement avant de déclencher une ou plusieurs mises à jour, puis le reprendre.
Cela vous permet d&rsquo;appliquer plusieurs correctifs entre la pause et la reprise sans déclencher de déploiements inutiles.</p>

<ul>
<li><p>Par exemple, avec un déploiement qui vient d&rsquo;être créé:
Obtenez les détails du déploiement:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl get deploy</code></pre></div>
<p>La sortie est similaire à ceci:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">NAME      DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE
nginx     3         3         3            3           1m</code></pre></div>
<p>Obtenez le statut de déploiement:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl get rs</code></pre></div>
<p>La sortie est similaire à ceci:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">NAME               DESIRED   CURRENT   READY     AGE
nginx-2142116321   3         3         3         1m</code></pre></div></li>

<li><p>Mettez le déploiement en pause en exécutant la commande suivante:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl rollout pause deployment.v1.apps/nginx-deployment</code></pre></div>
<p>La sortie est similaire à ceci:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">deployment.apps/nginx-deployment paused</code></pre></div></li>

<li><p>Mettez ensuite à jour l&rsquo;image du déploiement:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl <span style="color:#a2f">set</span> image deployment.v1.apps/nginx-deployment <span style="color:#b8860b">nginx</span><span style="color:#666">=</span>nginx:1.9.1</code></pre></div>
<p>La sortie est similaire à ceci:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">deployment.apps/nginx-deployment image updated</code></pre></div></li>

<li><p>Notez qu&rsquo;aucun nouveau déploiement n&rsquo;a commencé:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl rollout <span style="color:#a2f">history</span> deployment.v1.apps/nginx-deployment</code></pre></div>
<p>La sortie est similaire à ceci:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">deployments &#34;nginx&#34;
REVISION  CHANGE-CAUSE
1   &lt;none&gt;</code></pre></div></li>

<li><p>Obtenez l&rsquo;état de déploiement pour vous assurer que le déploiement est correctement mis à jour:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl get rs</code></pre></div>
<p>La sortie est similaire à ceci:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">NAME               DESIRED   CURRENT   READY     AGE
nginx-2142116321   3         3         3         2m</code></pre></div></li>

<li><p>Vous pouvez effectuer autant de mises à jour que vous le souhaitez, par exemple, mettre à jour les ressources qui seront utilisées:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl <span style="color:#a2f">set</span> resources deployment.v1.apps/nginx-deployment -c<span style="color:#666">=</span>nginx --limits<span style="color:#666">=</span><span style="color:#b8860b">cpu</span><span style="color:#666">=</span>200m,memory<span style="color:#666">=</span>512Mi</code></pre></div>
<p>La sortie est similaire à ceci:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">deployment.apps/nginx-deployment resource requirements updated</code></pre></div>
<p>L&rsquo;état initial du déploiement avant de le suspendre continuera de fonctionner, mais les nouvelles mises à jour du déploiement n&rsquo;auront aucun effet tant que le déploiement sera suspendu.</p></li>

<li><p>Finalement, reprenez le déploiement et observez un nouveau ReplicaSet à venir avec toutes les nouvelles mises à jour:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl rollout resume deployment.v1.apps/nginx-deployment</code></pre></div>
<p>La sortie est similaire à ceci:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">deployment.apps/nginx-deployment resumed</code></pre></div></li>

<li><p>Regardez l&rsquo;état du déploiement jusqu&rsquo;à ce qu&rsquo;il soit terminé.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl get rs -w</code></pre></div>
<p>La sortie est similaire à ceci:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">NAME               DESIRED   CURRENT   READY     AGE
nginx-2142116321   2         2         2         2m
nginx-3926361531   2         2         0         6s
nginx-3926361531   2         2         1         18s
nginx-2142116321   1         2         2         2m
nginx-2142116321   1         2         2         2m
nginx-3926361531   3         2         1         18s
nginx-3926361531   3         2         1         18s
nginx-2142116321   1         1         1         2m
nginx-3926361531   3         3         1         18s
nginx-3926361531   3         3         2         19s
nginx-2142116321   0         1         1         2m
nginx-2142116321   0         1         1         2m
nginx-2142116321   0         0         0         2m
nginx-3926361531   3         3         3         20s</code></pre></div></li>

<li><p>Obtenez le statut du dernier déploiement:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl get rs</code></pre></div>
<p>La sortie est similaire à ceci:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">NAME               DESIRED   CURRENT   READY     AGE
nginx-2142116321   0         0         0         2m
nginx-3926361531   3         3         3         28s</code></pre></div></li>
</ul>

<blockquote class="note">
  <div><strong>Note:</strong> Vous ne pouvez pas annuler un déploiement suspendu avant de le reprendre.</div>
</blockquote>

<h2 id="statut-de-déploiement">Statut de déploiement</h2>

<p>Un déploiement entre dans différents états au cours de son cycle de vie.
Il peut être <a href="#progressing-deployment">progressant</a> lors du déploiement d&rsquo;un nouveau ReplicaSet, il peut être <a href="#complete-deployment">effectué</a>, ou il peut <a href="#failed-deployment">ne pas progresser</a>.</p>

<h3 id="progression-du-déploiement">Progression du déploiement</h3>

<p>Kubernetes marque un déploiement comme <em>progressing</em> lorsqu&rsquo;une des tâches suivantes est effectuée:</p>

<ul>
<li>Le déploiement crée un nouveau ReplicaSet.</li>
<li>Le déploiement augmente son nouveau ReplicaSet.</li>
<li>Le déploiement réduit ses anciens ReplicaSet.</li>
<li>De nouveaux pods deviennent prêts ou disponibles (prêt pour au moins <a href="#min-ready-seconds">MinReadySeconds</a>).</li>
</ul>

<p>Vous pouvez surveiller la progression d&rsquo;un déploiement à l&rsquo;aide de <code>kubectl rollout status</code>.</p>

<h3 id="déploiement-effectué">Déploiement effectué</h3>

<p>Kubernetes marque un déploiement comme <em>effectué</em> lorsqu&rsquo;il présente les caractéristiques suivantes:</p>

<ul>
<li>Toutes les répliques associées au déploiement ont été mises à jour vers la dernière version que vous avez spécifiée, ce qui signifie que toutes les mises à jour que vous avez demandées ont été effectuées.</li>
<li>Toutes les répliques associées au déploiement sont disponibles.</li>
<li>Aucune ancienne réplique pour le déploiement n&rsquo;est en cours d&rsquo;exécution.</li>
</ul>

<p>Vous pouvez vérifier si un déploiement est terminé en utilisant <code>kubectl rollout status</code>.
Si le déploiement s&rsquo;est terminé avec succès, <code>kubectl rollout status</code> renvoie un code de sortie de 0.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl rollout status deployment.v1.apps/nginx-deployment</code></pre></div>
<p>La sortie est similaire à ceci:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">Waiting for rollout to finish: 2 of 3 updated replicas are available...
deployment.apps/nginx-deployment successfully rolled out
$ echo $?
0</code></pre></div>
<h3 id="déploiement-échoué">Déploiement échoué</h3>

<p>Votre déploiement peut rester bloqué en essayant de déployer son nouveau ReplicaSet sans jamais terminer.
Cela peut se produire en raison de certains des facteurs suivants:</p>

<ul>
<li>Quota insuffisant</li>
<li>Échecs de la sonde de préparation</li>
<li>Erreurs d&rsquo;extraction d&rsquo;image</li>
<li>Permissions insuffisantes</li>
<li>Plages limites</li>
<li>Mauvaise configuration de l&rsquo;exécution de l&rsquo;application</li>
</ul>

<p>Vous pouvez détecter cette condition en spécifiant un paramètre d&rsquo;échéance dans votre spécification de déploiement:
(<a href="#progress-deadline-seconds"><code>.spec.progressDeadlineSeconds</code></a>).
<code>.spec.progressDeadlineSeconds</code> indique le nombre de secondes pendant lesquelles le contrôleur de déploiement attend avant d&rsquo;indiquer (dans l&rsquo;état de déploiement) que la progression du déploiement est au point mort.</p>

<p>La commande <code>kubectl</code> suivante définit la spécification avec <code>progressDeadlineSeconds</code> pour que le contrôleur signale l&rsquo;absence de progression pour un déploiement après 10 minutes:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl patch deployment.v1.apps/nginx-deployment -p <span style="color:#b44">&#39;{&#34;spec&#34;:{&#34;progressDeadlineSeconds&#34;:600}}&#39;</span></code></pre></div>
<p>La sortie est similaire à ceci:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">deployment.apps/nginx-deployment patched</code></pre></div>
<p>Une fois le délai dépassé, le contrôleur de déploiement ajoute un <code>DeploymentCondition</code> avec les attributs suivants aux <code>.status.conditions</code> du déploiement:</p>

<ul>
<li>Type=Progressing</li>
<li>Status=False</li>
<li>Reason=ProgressDeadlineExceeded</li>
</ul>

<p>Voir les <a href="https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#typical-status-properties" target="_blank">conventions Kubernetes API</a> pour plus d&rsquo;informations sur les conditions d&rsquo;état.</p>

<blockquote class="note">
  <div><strong>Note:</strong> Kubernetes ne prend aucune mesure sur un déploiement bloqué, sauf pour signaler une condition d&rsquo;état avec <code>Reason=ProgressDeadlineExceeded</code>.
Les orchestrateurs de niveau supérieur peuvent en tirer parti et agir en conséquence, par exemple, restaurer le déploiement vers sa version précédente.</div>
</blockquote>

<blockquote class="note">
  <div><strong>Note:</strong> Si vous suspendez un déploiement, Kubernetes ne vérifie pas la progression par rapport à votre échéance spécifiée.
Vous pouvez suspendre un déploiement en toute sécurité au milieu d&rsquo;un déploiement et reprendre sans déclencher la condition de dépassement du délai.</div>
</blockquote>

<p>Vous pouvez rencontrer des erreurs transitoires avec vos déploiements, soit en raison d&rsquo;un délai d&rsquo;attente bas que vous avez défini, soit en raison de tout autre type d&rsquo;erreur pouvant être traité comme transitoire.
Par exemple, supposons que votre quota soit insuffisant.
Si vous décrivez le déploiement, vous remarquerez la section suivante:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl describe deployment nginx-deployment</code></pre></div>
<p>La sortie est similaire à ceci:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">&lt;...&gt;
Conditions:
  Type            Status  Reason
  ----            ------  ------
  Available       True    MinimumReplicasAvailable
  Progressing     True    ReplicaSetUpdated
  ReplicaFailure  True    FailedCreate
&lt;...&gt;</code></pre></div>
<p>Si vous exécutez <code>kubectl get deployment nginx-deployment -o yaml</code>, l&rsquo;état de déploiement est similaire à ceci:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">status:<span style="color:#bbb">
</span><span style="color:#bbb">  </span>availableReplicas:<span style="color:#bbb"> </span><span style="color:#666">2</span><span style="color:#bbb">
</span><span style="color:#bbb">  </span>conditions:<span style="color:#bbb">
</span><span style="color:#bbb">  </span>-<span style="color:#bbb"> </span>lastTransitionTime:<span style="color:#bbb"> </span>2016-10-04T12:25:39Z<span style="color:#bbb">
</span><span style="color:#bbb">    </span>lastUpdateTime:<span style="color:#bbb"> </span>2016-10-04T12:25:39Z<span style="color:#bbb">
</span><span style="color:#bbb">    </span>message:<span style="color:#bbb"> </span>Replica<span style="color:#bbb"> </span>set<span style="color:#bbb"> </span><span style="color:#b44">&#34;nginx-deployment-4262182780&#34;</span><span style="color:#bbb"> </span>is<span style="color:#bbb"> </span>progressing.<span style="color:#bbb">
</span><span style="color:#bbb">    </span>reason:<span style="color:#bbb"> </span>ReplicaSetUpdated<span style="color:#bbb">
</span><span style="color:#bbb">    </span>status:<span style="color:#bbb"> </span><span style="color:#b44">&#34;True&#34;</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span>type:<span style="color:#bbb"> </span>Progressing<span style="color:#bbb">
</span><span style="color:#bbb">  </span>-<span style="color:#bbb"> </span>lastTransitionTime:<span style="color:#bbb"> </span>2016-10-04T12:25:42Z<span style="color:#bbb">
</span><span style="color:#bbb">    </span>lastUpdateTime:<span style="color:#bbb"> </span>2016-10-04T12:25:42Z<span style="color:#bbb">
</span><span style="color:#bbb">    </span>message:<span style="color:#bbb"> </span>Deployment<span style="color:#bbb"> </span>has<span style="color:#bbb"> </span>minimum<span style="color:#bbb"> </span>availability.<span style="color:#bbb">
</span><span style="color:#bbb">    </span>reason:<span style="color:#bbb"> </span>MinimumReplicasAvailable<span style="color:#bbb">
</span><span style="color:#bbb">    </span>status:<span style="color:#bbb"> </span><span style="color:#b44">&#34;True&#34;</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span>type:<span style="color:#bbb"> </span>Available<span style="color:#bbb">
</span><span style="color:#bbb">  </span>-<span style="color:#bbb"> </span>lastTransitionTime:<span style="color:#bbb"> </span>2016-10-04T12:25:39Z<span style="color:#bbb">
</span><span style="color:#bbb">    </span>lastUpdateTime:<span style="color:#bbb"> </span>2016-10-04T12:25:39Z<span style="color:#bbb">
</span><span style="color:#bbb">    </span>message:<span style="color:#bbb"> </span><span style="color:#b44">&#39;Error creating: pods &#34;nginx-deployment-4262182780-&#34; is forbidden: exceeded quota:
</span><span style="color:#b44">      object-counts, requested: pods=1, used: pods=3, limited: pods=2&#39;</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span>reason:<span style="color:#bbb"> </span>FailedCreate<span style="color:#bbb">
</span><span style="color:#bbb">    </span>status:<span style="color:#bbb"> </span><span style="color:#b44">&#34;True&#34;</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span>type:<span style="color:#bbb"> </span>ReplicaFailure<span style="color:#bbb">
</span><span style="color:#bbb">  </span>observedGeneration:<span style="color:#bbb"> </span><span style="color:#666">3</span><span style="color:#bbb">
</span><span style="color:#bbb">  </span>replicas:<span style="color:#bbb"> </span><span style="color:#666">2</span><span style="color:#bbb">
</span><span style="color:#bbb">  </span>unavailableReplicas:<span style="color:#bbb"> </span><span style="color:#666">2</span></code></pre></div>
<p>Finalement, une fois la date limite de progression du déploiement dépassée, Kubernetes met à jour le statut et la raison de la condition de progression:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">Conditions:
  Type            Status  Reason
  ----            ------  ------
  Available       True    MinimumReplicasAvailable
  Progressing     False   ProgressDeadlineExceeded
  ReplicaFailure  True    FailedCreate</code></pre></div>
<p>Vous pouvez résoudre un problème de quota insuffisant en réduisant votre déploiement, en réduisant d&rsquo;autres contrôleurs que vous exécutez ou en augmentant le quota de votre namespace.
Si vous remplissez les conditions de quota et que le contrôleur de déploiement termine ensuite le déploiement de déploiement, vous verrez la mise à jour de l&rsquo;état du déploiement avec une condition réussie (<code>Status=True</code> et <code>Reason=NewReplicaSetAvailable</code>).</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">Conditions:
  Type          Status  Reason
  ----          ------  ------
  Available     True    MinimumReplicasAvailable
  Progressing   True    NewReplicaSetAvailable</code></pre></div>
<p><code>Type=Available</code> avec <code>Status=True</code> signifie que votre déploiement a une disponibilité minimale.
La disponibilité minimale est dictée par les paramètres spécifiés dans la stratégie de déploiement.
<code>Type=Progressing</code> avec <code>Status=True</code> signifie que votre déploiement est soit au milieu d&rsquo;un déploiement et qu&rsquo;il progresse ou qu&rsquo;il a terminé avec succès sa progression et que les nouvelles répliques minimales requises sont disponibles (voir la raison de la condition pour les détails - dans notre cas, <code>Reason=NewReplicaSetAvailable</code> signifie que le déploiement est terminé).</p>

<p>Vous pouvez vérifier si un déploiement n&rsquo;a pas pu progresser en utilisant <code>kubectl rollout status</code>.
<code>kubectl rollout status</code> renvoie un code de sortie différent de zéro si le déploiement a dépassé le délai de progression.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl rollout status deployment.v1.apps/nginx-deployment</code></pre></div>
<p>La sortie est similaire à ceci:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">Waiting for rollout to finish: 2 out of 3 new replicas have been updated...
error: deployment &#34;nginx&#34; exceeded its progress deadline
$ echo $?
1</code></pre></div>
<h3 id="agir-sur-un-déploiement-échoué">Agir sur un déploiement échoué</h3>

<p>Toutes les actions qui s&rsquo;appliquent à un déploiement complet s&rsquo;appliquent également à un déploiement ayant échoué.
Vous pouvez le mettre à l&rsquo;échelle à la hausse/baisse, revenir à une révision précédente ou même la suspendre si vous devez appliquer plusieurs réglages dans le modèle de pod de déploiement.</p>

<h2 id="politique-de-nettoyage">Politique de nettoyage</h2>

<p>Vous pouvez définir le champ <code>.spec.revisionHistoryLimit</code> dans un déploiement pour spécifier le nombre d&rsquo;anciens ReplicaSets pour ce déploiement que vous souhaitez conserver.
Le reste sera effacé en arrière-plan.
Par défaut, c&rsquo;est 10.</p>

<blockquote class="note">
  <div><strong>Note:</strong> La définition explicite de ce champ sur 0 entraînera le nettoyage de tout l&rsquo;historique de votre déploiement, de sorte que le déploiement ne pourra pas revenir en arrière.</div>
</blockquote>

<h2 id="déploiement-des-canaries">Déploiement des Canaries</h2>

<p>Si vous souhaitez déployer des versions sur un sous-ensemble d&rsquo;utilisateurs ou de serveurs à l&rsquo;aide du déploiement, vous pouvez créer plusieurs déploiements, un pour chaque version, en suivant le modèle canari décrit dans <a href="/docs/concepts/cluster-administration/manage-deployment/#canary-deployments">gestion des ressources</a>.</p>

<h2 id="écriture-d-une-spécification-de-déploiement">Écriture d&rsquo;une spécification de déploiement</h2>

<p>Comme pour toutes les autres configurations Kubernetes, un déploiement a besoin des champs <code>apiVersion</code>, <code>kind</code> et <code>metadata</code>.
Pour des informations générales sur l&rsquo;utilisation des fichiers de configuration, voir <a href="/docs/tutorials/stateless-application/run-stateless-application-deployment/">déploiement d&rsquo;applications</a>, configuration des conteneurs, et <a href="/docs/concepts/overview/working-with-objects/object-management/">Utilisation de kubectl pour gérer les ressources</a>.</p>

<p>Un déploiement nécessite également un <a href="https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#spec-and-status" target="_blank"><code>.spec</code> section</a>.</p>

<h3 id="pod-template">Pod Template</h3>

<p>Les <code>.spec.template</code> et <code>.spec.selector</code> sont les seuls champs obligatoires du <code>.spec</code>.</p>

<p>Le <code>.spec.template</code> est un <a href="/fr/docs/concepts/workloads/pods/pod-overview/#pod-templates">Pod template</a>.
Il a exactement le même schéma qu&rsquo;un <a href="/fr/docs/concepts/workloads/pods/pod/">Pod</a>, sauf qu&rsquo;il est imbriqué et n&rsquo;a pas de <code>apiVersion</code> ou de <code>kind</code>.</p>

<p>En plus des champs obligatoires pour un pod, un Pod Template dans un déploiement doit spécifier des labels appropriées et une stratégie de redémarrage appropriée.
Pour les labels, assurez-vous de ne pas chevaucher l&rsquo;action d&rsquo;autres contrôleurs.
Voir <a href="#selector">sélecteur</a>).</p>

<p>Seulement un <a href="/fr/docs/concepts/workloads/pods/pod-lifecycle/#restart-policy"><code>.spec.template.spec.restartPolicy</code></a> égal à <code>Always</code> est autorisé, ce qui est la valeur par défaut s&rsquo;il n&rsquo;est pas spécifié.</p>

<h3 id="répliques">Répliques</h3>

<p><code>.spec.replicas</code> est un champ facultatif qui spécifie le nombre de pods souhaités.
Il vaut par défaut 1.</p>

<h3 id="sélecteur">Sélecteur</h3>

<p><code>.spec.selector</code> est un champ obligatoire qui spécifie un <a href="/docs/concepts/overview/working-with-objects/labels/">sélecteur de labels</a> pour les pods ciblés par ce déploiement.</p>

<p><code>.spec.selector</code> doit correspondre <code>.spec.template.metadata.labels</code>, ou il sera rejeté par l&rsquo;API.</p>

<p>Dans la version d&rsquo;API <code>apps/v1</code>, <code>.spec.selector</code> et <code>.metadata.labels</code> ne sont pas définis par défaut sur <code>.spec.template.metadata.labels</code> s&rsquo;ils ne sont pas définis.
Ils doivent donc être définis explicitement.
Notez également que <code>.spec.selector</code> est immuable après la création du déploiement dans <code>apps/v1</code>.</p>

<p>Un déploiement peut mettre fin aux pods dont les étiquettes correspondent au sélecteur si leur modèle est différent de <code>.spec.template</code> ou si le nombre total de ces pods dépasse <code>.spec.replicas</code>.
Il fait apparaître de nouveaux pods avec <code>.spec.template</code> si le nombre de pods est inférieur au nombre souhaité.</p>

<blockquote class="note">
  <div><strong>Note:</strong> Vous ne devez pas créer d&rsquo;autres pods dont les labels correspondent à ce sélecteur, soit directement, en créant un autre déploiement, soit en créant un autre contrôleur tel qu&rsquo;un ReplicaSet ou un ReplicationController.
Si vous le faites, le premier déploiement pense qu&rsquo;il a créé ces autres pods.
Kubernetes ne vous empêche pas de le faire.</div>
</blockquote>

<p>Si vous avez plusieurs contrôleurs qui ont des sélecteurs qui se chevauchent, les contrôleurs se battront entre eux et ne se comporteront pas correctement.</p>

<h3 id="stratégie">Stratégie</h3>

<p><code>.spec.strategy</code> spécifie la stratégie utilisée pour remplacer les anciens pods par de nouveaux.
<code>.spec.strategy.type</code> peut être &ldquo;Recreate&rdquo; ou &ldquo;RollingUpdate&rdquo;.
&ldquo;RollingUpdate&rdquo; est la valeur par défaut.</p>

<h4 id="déploiment-recreate">Déploiment Recreate</h4>

<p>Tous les pods existants sont tués avant que de nouveaux ne soient créés lorsque <code>.spec.strategy.type==Recreate</code>.</p>

<h4 id="déploiement-de-mise-à-jour-continue">Déploiement de mise à jour continue</h4>

<p>Le déploiement met à jour les pods dans une <a href="/docs/tasks/run-application/rolling-update-replication-controller/">mise à jour continue</a> quand <code>.spec.strategy.type==RollingUpdate</code>.
Vous pouvez spécifier <code>maxUnavailable</code> et <code>maxSurge</code> pour contrôler le processus de mise à jour continue.</p>

<h5 id="max-non-disponible">Max non disponible</h5>

<p><code>.spec.strategy.rollingUpdate.maxUnavailable</code> est un champ facultatif qui spécifie le nombre maximal de pods qui peuvent être indisponibles pendant le processus de mise à jour.
La valeur peut être un nombre absolu (par exemple, 5) ou un pourcentage des pods souhaités (par exemple, 10%).
Le nombre absolu est calculé à partir du pourcentage en arrondissant vers le bas.
La valeur ne peut pas être 0 si <code>.spec.strategy.rollingUpdate.maxSurge</code> est 0.
La valeur par défaut est 25%.</p>

<p>Par exemple, lorsque cette valeur est définie sur 30%, l&rsquo;ancien ReplicaSet peut être réduit à 70% des pods souhaités immédiatement au démarrage de la mise à jour continue.
Une fois que les nouveaux pods sont prêts, l&rsquo;ancien ReplicaSet peut être réduit davantage, suivi d&rsquo;une augmentation du nouveau ReplicaSet, garantissant que le nombre total de pods disponibles à tout moment pendant la mise à jour est d&rsquo;au moins 70% des pods souhaités.</p>

<h5 id="max-surge">Max Surge</h5>

<p><code>.spec.strategy.rollingUpdate.maxSurge</code> est un champ facultatif qui spécifie le nombre maximal de pods pouvant être créés sur le nombre de pods souhaité.
La valeur peut être un nombre absolu (par exemple, 5) ou un pourcentage des pods souhaités (par exemple, 10%).
La valeur ne peut pas être 0 si <code>MaxUnavailable</code> est 0.
Le nombre absolu est calculé à partir du pourcentage en arrondissant.
La valeur par défaut est 25%.</p>

<p>Par exemple, lorsque cette valeur est définie sur 30%, le nouveau ReplicaSet peut être mis à l&rsquo;échelle immédiatement au démarrage de la mise à jour continue, de sorte que le nombre total d&rsquo;anciens et de nouveaux pods ne dépasse pas 130% des pods souhaités.
Une fois que les anciens pods ont été détruits, le nouveau ReplicaSet peut être augmenté davantage, garantissant que le nombre total de pods en cours d&rsquo;exécution à tout moment pendant la mise à jour est au maximum de 130% des pods souhaités.</p>

<h3 id="progress-deadline-seconds">Progress Deadline Seconds</h3>

<p><code>.spec.progressDeadlineSeconds</code> est un champ facultatif qui spécifie le nombre de secondes pendant lesquelles vous souhaitez attendre que votre déploiement progresse avant que le système ne signale que le déploiement a <a href="#failed-deployment">échoué</a> - refait surface comme une condition avec <code>Type=Progressing</code>, <code>Status=False</code> et <code>Reason=ProgressDeadlineExceeded</code> dans l&rsquo;état de la ressource.
Le contrôleur de déploiement continuera de réessayer le déploiement.
À l&rsquo;avenir, une fois la restauration automatique implémentée, le contrôleur de déploiement annulera un déploiement dès qu&rsquo;il observera une telle condition.</p>

<p>S&rsquo;il est spécifié, ce champ doit être supérieur à <code>.spec.minReadySeconds</code>.</p>

<h3 id="min-ready-seconds">Min Ready Seconds</h3>

<p><code>.spec.minReadySeconds</code> est un champ facultatif qui spécifie le nombre minimum de secondes pendant lequel un pod nouvellement créé doit être prêt sans qu&rsquo;aucun de ses conteneurs ne plante, pour qu&rsquo;il soit considéré comme disponible.
Cette valeur par défaut est 0 (le pod sera considéré comme disponible dès qu&rsquo;il sera prêt).
Pour en savoir plus sur le moment où un pod est considéré comme prêt, consultez <a href="/fr/docs/concepts/workloads/pods/pod-lifecycle/#container-probes">Sondes de conteneur</a>.</p>

<h3 id="rollback-to">Rollback To</h3>

<p>Le champ <code>.spec.rollbackTo</code> est obsolète dans les versions d&rsquo;API <code>extensions/v1beta1</code> et <code>apps/v1beta1</code> et n&rsquo;est plus pris en charge dans les versions d&rsquo;API commençant par <code>apps/v1beta2</code>.
Utilisez, <code>kubectl rollout undo</code> pour <a href="#revenir-à-une-révision-précédente">Revenir à une révision précédente</a>.</p>

<h3 id="limite-de-l-historique-des-révisions">Limite de l&rsquo;historique des révisions</h3>

<p>L&rsquo;historique de révision d&rsquo;un déploiement est stocké dans les ReplicaSets qu&rsquo;il contrôle.</p>

<p><code>.spec.revisionHistoryLimit</code> est un champ facultatif qui spécifie le nombre d&rsquo;anciens ReplicaSets à conserver pour permettre la restauration.
Ces anciens ReplicaSets consomment des ressources dans <code>etcd</code> et encombrent la sortie de <code>kubectl get rs</code>.
La configuration de chaque révision de déploiement est stockée dans ses ReplicaSets; par conséquent, une fois un ancien ReplicaSet supprimé, vous perdez la possibilité de revenir à cette révision du déploiement.
Par défaut, 10 anciens ReplicaSets seront conservés, mais sa valeur idéale dépend de la fréquence et de la stabilité des nouveaux déploiements.</p>

<p>Plus précisément, la définition de ce champ à zéro signifie que tous les anciens ReplicaSets avec 0 réplicas seront nettoyés.
Dans ce cas, un nouveau panneau déroulant Déploiement ne peut pas être annulé, car son historique de révision est nettoyé.</p>

<h3 id="paused">Paused</h3>

<p><code>.spec.paused</code> est un champ booléen facultatif pour suspendre et reprendre un déploiement.
La seule différence entre un déploiement suspendu et un autre qui n&rsquo;est pas suspendu, c&rsquo;est que toute modification apportée au <code>PodTemplateSpec</code> du déploiement suspendu ne déclenchera pas de nouveaux déploiements tant qu&rsquo;il sera suspendu.
Un déploiement n&rsquo;est pas suspendu par défaut lors de sa création.</p>

<h2 id="alternative-aux-déploiements">Alternative aux déploiements</h2>

<h3 id="kubectl-rolling-update">kubectl rolling-update</h3>

<p><a href="/docs/reference/generated/kubectl/kubectl-commands#rolling-update"><code>kubectl rolling-update</code></a> met à jour les pods et les ReplicationControllers de la même manière.
Mais les déploiements sont recommandés, car ils sont déclaratifs, côté serveur et ont des fonctionnalités supplémentaires, telles que la restauration de toute révision précédente même après la mise à jour progressive..</p>















    
            
  <h2>Feedback</h2>
  <p class="feedback--prompt">Cette page est elle utile ? </p>
  <button class="button feedback--yes">Oui</button>
  <button class="button feedback--no">Non</button>
  <p class="feedback--response feedback--response__hidden">
    Thanks for the feedback. If you have a specific, answerable question about how to use Kubernetes, ask it on
    <a target="_blank" rel="noopener"
      href="https://stackoverflow.com/questions/tagged/kubernetes">
      Stack Overflow</a>.
    Open an issue in the GitHub repo if you want to 
    <a class="feedback--link" target="_blank" rel="noopener"
      href="https://github.com/kubernetes/website/issues/new?title=Issue%20with%20k8s.io">
      report a problem</a>
    or
    <a class="feedback--link" target="_blank" rel="noopener"
      href="https://github.com/kubernetes/website/issues/new?title=Improvement%20for%20k8s.io">
      suggest an improvement</a>.
  </p>
  <script>
    const yes = document.querySelector('.feedback--yes');
    const no = document.querySelector('.feedback--no');
    document.querySelectorAll('.feedback--link').forEach(link => {
      link.href = link.href + window.location.pathname;
    });
    const sendFeedback = (value) => {
      if (!gtag) { console.log('!gtag'); }
      gtag('event', 'click', {
        'event_category': 'Helpful',
        'event_label': window.location.pathname,
        value
      });
    };
    const disableButtons = () => {
      yes.disabled = true;
      yes.classList.add('feedback--button__disabled');
      no.disabled = true;
      no.classList.add('feedback--button__disabled');
    };
    yes.addEventListener('click', () => {
      sendFeedback(1);
      disableButtons();
      document.querySelector('.feedback--response').classList.remove('feedback--response__hidden');
    });
    no.addEventListener('click', () => {
      sendFeedback(0);
      disableButtons();
      document.querySelector('.feedback--response').classList.remove('feedback--response__hidden');
    });
  </script>


    
            <div id="pre-footer"> 
  <hr />

  <div class="issue-button-container">
    <p><a href=""><img src="https://kubernetes-site.appspot.com/UA-36037335-10/GitHub/docs/concepts/workloads/controllers/deployment.md?pixel" alt="Analytics" /></a></p>
    
    
    <script type="text/javascript">
    PDRTJS_settings_8345992 = {
    "id" : "8345992",
    "unique_id" : "\/fr\/docs\/concepts\/workloads\/controllers\/deployment\/",
    "title" : "Déploiements",
    "permalink" : "https:\/\/kubernetes.io\/fr\/docs\/concepts\/workloads\/controllers\/deployment\/"
    };
    (function(d,c,j){if(!document.getElementById(j)){var pd=d.createElement(c),s;pd.id=j;pd.src=('https:'==document.location.protocol)?'https://polldaddy.com/js/rating/rating.js':'http://i0.poll.fm/js/rating/rating.js';s=document.getElementsByTagName(c)[0];s.parentNode.insertBefore(pd,s);}}(document,'script','pd-rating-js'));
    </script>
    <a href="" onclick="window.open('https://github.com/kubernetes/website/issues/new?template=bug-report.md&title=Issue%20with%20' +
    'k8s.io'+window.location.pathname)" class="button issue">Ouvrez un ticket</a>
    
    
    
    <a href="https://github.com/kubernetes/website/edit/master/content/fr/docs/concepts/workloads/controllers/deployment.md" class="button issue">Editez cette page</a>
    
  </div>
  

  <div id="lastedit" class="lastedit issue-button-container">
    Dernière modification le February 06, 2020 at 2:59 PM PST de
    <a href="https://github.com/kubernetes/website/commit/98d4b04ccd8a9e701beb098eeca50dd1eebdcdac/">Fix whitespace on deployment page (#18990)</a> (<a href="https://github.com/kubernetes/website/commits/master/content/en/docs/concepts/workloads/controllers/deployment.md">Historique</a>)
  </div>
  
</div>

          </div>
        </section>
    </main>
		<footer>
    <div class="light-text main-section">
        <nav>
            
            
            
            <a href="/fr/docs/home/">Accueil</a>
            
            <a href="/fr/blog/">Blog</a>
            
            
            
            <a href="/fr/partners/">Partenaires</a>
            
            <a href="/fr/community/">Communauté</a>
            
            <a href="/fr/case-studies/">Études de cas</a>
            
        </nav>
        <div class="social" role="region" aria-label="Social hyperlinks">
            <div>
                <a href="https://twitter.com/kubernetesio" class="twitter"><span>Twitter</span></a>
                <a href="https://github.com/kubernetes/kubernetes" class="github"><span>GitHub</span></a>
                <a href="https://slack.k8s.io/" class="slack"><span>Slack</span></a>
            </div>
            <div>
                <a href="https://stackoverflow.com/questions/tagged/kubernetes" class="stack-overflow"><span>Stack Overflow</span></a>
                <a href="https://www.youtube.com/kubernetescommunity" class="youtube"><span>YouTube</span></a>
                <a href="https://discuss.kubernetes.io" class="mailing-list"><span>Forum</span></a>
                <a href="https://calendar.google.com/calendar/embed?src=nt2tcnbtbied3l6gi2h29slvc0%40group.calendar.google.com" class="calendar"><span>Calendrier</span></a>
            </div>
            <div>
                
                <a href="https://git.k8s.io/community/contributors/guide" class="button">Contribuer</a>
            </div>
        </div>
        <div class="miceType center">
            &copy; 2023 The Kubernetes Authors | Documentation Distributed under <a href="https://git.k8s.io/website/LICENSE" class="light-text">CC BY 4.0</a></a>
        </div>
        <div class="miceType center">
            Copyright &copy; 2023 The Linux Foundation &reg;. All rights reserved. The Linux Foundation has registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our <a href="https://www.linuxfoundation.org/trademark-usage" class="light-text">Trademark Usage page</a>
        </div>
        <div class="miceType center">
            ICP license: 京ICP备17074266号-3
        </div>
    </div>
</footer>

		<button class="flyout-button" onclick="kub.toggleToc()" aria-label="Toggle table of contents visibility"></button>

<script>

(function () {
    window.addEventListener('DOMContentLoaded', init)

        
        function init() {
            window.removeEventListener('DOMContentLoaded', init)
                hideNav()
        }

    function hideNav(toc){
        if (!toc) toc = document.querySelector('#docsToc')
        if (!toc) return
            var container = toc.querySelector('.container')

                
                if (container) {
                    if (container.childElementCount === 0 || toc.querySelectorAll('a.item').length === 1) {
                        toc.style.display = 'none'
                            document.getElementById('docsContent').style.width = '100%'
                    }
                } else {
                    requestAnimationFrame(function () {
                        hideNav(toc)
                    })
                }
    }
})();
</script>



    <script language="application/javascript">
      
      (function addHeadingLinks(){
        var article = document.getElementById('docsContent');
        var headings = article.querySelectorAll('h1, h2, h3, h4, h5, h6');
        headings.forEach(function(heading){
          if(heading.id){
            var a = document.createElement('a');
            a.innerHTML = heading.innerHTML;
            a.href = '#'+heading.id;
            a.classList.add('inpage_heading');
            heading.innerHTML = '';
            heading.appendChild(a);
          }
        });
      })();
    </script>
	</body>
</html>
