<!DOCTYPE html>
<html id="docs" lang="en" class="">
	<head>
	

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-36037335-10"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-36037335-10');
</script>
<meta charset="utf-8">
<title>Production environment - Kubernetes</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="theme-color" content="#326ce5">
<link rel="shortcut icon" type="image/png" href="/images/favicon.png">









<link rel="stylesheet" href="/css/style.b7b8403eb5b1fddd0a2da2a8383d5b53e6ef81c23e4b0e292e6103bd91f9502d.css" integrity="sha256-t7hAPrWx/d0KLaKoOD1bU&#43;bvgcI&#43;Sw4pLmEDvZH5UC0=">


<link rel="stylesheet" href="/css/base_fonts.css">
<link rel="stylesheet" href="/css/jquery-ui.min.css">
<link rel="stylesheet" href="/css/callouts.css">
<link rel="stylesheet" href="/css/custom-jekyll/tags.css">



<meta name="description" content="">
<meta property="og:description" content="">
<meta name="twitter:description" content="">
<meta property="og:url" content="https://kubernetes.io/docs/setup/production-environment/">
<meta property="og:title" content="Production environment">
<meta name="twitter:title" content="Production environment">
<meta name="twitter:image" content="https://kubernetes.io/images/favicon.png" />

<meta name="twitter:image:alt" content="Kubernetes">

<meta property="og:image" content="/images/kubernetes-horizontal-color.png">

<meta property="og:type" content="article">
<script src="/js/anchor-4.1.1.min.js"></script>
<script src="/js/jquery-3.2.1.min.js"></script>
<script src="/js/jquery-ui-1.12.1.min.js"></script>
<script src="/js/bootstrap-4.3.1.min.js"></script>
<script src="/js/sweetalert-2.1.2.min.js"></script>

<script src="/js/script.js"></script>
<script src="/js/custom-jekyll/tags.js"></script>


	</head>
	<body>
		<div id="cellophane" onclick="kub.toggleMenu()"></div>

<header>
    <a href="/" class="logo" title="Production-Grade Container Orchestration - Kubernetes" aria-label="Kubernetes website"></a>

    <div class="nav-buttons" data-auto-burger="primary">
        <ul class="global-nav">
            
            
            <li><a href="/docs/" class="active">Documentation</a></li>
            
            <li><a href="/blog/">Blog</a></li>
            
            <li><a href="/training/">Training</a></li>
            
            <li><a href="/partners/">Partners</a></li>
            
            <li><a href="/community/">Community</a></li>
            
            <li><a href="/case-studies/">Case Studies</a></li>
            
            
            
             <li>
                <a href="#">
                    English <span class="ui-icon ui-icon-carat-1-s"></span>
                </a>
                <ul>
                
                    <li><a href="/zh/docs/setup/production-environment/">中文 Chinese</a></li>
                
                    <li><a href="/ko/docs/setup/production-environment/">한국어 Korean</a></li>
                
                    <li><a href="/ja/docs/setup/production-environment/">日本語 Japanese</a></li>
                
                </ul>
            </li>

            <li>
                <a href="#">
                    v1.17 <span class="ui-icon ui-icon-carat-1-s"></span>
                </a>
                <ul>
                
                    <li><a href="https://kubernetes.io/docs/setup/production-environment/">v1.21</a></li>
                
                    <li><a href="https://v1-20.docs.kubernetes.io/docs/setup/production-environment/">v1.20</a></li>
                
                    <li><a href="https://v1-19.docs.kubernetes.io/docs/setup/production-environment/">v1.19</a></li>
                
                    <li><a href="https://v1-18.docs.kubernetes.io/docs/setup/production-environment/">v1.18</a></li>
                
                    <li><a href="https://v1-17.docs.kubernetes.io/docs/setup/production-environment/">v1.17</a></li>
                
                </ul>
            </li>
        </ul>
        
        <a href="/docs/tutorials/kubernetes-basics/" class="button" id="tryKubernetes" data-auto-burger-exclude>Learn Kubernetes Basics</a>
        

        <button id="hamburger" onclick="kub.toggleMenu()" data-auto-burger-exclude><div></div></button>
    </div>

    <nav id="mainNav">
        <div class="main-section" data-auto-burger="primary">
         
           <div class="nav-box">
            <h3><a href="/docs/tutorials/hello-minikube/">Get Started</a></h3>
           <p>Ready to get your hands dirty? Build a simple Kubernetes cluster that runs "Hello World" for Node.js.</p>

            </div>
         
           <div class="nav-box">
            <h3><a href="/docs/home/">Documentation</a></h3>
           <p>Learn how to use Kubernetes with conceptual, tutorial, and reference documentation. You can even <a href="/editdocs/" data-auto-burger-exclude>help contribute to the docs</a>!</p>

            </div>
         
           <div class="nav-box">
            <h3><a href="/blog/">Blog</a></h3>
           <p>Read the latest news for Kubernetes and the containers space in general, and get technical how-tos hot off the presses.</p>

            </div>
         
        </div>
        <div class="main-section" data-auto-burger="primary">
            <div class="left">
                <h5 class="github-invite">Interested in hacking on the core Kubernetes code base?</h5>
                <a href="https://github.com/kubernetes/kubernetes" class="button" data-auto-burger-exclude>View On GitHub</a>
            </div>

            <div class="right">
                <h5 class="github-invite">Explore the community</h5>
                <div class="social">
                    <a href="https://twitter.com/kubernetesio" class="twitter"><span>Twitter</span></a>
                    <a href="https://github.com/kubernetes/kubernetes" class="github"><span>GitHub</span></a>
                    <a href="http://slack.k8s.io/" class="slack"><span>Slack Slack</span></a>
                    <a href="https://stackoverflow.com/questions/tagged/kubernetes" class="stack-overflow"><span>Stack Overflow</span></a>
                    <a href="https://www.youtube.com/kubernetescommunity" class="youtube"><span>YouTube</span></a>
                    <a href="https://discuss.kubernetes.io" class="mailing-list"><span>Forum</span></a>
                    <a href="https://calendar.google.com/calendar/embed?src=nt2tcnbtbied3l6gi2h29slvc0%40group.calendar.google.com" class="calendar"><span>Events Calendar</span></a>
                </div>
            </div>
            <div class="clear" style="clear: both"></div>
        </div>
    </nav>
</header>

		
		
		<section id="hero" class="light-text no-sub">
			







<h1>Getting started</h1>
<h5></h5>












<div id="vendorStrip" class="light-text">
	<ul>
		
		
		<li><a href="/docs/home/">HOME</a></li>
		
		
		<li><a href="/docs/setup/" class="YAH">GETTING STARTED</a></li>
		
		
		<li><a href="/docs/concepts/">CONCEPTS</a></li>
		
		
		<li><a href="/docs/tasks/">TASKS</a></li>
		
		
		<li><a href="/docs/tutorials/">TUTORIALS</a></li>
		
		
		<li><a href="/docs/reference/">REFERENCE</a></li>
		
		
		<li><a href="/docs/contribute/">CONTRIBUTE</a></li>
		
	</ul>
	<form id="searchBox" action="/docs/search/" role="search">
		<input type="text" id="search" name="q" placeholder="Search" aria-label="Search">
	</form>
</div>

		</section>
		
    
		
<section id="deprecationWarning">
  <main>
    <div class="content deprecation-warning">
      <h3>
	 Kubernetes v1.17
	  documentation is no longer actively maintained. The version you are currently viewing is a static snapshot. For up-to-date documentation, see the 
	 <a href="https://kubernetes.io/docs/home/">latest version.</a>
      </h3>
    </div>
  </main>
</section>


    <main>
        <section id="encyclopedia">
          
<div id="docsToc">
     <div class="pi-accordion">
    	
        
        
        
        
        
         
             
                 
             
         
             
                 
                          
                          
                 
             
         
             
         
             
         
             
         
             
         
             
         
         
        
        <a class="item" data-title="Getting started" href="/docs/setup/"></a>

	
	
	
	
		
			
<div class="item" data-title="Release notes and version skew">
	<div class="container">
		
		
	
	
	
	
		
			

<a class="item" data-title="v1.17 Release Notes" href="/docs/setup/release/notes/"></a>

		
	
		
			

<a class="item" data-title="Kubernetes version and version skew support policy" href="/docs/setup/release/version-skew-policy/"></a>

		
	

	</div>
</div>

		
	
		
			
<div class="item" data-title="Learning environment">
	<div class="container">
		
		
	
	
	
	
		
			

<a class="item" data-title="Installing Kubernetes with Minikube" href="/docs/setup/learning-environment/minikube/"></a>

		
	
		
			

<a class="item" data-title="Installing Kubernetes with Kind" href="/docs/setup/learning-environment/kind/"></a>

		
	

	</div>
</div>

		
	
		
			
<div class="item" data-title="Production environment">
	<div class="container">
		
		
	
	
	
	
		
			

<a class="item" data-title="Container runtimes" href="/docs/setup/production-environment/container-runtimes/"></a>

		
	
		
			
<div class="item" data-title="Installing Kubernetes with deployment tools">
	<div class="container">
		
		
	
	
	
	
		
			
<div class="item" data-title="Bootstrapping clusters with kubeadm">
	<div class="container">
		
		
	
	
	
	
		
			

<a class="item" data-title="Installing kubeadm" href="/docs/setup/production-environment/tools/kubeadm/install-kubeadm/"></a>

		
	
		
			

<a class="item" data-title="Troubleshooting kubeadm" href="/docs/setup/production-environment/tools/kubeadm/troubleshooting-kubeadm/"></a>

		
	
		
			

<a class="item" data-title="Creating a single control-plane cluster with kubeadm" href="/docs/setup/production-environment/tools/kubeadm/create-cluster-kubeadm/"></a>

		
	
		
			

<a class="item" data-title="Customizing control plane configuration with kubeadm" href="/docs/setup/production-environment/tools/kubeadm/control-plane-flags/"></a>

		
	
		
			

<a class="item" data-title="Options for Highly Available topology" href="/docs/setup/production-environment/tools/kubeadm/ha-topology/"></a>

		
	
		
			

<a class="item" data-title="Creating Highly Available clusters with kubeadm" href="/docs/setup/production-environment/tools/kubeadm/high-availability/"></a>

		
	
		
			

<a class="item" data-title="Set up a High Availability etcd cluster with kubeadm" href="/docs/setup/production-environment/tools/kubeadm/setup-ha-etcd-with-kubeadm/"></a>

		
	
		
			

<a class="item" data-title="Configuring each kubelet in your cluster using kubeadm" href="/docs/setup/production-environment/tools/kubeadm/kubelet-integration/"></a>

		
	
		
			

<a class="item" data-title="Configuring your kubernetes cluster to self-host the control plane" href="/docs/setup/production-environment/tools/kubeadm/self-hosting/"></a>

		
	

	</div>
</div>

		
	
		
			

<a class="item" data-title="Installing Kubernetes with kops" href="/docs/setup/production-environment/tools/kops/"></a>

		
	
		
			

<a class="item" data-title="Installing Kubernetes with KRIB" href="/docs/setup/production-environment/tools/krib/"></a>

		
	
		
			

<a class="item" data-title="Installing Kubernetes with Kubespray" href="/docs/setup/production-environment/tools/kubespray/"></a>

		
	

	</div>
</div>

		
	
		
			
<div class="item" data-title="Turnkey Cloud Solutions">
	<div class="container">
		
		
	
	
	
	
		
			

<a class="item" data-title="Running Kubernetes on Alibaba Cloud" href="/docs/setup/production-environment/turnkey/alibaba-cloud/"></a>

		
	
		
			

<a class="item" data-title="Running Kubernetes on AWS EC2" href="/docs/setup/production-environment/turnkey/aws/"></a>

		
	
		
			

<a class="item" data-title="Running Kubernetes on Azure" href="/docs/setup/production-environment/turnkey/azure/"></a>

		
	
		
			

<a class="item" data-title="Running Kubernetes on CenturyLink Cloud" href="/docs/setup/production-environment/turnkey/clc/"></a>

		
	
		
			

<a class="item" data-title="Running Kubernetes on Google Compute Engine" href="/docs/setup/production-environment/turnkey/gce/"></a>

		
	
		
			

<a class="item" data-title="Running Kubernetes on Multiple Clouds with IBM Cloud Private" href="/docs/setup/production-environment/turnkey/icp/"></a>

		
	
		
			

<a class="item" data-title="Running Kubernetes on Tencent Kubernetes Engine" href="/docs/setup/production-environment/turnkey/tencent/"></a>

		
	

	</div>
</div>

		
	
		
			
<div class="item" data-title="On-Premises VMs">
	<div class="container">
		
		
	
	
	
	
		
			

<a class="item" data-title="Cloudstack" href="/docs/setup/production-environment/on-premises-vm/cloudstack/"></a>

		
	
		
			

<a class="item" data-title="Kubernetes on DC/OS" href="/docs/setup/production-environment/on-premises-vm/dcos/"></a>

		
	
		
			

<a class="item" data-title="oVirt" href="/docs/setup/production-environment/on-premises-vm/ovirt/"></a>

		
	

	</div>
</div>

		
	
		
			
<div class="item" data-title="Windows in Kubernetes">
	<div class="container">
		
		
	
	
	
	
		
			

<a class="item" data-title="Intro to Windows support in Kubernetes" href="/docs/setup/production-environment/windows/intro-windows-in-kubernetes/"></a>

		
	
		
			

<a class="item" data-title="Guide for adding Windows Nodes in Kubernetes" href="/docs/setup/production-environment/windows/user-guide-windows-nodes/"></a>

		
	
		
			

<a class="item" data-title="Guide for scheduling Windows containers in Kubernetes" href="/docs/setup/production-environment/windows/user-guide-windows-containers/"></a>

		
	

	</div>
</div>

		
	

	</div>
</div>

		
	
		
			
<div class="item" data-title="Best practices">
	<div class="container">
		
		
	
	
	
	
		
			

<a class="item" data-title="Running in multiple zones" href="/docs/setup/best-practices/multiple-zones/"></a>

		
	
		
			

<a class="item" data-title="Building large clusters" href="/docs/setup/best-practices/cluster-large/"></a>

		
	
		
			

<a class="item" data-title="Validate node setup" href="/docs/setup/best-practices/node-conformance/"></a>

		
	
		
			

<a class="item" data-title="PKI certificates and requirements" href="/docs/setup/best-practices/certificates/"></a>

		
	

	</div>
</div>

		
	





     </div> 
    <button class="push-menu-close-button" onclick="kub.toggleToc()"></button>
</div> 


          <div id="docsContent">
            
    
    
    
    
    
    
	 
    
    
    
<p>
  <a href="https://github.com/kubernetes/website/edit/master/content/en/docs/setup/production-environment/container-runtimes.md" id="editPageButton" target="_blank">
    Edit This Page
  </a>
</p>

<h1>Container runtimes</h1>



<div style="margin-top: 10px; margin-bottom: 10px;">



<b>FEATURE STATE:</b> <code>Kubernetes v1.6</code>




    
    
    
    
    
<a href="#" id="feature-state-dialog-link" class="ui-state-default ui-corner-all"><span class="ui-icon ui-icon-newwin"></span>stable</a>
<div id="feature-state-dialog" class="ui-dialog-content" title="stable">
This feature is <em>stable</em>, meaning:</p>

<ul>
<li>The version name is vX where X is an integer.</li>
<li>Stable versions of features will appear in released software for many subsequent versions.</li>
</ul>
</div>
<script>
$(function(){
    
    $( "#feature-state-dialog" ).dialog({
        autoOpen: false,
        width: "600",
        buttons: [
            {
                text: "Ok",
                click: function() {
                    $( this ).dialog( "close" );
                }
            }
        ]
    });

    
    $( "#feature-state-dialog-link" ).click(function( event ) {
        $( "#feature-state-dialog" ).dialog( "open" );
        event.preventDefault();
    });

});
</script>

    

</div>

<p>To run containers in Pods, Kubernetes uses a container runtime. Here are
the installation instructions for various runtimes.</p>









<ul id="markdown-toc">










<li><a href="#docker">Docker</a></li>




<li><a href="#cri-o">CRI-O</a></li>




<li><a href="#containerd">Containerd</a></li>




<li><a href="#other-cri-runtimes-frakti">Other CRI runtimes: frakti</a></li>



















</ul>


<blockquote class="caution">
  <div><strong>Caution:</strong> <p>A flaw was found in the way runc handled system file descriptors when running containers.
A malicious container could use this flaw to overwrite contents of the runc binary and
consequently run arbitrary commands on the container host system.</p>

<p>Please refer to this link for more information about this issue
<a href="https://access.redhat.com/security/cve/cve-2019-5736" target="_blank">cve-2019-5736 : runc vulnerability </a></p>
</div>
</blockquote>

<h3 id="applicability">Applicability</h3>

<blockquote class="note">
  <div><strong>Note:</strong> This document is written for users installing CRI onto Linux. For other operating
systems, look for documentation specific to your platform.</div>
</blockquote>

<p>You should execute all the commands in this guide as <code>root</code>. For example, prefix commands
with <code>sudo</code>, or become <code>root</code> and run the commands as that user.</p>

<h3 id="cgroup-drivers">Cgroup drivers</h3>

<p>When systemd is chosen as the init system for a Linux distribution, the init process generates
and consumes a root control group (<code>cgroup</code>) and acts as a cgroup manager. Systemd has a tight
integration with cgroups and will allocate cgroups per process. It&rsquo;s possible to configure your
container runtime and the kubelet to use <code>cgroupfs</code>. Using <code>cgroupfs</code> alongside systemd means
that there will then be two different cgroup managers.</p>

<p>Control groups are used to constrain resources that are allocated to processes.
A single cgroup manager will simplify the view of what resources are being allocated
and will by default have a more consistent view of the available and in-use resources. When we have
two managers we end up with two views of those resources. We have seen cases in the field
where nodes that are configured to use <code>cgroupfs</code> for the kubelet and Docker, and <code>systemd</code>
for the rest of the processes running on the node becomes unstable under resource pressure.</p>

<p>Changing the settings such that your container runtime and kubelet use <code>systemd</code> as the cgroup driver
stabilized the system. Please note the <code>native.cgroupdriver=systemd</code> option in the Docker setup below.</p>

<blockquote class="caution">
  <div><strong>Caution:</strong> Changing the cgroup driver of a Node that has joined a cluster is highly unrecommended.
If the kubelet has created Pods using the semantics of one cgroup driver, changing the container
runtime to another cgroup driver can cause errors when trying to re-create the PodSandbox
for such existing Pods. Restarting the kubelet may not solve such errors. The recommendation
is to drain the Node from its workloads, remove it from the cluster and re-join it.</div>
</blockquote>

<h2 id="docker">Docker</h2>

<p>On each of your machines, install Docker.
Version 19.03.4 is recommended, but 1.13.1, 17.03, 17.06, 17.09, 18.06 and 18.09 are known to work as well.
Keep track of the latest verified Docker version in the Kubernetes release notes.</p>

<p>Use the following commands to install Docker on your system:</p>

<div id="tab-cri-docker-installation">
<ul>
    
      
  <li><a href="#tab-cri-docker-installation-0">Ubuntu 16.04&#43;</a></li>

      
  <li><a href="#tab-cri-docker-installation-1">CentOS/RHEL 7.4&#43;</a></li>

</ul>


<div id="tab-cri-docker-installation-0">
    
        <div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">
<span style="color:#080;font-style:italic"># Install Docker CE</span>
<span style="color:#080;font-style:italic">## Set up the repository:</span>
<span style="color:#080;font-style:italic">### Install packages to allow apt to use a repository over HTTPS</span>
apt-get update <span style="color:#666">&amp;&amp;</span> apt-get install -y <span style="color:#b62;font-weight:bold">\
</span><span style="color:#b62;font-weight:bold"></span>  apt-transport-https ca-certificates curl software-properties-common gnupg2

<span style="color:#080;font-style:italic">### Add Docker’s official GPG key</span>
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | apt-key add -

<span style="color:#080;font-style:italic">### Add Docker apt repository.</span>
add-apt-repository <span style="color:#b62;font-weight:bold">\
</span><span style="color:#b62;font-weight:bold"></span>  <span style="color:#b44">&#34;deb [arch=amd64] https://download.docker.com/linux/ubuntu \
</span><span style="color:#b44">  </span><span style="color:#a2f;font-weight:bold">$(</span>lsb_release -cs<span style="color:#a2f;font-weight:bold">)</span><span style="color:#b44"> \
</span><span style="color:#b44">  stable&#34;</span>

<span style="color:#080;font-style:italic">## Install Docker CE.</span>
apt-get update <span style="color:#666">&amp;&amp;</span> apt-get install -y <span style="color:#b62;font-weight:bold">\
</span><span style="color:#b62;font-weight:bold"></span>  containerd.io<span style="color:#666">=</span><span style="color:#666">1</span>.2.10-3 <span style="color:#b62;font-weight:bold">\
</span><span style="color:#b62;font-weight:bold"></span>  docker-ce<span style="color:#666">=</span><span style="color:#666">5</span>:19.03.4~3-0~ubuntu-<span style="color:#a2f;font-weight:bold">$(</span>lsb_release -cs<span style="color:#a2f;font-weight:bold">)</span> <span style="color:#b62;font-weight:bold">\
</span><span style="color:#b62;font-weight:bold"></span>  docker-ce-cli<span style="color:#666">=</span><span style="color:#666">5</span>:19.03.4~3-0~ubuntu-<span style="color:#a2f;font-weight:bold">$(</span>lsb_release -cs<span style="color:#a2f;font-weight:bold">)</span>

<span style="color:#080;font-style:italic"># Setup daemon.</span>
cat &gt; /etc/docker/daemon.json <span style="color:#b44">&lt;&lt;EOF
</span><span style="color:#b44">{
</span><span style="color:#b44">  &#34;exec-opts&#34;: [&#34;native.cgroupdriver=systemd&#34;],
</span><span style="color:#b44">  &#34;log-driver&#34;: &#34;json-file&#34;,
</span><span style="color:#b44">  &#34;log-opts&#34;: {
</span><span style="color:#b44">    &#34;max-size&#34;: &#34;100m&#34;
</span><span style="color:#b44">  },
</span><span style="color:#b44">  &#34;storage-driver&#34;: &#34;overlay2&#34;
</span><span style="color:#b44">}
</span><span style="color:#b44">EOF</span>

mkdir -p /etc/systemd/system/docker.service.d

<span style="color:#080;font-style:italic"># Restart docker.</span>
systemctl daemon-reload
systemctl restart docker
</code></pre></div>
    

<p></div></p>

<div id="tab-cri-docker-installation-1">
    
        <div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">

<span style="color:#080;font-style:italic"># Install Docker CE</span>
<span style="color:#080;font-style:italic">## Set up the repository</span>
<span style="color:#080;font-style:italic">### Install required packages.</span>
yum install -y yum-utils device-mapper-persistent-data lvm2

<span style="color:#080;font-style:italic">### Add Docker repository.</span>
yum-config-manager --add-repo <span style="color:#b62;font-weight:bold">\
</span><span style="color:#b62;font-weight:bold"></span>  https://download.docker.com/linux/centos/docker-ce.repo

<span style="color:#080;font-style:italic">## Install Docker CE.</span>
yum update -y <span style="color:#666">&amp;&amp;</span> yum install -y <span style="color:#b62;font-weight:bold">\
</span><span style="color:#b62;font-weight:bold"></span>  containerd.io-1.2.10 <span style="color:#b62;font-weight:bold">\
</span><span style="color:#b62;font-weight:bold"></span>  docker-ce-19.03.4 <span style="color:#b62;font-weight:bold">\
</span><span style="color:#b62;font-weight:bold"></span>  docker-ce-cli-19.03.4

<span style="color:#080;font-style:italic">## Create /etc/docker directory.</span>
mkdir /etc/docker

<span style="color:#080;font-style:italic"># Setup daemon.</span>
cat &gt; /etc/docker/daemon.json <span style="color:#b44">&lt;&lt;EOF
</span><span style="color:#b44">{
</span><span style="color:#b44">  &#34;exec-opts&#34;: [&#34;native.cgroupdriver=systemd&#34;],
</span><span style="color:#b44">  &#34;log-driver&#34;: &#34;json-file&#34;,
</span><span style="color:#b44">  &#34;log-opts&#34;: {
</span><span style="color:#b44">    &#34;max-size&#34;: &#34;100m&#34;
</span><span style="color:#b44">  },
</span><span style="color:#b44">  &#34;storage-driver&#34;: &#34;overlay2&#34;,
</span><span style="color:#b44">  &#34;storage-opts&#34;: [
</span><span style="color:#b44">    &#34;overlay2.override_kernel_check=true&#34;
</span><span style="color:#b44">  ]
</span><span style="color:#b44">}
</span><span style="color:#b44">EOF</span>

mkdir -p /etc/systemd/system/docker.service.d

<span style="color:#080;font-style:italic"># Restart Docker</span>
systemctl daemon-reload
systemctl restart docker
</code></pre></div>
    

<p></div></p>

<p></div></p>

<script>$(function(){$("#tab-cri-docker-installation").tabs();});</script>

<p>Refer to the <a href="https://docs.docker.com/engine/installation/" target="_blank">official Docker installation guides</a>
for more information.</p>

<h2 id="cri-o">CRI-O</h2>

<p>This section contains the necessary steps to install <code>CRI-O</code> as CRI runtime.</p>

<p>Use the following commands to install CRI-O on your system:</p>

<blockquote class="note">
  <div><strong>Note:</strong> The CRI-O major and minor versions must match the Kubernetes major and minor versions.
For more information, see the <a href="https://github.com/cri-o/cri-o" target="_blank">CRI-O compatiblity matrix</a>.</div>
</blockquote>

<h3 id="prerequisites">Prerequisites</h3>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">modprobe overlay
modprobe br_netfilter

<span style="color:#080;font-style:italic"># Setup required sysctl params, these persist across reboots.</span>
cat &gt; /etc/sysctl.d/99-kubernetes-cri.conf <span style="color:#b44">&lt;&lt;EOF
</span><span style="color:#b44">net.bridge.bridge-nf-call-iptables  = 1
</span><span style="color:#b44">net.ipv4.ip_forward                 = 1
</span><span style="color:#b44">net.bridge.bridge-nf-call-ip6tables = 1
</span><span style="color:#b44">EOF</span>

sysctl --system</code></pre></div>
<div id="tab-cri-cri-o-installation">
<ul>
    
      
  <li><a href="#tab-cri-cri-o-installation-0">Debian</a></li>

      
  <li><a href="#tab-cri-cri-o-installation-1">Ubuntu 18.04, 19.04 and 19.10</a></li>

      
  <li><a href="#tab-cri-cri-o-installation-2">CentOS/RHEL 7.4&#43;</a></li>

      
  <li><a href="#tab-cri-cri-o-installation-3">openSUSE Tumbleweed</a></li>

</ul>


<div id="tab-cri-cri-o-installation-0">
    
        <div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">
<span style="color:#080;font-style:italic"># Debian Unstable/Sid</span>
<span style="color:#a2f">echo</span> <span style="color:#b44">&#39;deb http://download.opensuse.org/repositories/devel:/kubic:/libcontainers:/stable/Debian_Unstable/ /&#39;</span> &gt; /etc/apt/sources.list.d/devel:kubic:libcontainers:stable.list
wget -nv https://download.opensuse.org/repositories/devel:kubic:libcontainers:stable/Debian_Unstable/Release.key -O- | sudo apt-key add -

<span style="color:#080;font-style:italic"># Debian Testing</span>
<span style="color:#a2f">echo</span> <span style="color:#b44">&#39;deb http://download.opensuse.org/repositories/devel:/kubic:/libcontainers:/stable/Debian_Testing/ /&#39;</span> &gt; /etc/apt/sources.list.d/devel:kubic:libcontainers:stable.list
wget -nv https://download.opensuse.org/repositories/devel:kubic:libcontainers:stable/Debian_Testing/Release.key -O- | sudo apt-key add -

<span style="color:#080;font-style:italic"># Debian 10</span>
<span style="color:#a2f">echo</span> <span style="color:#b44">&#39;deb http://download.opensuse.org/repositories/devel:/kubic:/libcontainers:/stable/Debian_10/ /&#39;</span> &gt; /etc/apt/sources.list.d/devel:kubic:libcontainers:stable.list
wget -nv https://download.opensuse.org/repositories/devel:kubic:libcontainers:stable/Debian_10/Release.key -O- | sudo apt-key add -

<span style="color:#080;font-style:italic"># Raspbian 10</span>
<span style="color:#a2f">echo</span> <span style="color:#b44">&#39;deb http://download.opensuse.org/repositories/devel:/kubic:/libcontainers:/stable/Raspbian_10/ /&#39;</span> &gt; /etc/apt/sources.list.d/devel:kubic:libcontainers:stable.list
wget -nv https://download.opensuse.org/repositories/devel:kubic:libcontainers:stable/Raspbian_10/Release.key -O- | sudo apt-key add -

<span style="color:#080;font-style:italic"># Install CRI-O</span>
sudo apt-get install cri-o-1.17
</code></pre></div>
    

<p></div></p>

<div id="tab-cri-cri-o-installation-1">
    
        <div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">
<span style="color:#080;font-style:italic"># Setup repository</span>
. /etc/os-release
sudo sh -c <span style="color:#b44">&#34;echo &#39;deb http://download.opensuse.org/repositories/devel:/kubic:/libcontainers:/stable/x</span><span style="color:#b68;font-weight:bold">${</span><span style="color:#b8860b">NAME</span><span style="color:#b68;font-weight:bold">}</span><span style="color:#b44">_</span><span style="color:#b68;font-weight:bold">${</span><span style="color:#b8860b">VERSION_ID</span><span style="color:#b68;font-weight:bold">}</span><span style="color:#b44">/ /&#39; &gt; /etc/apt/sources.list.d/devel:kubic:libcontainers:stable.list&#34;</span>
wget -nv https://download.opensuse.org/repositories/devel:kubic:libcontainers:stable/x<span style="color:#b68;font-weight:bold">${</span><span style="color:#b8860b">NAME</span><span style="color:#b68;font-weight:bold">}</span>_<span style="color:#b68;font-weight:bold">${</span><span style="color:#b8860b">VERSION_ID</span><span style="color:#b68;font-weight:bold">}</span>/Release.key -O- | sudo apt-key add -
sudo apt-get update

<span style="color:#080;font-style:italic"># Install CRI-O</span>
sudo apt-get install cri-o-1.17
</code></pre></div>
    

<p></div></p>

<div id="tab-cri-cri-o-installation-2">
    
        <div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">
<span style="color:#080;font-style:italic"># Install prerequisites</span>
yum-config-manager --add-repo<span style="color:#666">=</span>https://cbs.centos.org/repos/paas7-crio-115-release/x86_64/os/

<span style="color:#080;font-style:italic"># Install CRI-O</span>
yum install --nogpgcheck -y cri-o
</code></pre></div>
    

<p></div></p>

<div id="tab-cri-cri-o-installation-3">
    
        <div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">
sudo zypper install cri-o
</code></pre></div>
    

<p></div></p>

<p></div></p>

<script>$(function(){$("#tab-cri-cri-o-installation").tabs();});</script>

<h3 id="start-cri-o">Start CRI-O</h3>

<pre><code>systemctl daemon-reload
systemctl start crio
</code></pre>

<p>Refer to the <a href="https://github.com/kubernetes-sigs/cri-o#getting-started" target="_blank">CRI-O installation guide</a>
for more information.</p>

<h2 id="containerd">Containerd</h2>

<p>This section contains the necessary steps to use <code>containerd</code> as CRI runtime.</p>

<p>Use the following commands to install Containerd on your system:</p>

<h3 id="prerequisites-1">Prerequisites</h3>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">cat &gt; /etc/modules-load.d/containerd.conf <span style="color:#b44">&lt;&lt;EOF
</span><span style="color:#b44">overlay
</span><span style="color:#b44">br_netfilter
</span><span style="color:#b44">EOF</span>

modprobe overlay
modprobe br_netfilter

<span style="color:#080;font-style:italic"># Setup required sysctl params, these persist across reboots.</span>
cat &gt; /etc/sysctl.d/99-kubernetes-cri.conf <span style="color:#b44">&lt;&lt;EOF
</span><span style="color:#b44">net.bridge.bridge-nf-call-iptables  = 1
</span><span style="color:#b44">net.ipv4.ip_forward                 = 1
</span><span style="color:#b44">net.bridge.bridge-nf-call-ip6tables = 1
</span><span style="color:#b44">EOF</span>

sysctl --system</code></pre></div>
<h3 id="install-containerd">Install containerd</h3>

<div id="tab-cri-containerd-installation">
<ul>
    
      
  <li><a href="#tab-cri-containerd-installation-0">Ubuntu 16.04</a></li>

      
  <li><a href="#tab-cri-containerd-installation-1">CentOS/RHEL 7.4&#43;</a></li>

</ul>


<div id="tab-cri-containerd-installation-0">
    
        <div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">
<span style="color:#080;font-style:italic"># Install containerd</span>
<span style="color:#080;font-style:italic">## Set up the repository</span>
<span style="color:#080;font-style:italic">### Install packages to allow apt to use a repository over HTTPS</span>
apt-get update <span style="color:#666">&amp;&amp;</span> apt-get install -y apt-transport-https ca-certificates curl software-properties-common

<span style="color:#080;font-style:italic">### Add Docker’s official GPG key</span>
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | apt-key add -

<span style="color:#080;font-style:italic">### Add Docker apt repository.</span>
add-apt-repository <span style="color:#b62;font-weight:bold">\
</span><span style="color:#b62;font-weight:bold"></span>    <span style="color:#b44">&#34;deb [arch=amd64] https://download.docker.com/linux/ubuntu \
</span><span style="color:#b44">    </span><span style="color:#a2f;font-weight:bold">$(</span>lsb_release -cs<span style="color:#a2f;font-weight:bold">)</span><span style="color:#b44"> \
</span><span style="color:#b44">    stable&#34;</span>

<span style="color:#080;font-style:italic">## Install containerd</span>
apt-get update <span style="color:#666">&amp;&amp;</span> apt-get install -y containerd.io

<span style="color:#080;font-style:italic"># Configure containerd</span>
mkdir -p /etc/containerd
containerd config default &gt; /etc/containerd/config.toml

<span style="color:#080;font-style:italic"># Restart containerd</span>
systemctl restart containerd
</code></pre></div>
    

<p></div></p>

<div id="tab-cri-containerd-installation-1">
    
        <div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">
<span style="color:#080;font-style:italic"># Install containerd</span>
<span style="color:#080;font-style:italic">## Set up the repository</span>
<span style="color:#080;font-style:italic">### Install required packages</span>
yum install -y yum-utils device-mapper-persistent-data lvm2

<span style="color:#080;font-style:italic">### Add docker repository</span>
yum-config-manager <span style="color:#b62;font-weight:bold">\
</span><span style="color:#b62;font-weight:bold"></span>    --add-repo <span style="color:#b62;font-weight:bold">\
</span><span style="color:#b62;font-weight:bold"></span>    https://download.docker.com/linux/centos/docker-ce.repo

<span style="color:#080;font-style:italic">## Install containerd</span>
yum update -y <span style="color:#666">&amp;&amp;</span> yum install -y containerd.io

<span style="color:#080;font-style:italic"># Configure containerd</span>
mkdir -p /etc/containerd
containerd config default &gt; /etc/containerd/config.toml

<span style="color:#080;font-style:italic"># Restart containerd</span>
systemctl restart containerd
</code></pre></div>
    

<p></div></p>

<p></div></p>

<script>$(function(){$("#tab-cri-containerd-installation").tabs();});</script>

<h3 id="systemd">systemd</h3>

<p>To use the <code>systemd</code> cgroup driver, set <code>plugins.cri.systemd_cgroup = true</code> in <code>/etc/containerd/config.toml</code>.
When using kubeadm, manually configure the
<a href="/docs/setup/production-environment/tools/kubeadm/install-kubeadm/#configure-cgroup-driver-used-by-kubelet-on-control-plane-node">cgroup driver for kubelet</a></p>

<h2 id="other-cri-runtimes-frakti">Other CRI runtimes: frakti</h2>

<p>Refer to the <a href="https://github.com/kubernetes/frakti#quickstart" target="_blank">Frakti QuickStart guide</a> for more information.</p>














    
    

    
            
  <h2>Feedback</h2>
  <p class="feedback--prompt">Was this page helpful? </p>
  <button class="button feedback--yes">Yes</button>
  <button class="button feedback--no">No</button>
  <p class="feedback--response feedback--response__hidden">
    Thanks for the feedback. If you have a specific, answerable question about how to use Kubernetes, ask it on
    <a target="_blank" rel="noopener"
      href="https://stackoverflow.com/questions/tagged/kubernetes">
      Stack Overflow</a>.
    Open an issue in the GitHub repo if you want to 
    <a class="feedback--link" target="_blank" rel="noopener"
      href="https://github.com/kubernetes/website/issues/new?title=Issue%20with%20k8s.io">
      report a problem</a>
    or
    <a class="feedback--link" target="_blank" rel="noopener"
      href="https://github.com/kubernetes/website/issues/new?title=Improvement%20for%20k8s.io">
      suggest an improvement</a>.
  </p>
  <script>
    const yes = document.querySelector('.feedback--yes');
    const no = document.querySelector('.feedback--no');
    document.querySelectorAll('.feedback--link').forEach(link => {
      link.href = link.href + window.location.pathname;
    });
    const sendFeedback = (value) => {
      if (!gtag) { console.log('!gtag'); }
      gtag('event', 'click', {
        'event_category': 'Helpful',
        'event_label': window.location.pathname,
        value
      });
    };
    const disableButtons = () => {
      yes.disabled = true;
      yes.classList.add('feedback--button__disabled');
      no.disabled = true;
      no.classList.add('feedback--button__disabled');
    };
    yes.addEventListener('click', () => {
      sendFeedback(1);
      disableButtons();
      document.querySelector('.feedback--response').classList.remove('feedback--response__hidden');
    });
    no.addEventListener('click', () => {
      sendFeedback(0);
      disableButtons();
      document.querySelector('.feedback--response').classList.remove('feedback--response__hidden');
    });
  </script>


    
            <div id="pre-footer"> 
  <hr />

  <div class="issue-button-container">
    <p><a href=""><img src="https://kubernetes-site.appspot.com/UA-36037335-10/GitHub/docs/setup/production-environment/_index.md?pixel" alt="Analytics" /></a></p>
    
    
    <script type="text/javascript">
    PDRTJS_settings_8345992 = {
    "id" : "8345992",
    "unique_id" : "\/docs\/setup\/production-environment\/",
    "title" : "Production environment",
    "permalink" : "https:\/\/kubernetes.io\/docs\/setup\/production-environment\/"
    };
    (function(d,c,j){if(!document.getElementById(j)){var pd=d.createElement(c),s;pd.id=j;pd.src=('https:'==document.location.protocol)?'https://polldaddy.com/js/rating/rating.js':'http://i0.poll.fm/js/rating/rating.js';s=document.getElementsByTagName(c)[0];s.parentNode.insertBefore(pd,s);}}(document,'script','pd-rating-js'));
    </script>
    <a href="" onclick="window.open('https://github.com/kubernetes/website/issues/new?template=bug-report.md&title=Issue%20with%20' +
    'k8s.io'+window.location.pathname)" class="button issue">Create an Issue</a>
    
    
    
    <a href="https://github.com/kubernetes/website/edit/master/content/en/docs/setup/production-environment/_index.md" class="button issue">Edit This Page</a>
    
  </div>
  

  <div id="lastedit" class="lastedit issue-button-container">
    Page last modified on June 12, 2019 at 5:27 PM PST by
    <a href="https://github.com/kubernetes/website/commit/55ac801bc447ae185b6d0dd22ac5793e91f329fe/">Restructure the left navigation pane of setup (#14826)</a> (<a href="https://github.com/kubernetes/website/commits/master/content/en/docs/setup/production-environment/_index.md">Page History</a>)
  </div>
  
</div>

          </div>
        </section>
    </main>
		<footer>
    <div class="light-text main-section">
        <nav>
            
            
            
            <a href="/docs/home/">Home</a>
            
            <a href="/blog/">Blog</a>
            
            <a href="/training/">Training</a>
            
            <a href="/partners/">Partners</a>
            
            <a href="/community/">Community</a>
            
            <a href="/case-studies/">Case Studies</a>
            
        </nav>
        <div class="social" role="region" aria-label="Social hyperlinks">
            <div>
                <a href="https://twitter.com/kubernetesio" class="twitter"><span>Twitter</span></a>
                <a href="https://github.com/kubernetes/kubernetes" class="github"><span>GitHub</span></a>
                <a href="https://slack.k8s.io/" class="slack"><span>Slack</span></a>
            </div>
            <div>
                <a href="https://stackoverflow.com/questions/tagged/kubernetes" class="stack-overflow"><span>Stack Overflow</span></a>
                <a href="https://www.youtube.com/kubernetescommunity" class="youtube"><span>YouTube</span></a>
                <a href="https://discuss.kubernetes.io" class="mailing-list"><span>Forum</span></a>
                <a href="https://calendar.google.com/calendar/embed?src=nt2tcnbtbied3l6gi2h29slvc0%40group.calendar.google.com" class="calendar"><span>Events Calendar</span></a>
            </div>
            <div>
                
                <a href="https://git.k8s.io/community/contributors/guide" class="button">Contribute</a>
            </div>
        </div>
        <div class="miceType center">
            &copy; 2023 The Kubernetes Authors | Documentation Distributed under <a href="https://git.k8s.io/website/LICENSE" class="light-text">CC BY 4.0</a></a>
        </div>
        <div class="miceType center">
            Copyright &copy; 2023 The Linux Foundation &reg;. All rights reserved. The Linux Foundation has registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our <a href="https://www.linuxfoundation.org/trademark-usage" class="light-text">Trademark Usage page</a>
        </div>
        <div class="miceType center">
            ICP license: 京ICP备17074266号-3
        </div>
    </div>
</footer>

		<button class="flyout-button" onclick="kub.toggleToc()" aria-label="Toggle table of contents visibility"></button>

<script>

(function () {
    window.addEventListener('DOMContentLoaded', init)

        
        function init() {
            window.removeEventListener('DOMContentLoaded', init)
                hideNav()
        }

    function hideNav(toc){
        if (!toc) toc = document.querySelector('#docsToc')
        if (!toc) return
            var container = toc.querySelector('.container')

                
                if (container) {
                    if (container.childElementCount === 0 || toc.querySelectorAll('a.item').length === 1) {
                        toc.style.display = 'none'
                            document.getElementById('docsContent').style.width = '100%'
                    }
                } else {
                    requestAnimationFrame(function () {
                        hideNav(toc)
                    })
                }
    }
})();
</script>



    <script language="application/javascript">
      
      (function addHeadingLinks(){
        var article = document.getElementById('docsContent');
        var headings = article.querySelectorAll('h1, h2, h3, h4, h5, h6');
        headings.forEach(function(heading){
          if(heading.id){
            var a = document.createElement('a');
            a.innerHTML = heading.innerHTML;
            a.href = '#'+heading.id;
            a.classList.add('inpage_heading');
            heading.innerHTML = '';
            heading.appendChild(a);
          }
        });
      })();
    </script>
	</body>
</html>
