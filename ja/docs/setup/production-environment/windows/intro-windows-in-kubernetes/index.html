<!DOCTYPE html>
<html id="docs" lang="ja" class="">
	<head>
	

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-36037335-10"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-36037335-10');
</script>
<meta charset="utf-8">
<title>Intro to Windows support in Kubernetes - Kubernetes</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="theme-color" content="#326ce5">
<link rel="shortcut icon" type="image/png" href="/images/favicon.png">









<link rel="stylesheet" href="/css/style.b7b8403eb5b1fddd0a2da2a8383d5b53e6ef81c23e4b0e292e6103bd91f9502d.css" integrity="sha256-t7hAPrWx/d0KLaKoOD1bU&#43;bvgcI&#43;Sw4pLmEDvZH5UC0=">


<link rel="stylesheet" href="/css/base_fonts.css">
<link rel="stylesheet" href="/css/jquery-ui.min.css">
<link rel="stylesheet" href="/css/callouts.css">
<link rel="stylesheet" href="/css/custom-jekyll/tags.css">



<meta name="description" content="">
<meta property="og:description" content="">
<meta name="twitter:description" content="">
<meta property="og:url" content="https://kubernetes.io/ja/docs/setup/production-environment/windows/intro-windows-in-kubernetes/">
<meta property="og:title" content="Intro to Windows support in Kubernetes">
<meta name="twitter:title" content="Intro to Windows support in Kubernetes">
<meta name="twitter:image" content="https://kubernetes.io/images/favicon.png" />

<meta name="twitter:image:alt" content="Kubernetes">

<meta property="og:image" content="/images/kubernetes-horizontal-color.png">

<meta property="og:type" content="article">
<script src="/js/anchor-4.1.1.min.js"></script>
<script src="/js/jquery-3.2.1.min.js"></script>
<script src="/js/jquery-ui-1.12.1.min.js"></script>
<script src="/js/bootstrap-4.3.1.min.js"></script>
<script src="/js/sweetalert-2.1.2.min.js"></script>

<script src="/js/script.js"></script>
<script src="/js/custom-jekyll/tags.js"></script>


	</head>
	<body>
		<div id="cellophane" onclick="kub.toggleMenu()"></div>

<header>
    <a href="/ja/" class="logo" title="プロダクショングレードのコンテナ管理基盤 - Kubernetes" aria-label="Kubernetes website"></a>

    <div class="nav-buttons" data-auto-burger="primary">
        <ul class="global-nav">
            
            
            <li><a href="/ja/docs/" class="active">ドキュメント</a></li>
            
            
            
            
            
            
            
            
            
            <li><a href="/ja/case-studies/">ケーススタディ</a></li>
            
            
            
             <li>
                <a href="#">
                    日本語 Japanese <span class="ui-icon ui-icon-carat-1-s"></span>
                </a>
                <ul>
                
                    <li><a href="/docs/setup/production-environment/windows/intro-windows-in-kubernetes/">English</a></li>
                
                </ul>
            </li>

            <li>
                <a href="#">
                    v1.17 <span class="ui-icon ui-icon-carat-1-s"></span>
                </a>
                <ul>
                
                    <li><a href="https://kubernetes.io/ja/docs/setup/production-environment/windows/intro-windows-in-kubernetes/">v1.21</a></li>
                
                    <li><a href="https://v1-20.docs.kubernetes.io/ja/docs/setup/production-environment/windows/intro-windows-in-kubernetes/">v1.20</a></li>
                
                    <li><a href="https://v1-19.docs.kubernetes.io/ja/docs/setup/production-environment/windows/intro-windows-in-kubernetes/">v1.19</a></li>
                
                    <li><a href="https://v1-18.docs.kubernetes.io/ja/docs/setup/production-environment/windows/intro-windows-in-kubernetes/">v1.18</a></li>
                
                    <li><a href="https://v1-17.docs.kubernetes.io/ja/docs/setup/production-environment/windows/intro-windows-in-kubernetes/">v1.17</a></li>
                
                </ul>
            </li>
        </ul>
        
        <a href="/ja/docs/tutorials/kubernetes-basics/" class="button" id="tryKubernetes" data-auto-burger-exclude>Kubernetesの基本を学ぶ</a>
        

        <button id="hamburger" onclick="kub.toggleMenu()" data-auto-burger-exclude><div></div></button>
    </div>

    <nav id="mainNav">
        <div class="main-section" data-auto-burger="primary">
         
           <div class="nav-box">
            <h3><a href="/ja/docs/tutorials/hello-minikube/">Get Started</a></h3>
           <p>手を動かす準備はできていますか？本チュートリアルでは、Node.jsを使った簡単な"Hello World"を実行するKubernetesクラスタをビルドします。</p>

            </div>
         
           <div class="nav-box">
            <h3><a href="/ja/docs/home/">ドキュメント</a></h3>
           <p>チュートリアル、サンプルやドキュメントのリファレンスを使って Kubernetes の利用方法を学んでください。あなたは<a href="/editdocs/" data-auto-burger-exclude>ドキュメントへコントリビュートをする</a>こともできます!</p>

            </div>
         
        </div>
        <div class="main-section" data-auto-burger="primary">
            <div class="left">
                <h5 class="github-invite">Kubernetesのコードを編集することに興味がありますか？</h5>
                <a href="https://github.com/kubernetes/kubernetes" class="button" data-auto-burger-exclude>GitHubで参照する</a>
            </div>

            <div class="right">
                <h5 class="github-invite">コミュニティを探す</h5>
                <div class="social">
                    <a href="https://twitter.com/kubernetesio" class="twitter"><span>Twitter</span></a>
                    <a href="https://github.com/kubernetes/kubernetes" class="github"><span>GitHub</span></a>
                    <a href="http://slack.k8s.io/" class="slack"><span>Slack Slack</span></a>
                    <a href="https://stackoverflow.com/questions/tagged/kubernetes" class="stack-overflow"><span>Stack Overflow</span></a>
                    <a href="https://www.youtube.com/kubernetescommunity" class="youtube"><span>YouTube</span></a>
                    <a href="https://discuss.kubernetes.io" class="mailing-list"><span>フォーラム</span></a>
                    <a href="https://calendar.google.com/calendar/embed?src=nt2tcnbtbied3l6gi2h29slvc0%40group.calendar.google.com" class="calendar"><span>イベントカレンダー</span></a>
                </div>
            </div>
            <div class="clear" style="clear: both"></div>
        </div>
    </nav>
</header>

		
		
		<section id="hero" class="light-text no-sub">
			







<h1>はじめに</h1>
<h5></h5>












<div id="vendorStrip" class="light-text">
	<ul>
		
		
		<li><a href="/ja/docs/home/">ホーム</a></li>
		
		
		<li><a href="/ja/docs/setup/" class="YAH">はじめに</a></li>
		
		
		<li><a href="/ja/docs/concepts/">コンセプト</a></li>
		
		
		<li><a href="/ja/docs/tasks/">タスク</a></li>
		
		
		<li><a href="/ja/docs/tutorials/">チュートリアル</a></li>
		
		
		<li><a href="/ja/docs/reference/">リファレンス</a></li>
		
		
		<li><a href="/ja/docs/contribute/">貢献</a></li>
		
	</ul>
	<form id="searchBox" action="/docs/search/" role="search">
		<input type="text" id="search" name="q" placeholder="検索" aria-label="Search">
	</form>
</div>

		</section>
		
    
		
<section id="deprecationWarning">
  <main>
    <div class="content deprecation-warning">
      <h3>
	 Kubernetes v1.17
	  のドキュメントは積極的にメンテナンスされていません。現在表示されているバージョンはスナップショットです。最新のドキュメントはこちらです: 
	 <a href="https://kubernetes.io/docs/home/">最新バージョン</a>
      </h3>
    </div>
  </main>
</section>


    <main>
        <section id="encyclopedia">
          
<div id="docsToc">
     <div class="pi-accordion">
    	
        
        
        
        
        
         
             
                 
             
         
             
                 
                          
                          
                 
             
         
             
         
             
         
             
         
             
         
             
         
         
        
        <a class="item" data-title="はじめに" href="/ja/docs/setup/"></a>

	
	
			
			
			
			
			
		
	
	
	
		
			
<div class="item" data-title="リリースノート及びバージョンスキュー">
	<div class="container">
		
		
	
	
			
			
			
			
			
		
	
	
	
		
			

<a class="item" target="_blank" data-title="v1.17 Release Notes <small>(EN)</small>" href="/docs/setup/release/notes/"></a>

		
	
		
			

<a class="item" data-title="Kubernetesバージョンとバージョンスキューサポートポリシー" href="/ja/docs/setup/release/version-skew-policy/"></a>

		
	
		
			

<a class="item" data-title="リリースのビルド" href="/ja/docs/setup/release/building-from-source/"></a>

		
	

	</div>
</div>

		
	
		
			
<div class="item" data-title="環境について学ぶ">
	<div class="container">
		
		
	
	
			
			
			
			
			
		
	
	
	
		
			

<a class="item" target="_blank" data-title="Installing Kubernetes with Kind <small>(EN)</small>" href="/docs/setup/learning-environment/kind/"></a>

		
	
		
			

<a class="item" data-title="Minikubeを使用してローカル環境でKubernetesを動かす" href="/ja/docs/setup/learning-environment/minikube/"></a>

		
	

	</div>
</div>

		
	
		
			
<div class="item" data-title="プロダクション環境">
	<div class="container">
		
		
	
	
			
			
			
			
			
		
	
	
	
		
			

<a class="item" data-title="CRIのインストール" href="/ja/docs/setup/production-environment/container-runtimes/"></a>

		
	
		
			
<div class="item" data-title="Kubernetesをデプロイツールでインストールする">
	<div class="container">
		
		
	
	
			
			
			
			
			
		
	
	
	
		
			
<div class="item" data-title="kubeadmを使ってクラスターを構築する">
	<div class="container">
		
		
	
	
			
			
			
			
			
		
	
	
	
		
			

<a class="item" data-title="kubeadmのインストール" href="/ja/docs/setup/production-environment/tools/kubeadm/install-kubeadm/"></a>

		
	
		
			

<a class="item" data-title="kubeadmを使用したシングルコントロールプレーンクラスターの作成" href="/ja/docs/setup/production-environment/tools/kubeadm/create-cluster-kubeadm/"></a>

		
	
		
			

<a class="item" data-title="kubeadmを使ったコントロールプレーンの設定のカスタマイズ" href="/ja/docs/setup/production-environment/tools/kubeadm/control-plane-flags/"></a>

		
	
		
			

<a class="item" data-title="Options for Highly Available topology" href="/ja/docs/setup/production-environment/tools/kubeadm/ha-topology/"></a>

		
	
		
			

<a class="item" data-title="kubeadmを使用した高可用性クラスターの作成" href="/ja/docs/setup/production-environment/tools/kubeadm/high-availability/"></a>

		
	
		
			

<a class="item" data-title="kubeadmを使用した高可用性etcdクラスターの作成" href="/ja/docs/setup/production-environment/tools/kubeadm/setup-ha-etcd-with-kubeadm/"></a>

		
	
		
			

<a class="item" data-title="kubeadmを使用したクラスター内の各kubeletの設定" href="/ja/docs/setup/production-environment/tools/kubeadm/kubelet-integration/"></a>

		
	
		
			

<a class="item" data-title="kubeadmのトラブルシューティング" href="/ja/docs/setup/production-environment/tools/kubeadm/troubleshooting-kubeadm/"></a>

		
	
		
			

<a class="item" data-title="Configuring your kubernetes cluster to self-host the control plane" href="/ja/docs/setup/production-environment/tools/kubeadm/self-hosting/"></a>

		
	

	</div>
</div>

		
	
		
			

<a class="item" data-title="kopsを使ったAWS上でのKubernetesのインストール" href="/ja/docs/setup/production-environment/tools/kops/"></a>

		
	
		
			

<a class="item" data-title="KRIBを使用してDigital Rebar Provision (DRP)と共にKubernetesをインストールする" href="/ja/docs/setup/production-environment/tools/krib/"></a>

		
	
		
			

<a class="item" data-title="kubesprayを使ったオンプレミス/クラウドプロバイダへのKubernetesのインストール" href="/ja/docs/setup/production-environment/tools/kubespray/"></a>

		
	

	</div>
</div>

		
	
		
			
<div class="item" data-title="ターンキークラウドソリューション">
	<div class="container">
		
		
	
	
			
			
			
			
			
		
	
	
	
		
			

<a class="item" data-title="Alibaba CloudでKubernetesを動かす" href="/ja/docs/setup/production-environment/turnkey/alibaba-cloud/"></a>

		
	
		
			

<a class="item" data-title="AWS EC2上でKubernetesを動かす" href="/ja/docs/setup/production-environment/turnkey/aws/"></a>

		
	
		
			

<a class="item" data-title="Azure 上で Kubernetes を動かす" href="/ja/docs/setup/production-environment/turnkey/azure/"></a>

		
	
		
			

<a class="item" data-title="CenturyLink Cloud上でKubernetesを動かす" href="/ja/docs/setup/production-environment/turnkey/clc/"></a>

		
	
		
			

<a class="item" data-title="Google Compute Engine上でKubernetesを動かす" href="/ja/docs/setup/production-environment/turnkey/gce/"></a>

		
	
		
			

<a class="item" data-title="IBM Cloud Privateを使ってマルチクラウドでKubernetesを動かす" href="/ja/docs/setup/production-environment/turnkey/icp/"></a>

		
	
		
			

<a class="item" target="_blank" data-title="Running Kubernetes on Tencent Kubernetes Engine <small>(EN)</small>" href="/docs/setup/production-environment/turnkey/tencent/"></a>

		
	
		
			

<a class="item" data-title="Stackpoint.ioを利用して複数のクラウド上でKubernetesを動かす" href="/ja/docs/setup/production-environment/turnkey/stackpoint/"></a>

		
	

	</div>
</div>

		
	
		
			
<div class="item" data-title="Windows in Kubernetes">
	<div class="container">
		
		
	
	
			
			
			
			
			
		
	
	
	
		
			

<a class="item" data-title="Intro to Windows support in Kubernetes" href="/ja/docs/setup/production-environment/windows/intro-windows-in-kubernetes/"></a>

		
	
		
			

<a class="item" data-title="Guide for adding Windows Nodes in Kubernetes" href="/ja/docs/setup/production-environment/windows/user-guide-windows-nodes/"></a>

		
	
		
			

<a class="item" data-title="Guide for scheduling Windows containers in Kubernetes" href="/ja/docs/setup/production-environment/windows/user-guide-windows-containers/"></a>

		
	

	</div>
</div>

		
	
		
			
<div class="item" data-title="オンプレミスVM">
	<div class="container">
		
		
	
	
			
			
			
			
			
		
	
	
	
		
			

<a class="item" data-title="Cloudstack" href="/ja/docs/setup/production-environment/on-premises-vm/cloudstack/"></a>

		
	
		
			

<a class="item" data-title="DC/OS上のKubernetes" href="/ja/docs/setup/production-environment/on-premises-vm/dcos/"></a>

		
	
		
			

<a class="item" data-title="oVirt" href="/ja/docs/setup/production-environment/on-premises-vm/ovirt/"></a>

		
	

	</div>
</div>

		
	

	</div>
</div>

		
	
		
			
<div class="item" data-title="ベストプラクティス">
	<div class="container">
		
		
	
	
			
			
			
			
			
		
	
	
	
		
			

<a class="item" data-title="複数のゾーンで動かす" href="/ja/docs/setup/best-practices/multiple-zones/"></a>

		
	
		
			

<a class="item" data-title="大規模クラスタの構築" href="/ja/docs/setup/best-practices/cluster-large/"></a>

		
	
		
			

<a class="item" data-title="ノードのセットアップの検証" href="/ja/docs/setup/best-practices/node-conformance/"></a>

		
	
		
			

<a class="item" data-title="PKI証明書とその要件" href="/ja/docs/setup/best-practices/certificates/"></a>

		
	

	</div>
</div>

		
	





     </div> 
    <button class="push-menu-close-button" onclick="kub.toggleToc()"></button>
</div> 


          <div id="docsContent">
            

<p>
  <a href="https://github.com/kubernetes/website/edit/master/content/ja/docs/setup/production-environment/windows/intro-windows-in-kubernetes.md" id="editPageButton" target="_blank">
    Edit This Page
  </a>
</p>

<h1>Intro to Windows support in Kubernetes</h1>



<p>Windows applications constitute a large portion of the services and applications that run in many organizations. <a href="https://aka.ms/windowscontainers" target="_blank">Windows containers</a> provide a modern way to encapsulate processes and package dependencies, making it easier to use DevOps practices and follow cloud native patterns for Windows applications. Kubernetes has become the defacto standard container orchestrator, and the release of Kubernetes 1.14 includes production support for scheduling Windows containers on Windows nodes in a Kubernetes cluster, enabling a vast ecosystem of Windows applications to leverage the power of Kubernetes. Organizations with investments in Windows-based applications and Linux-based applications don&rsquo;t have to look for separate orchestrators to manage their workloads, leading to increased operational efficiencies across their deployments, regardless of operating system.</p>









<ul id="markdown-toc">










<li><a href="#windows-containers-in-kubernetes">Windows containers in Kubernetes</a></li>




<li><a href="#supported-functionality-and-limitations">Supported Functionality and Limitations</a></li>




<li><a href="#troubleshooting">Getting Help and Troubleshooting</a></li>




<li><a href="#reporting-issues-and-feature-requests">Reporting Issues and Feature Requests</a></li>




















<li><a href="#%e6%ac%a1%e3%81%ae%e9%a0%85%e7%9b%ae">次の項目</a></li>



</ul>


<h2 id="windows-containers-in-kubernetes">Windows containers in Kubernetes</h2>

<p>To enable the orchestration of Windows containers in Kubernetes, simply include Windows nodes in your existing Linux cluster. Scheduling Windows containers in <a href="/ja/docs/concepts/workloads/pods/pod-overview/">Pods</a> on Kubernetes is as simple and easy as scheduling Linux-based containers.</p>

<p>In order to run Windows containers, your Kubernetes cluster must include multiple operating systems, with control plane nodes running Linux and workers running either Windows or Linux depending on your workload needs. Windows Server 2019 is the only Windows operating system supported, enabling <a href="https://github.com/kubernetes/community/blob/master/contributors/design-proposals/architecture/architecture.md#the-kubernetes-node" target="_blank">Kubernetes Node</a> on Windows (including kubelet, <a href="https://docs.microsoft.com/en-us/virtualization/windowscontainers/deploy-containers/containerd" target="_blank">container runtime</a>, and kube-proxy). For a detailed explanation of Windows distribution channels see the <a href="https://docs.microsoft.com/en-us/windows-server/get-started-19/servicing-channels-19" target="_blank">Microsoft documentation</a>.</p>

<blockquote class="note">
  <div><strong>備考:</strong> The Kubernetes control plane, including the <a href="/ja/docs/concepts/overview/components/">master components</a>, continues to run on Linux. There are no plans to have a Windows-only Kubernetes cluster.</div>
</blockquote>

<blockquote class="note">
  <div><strong>備考:</strong> In this document, when we talk about Windows containers we mean Windows containers with process isolation. Windows containers with <a href="https://docs.microsoft.com/en-us/virtualization/windowscontainers/manage-containers/hyperv-container" target="_blank">Hyper-V isolation</a> is planned for a future release.</div>
</blockquote>

<h2 id="supported-functionality-and-limitations">Supported Functionality and Limitations</h2>

<h3 id="supported-functionality">Supported Functionality</h3>

<h4 id="compute">Compute</h4>

<p>From an API and kubectl perspective, Windows containers behave in much the same way as Linux-based containers. However, there are some notable differences in key functionality which are outlined in the limitation section.</p>

<p>Let&rsquo;s start with the operating system version. Refer to the following table for Windows operating system support in Kubernetes. A single heterogeneous Kubernetes cluster can have both Windows and Linux worker nodes. Windows containers have to be scheduled on Windows nodes and Linux containers on Linux nodes.</p>

<table>
<thead>
<tr>
<th>Kubernetes version</th>
<th>Host OS version (Kubernetes Node)</th>
<th></th>
<th></th>
</tr>
</thead>

<tbody>
<tr>
<td></td>
<td><em>Windows Server 1709</em></td>
<td><em>Windows Server 1803</em></td>
<td><em>Windows Server 1809/Windows Server 2019</em></td>
</tr>

<tr>
<td><em>Kubernetes v1.14</em></td>
<td>Not Supported</td>
<td>Not Supported</td>
<td>Supported for Windows Server containers Builds 17763.* with Docker EE-basic 18.09</td>
</tr>
</tbody>
</table>

<blockquote class="note">
  <div><strong>備考:</strong> We don&rsquo;t expect all Windows customers to update the operating system for their apps frequently. Upgrading your applications is what dictates and necessitates upgrading or introducing new nodes to the cluster. For the customers that chose to upgrade their operating system for containers running on Kubernetes, we will offer guidance and step-by-step instructions when we add support for a new operating system version. This guidance will include recommended upgrade procedures for upgrading user applications together with cluster nodes. Windows nodes adhere to Kubernetes <a href="/ja/docs/setup/release/version-skew-policy/">version-skew policy</a> (node to control plane versioning) the same way as Linux nodes do today.</div>
</blockquote>
<blockquote class="note">
  <div><strong>備考:</strong> The Windows Server Host Operating System is subject to the <a href="https://www.microsoft.com/en-us/cloud-platform/windows-server-pricing" target="_blank">Windows Server </a> licensing. The Windows Container images are subject to the <a href="https://docs.microsoft.com/en-us/virtualization/windowscontainers/images-eula" target="_blank">Supplemental License Terms for Windows containers</a>.</div>
</blockquote>
<blockquote class="note">
  <div><strong>備考:</strong> Windows containers with process isolation have strict compatibility rules, <a href="https://docs.microsoft.com/en-us/virtualization/windowscontainers/deploy-containers/version-compatibility" target="_blank">where the host OS version must match the container base image OS version</a>. Once we support Windows containers with Hyper-V isolation in Kubernetes, the limitation and compatibility rules will change.</div>
</blockquote>

<p>Key Kubernetes elements work the same way in Windows as they do in Linux. In this section, we talk about some of the key workload enablers and how they map to Windows.</p>

<ul>
<li><p><a href="/ja/docs/concepts/workloads/pods/pod-overview/">Pods</a></p>

<p>A Pod is the basic building block of Kubernetes–the smallest and simplest unit in the Kubernetes object model that you create or deploy. The following Pod capabilities, properties and events are supported with Windows containers:</p>

<ul>
<li>Single or multiple containers per Pod with process isolation and volume sharing</li>
<li>Pod status fields</li>
<li>Readiness and Liveness probes</li>
<li>postStart &amp; preStop container lifecycle events</li>
<li>ConfigMap, Secrets: as environment variables or volumes</li>
<li>EmptyDir</li>
<li>Named pipe host mounts</li>
<li>Resource limits</li>
</ul></li>

<li><p><a href="/ja/docs/concepts/workloads/controllers/">Controllers</a></p>

<p>Kubernetes controllers handle the desired state of Pods. The following workload controllers are supported with Windows containers:</p>

<ul>
<li>ReplicaSet</li>
<li>ReplicationController</li>
<li>Deployments</li>
<li>StatefulSets</li>
<li>DaemonSet</li>
<li>Job</li>
<li>CronJob</li>
</ul></li>

<li><p><a href="/ja/docs/concepts/services-networking/service/">Services</a></p>

<p>A Kubernetes Service is an abstraction which defines a logical set of Pods and a policy by which to access them - sometimes called a micro-service. You can use services for cross-operating system connectivity. In Windows, services can utilize the following types, properties and capabilities:</p>

<ul>
<li>Service Environment variables</li>
<li>NodePort</li>
<li>ClusterIP</li>
<li>LoadBalancer</li>
<li>ExternalName</li>
<li>Headless services</li>
</ul></li>
</ul>

<p>Pods, Controllers and Services are critical elements to managing Windows workloads on Kubernetes. However, on their own they are not enough to enable the proper lifecycle management of Windows workloads in a dynamic cloud native environment. We added support for the following features:</p>

<ul>
<li>Pod and container metrics</li>
<li>Horizontal Pod Autoscaler support</li>
<li>kubectl Exec</li>
<li>Resource Quotas</li>
<li>Scheduler preemption</li>
</ul>

<h4 id="container-runtime">Container Runtime</h4>

<p>Docker EE-basic 18.09 is required on Windows Server 2019 / 1809 nodes for Kubernetes. This works with the dockershim code included in the kubelet. Additional runtimes such as CRI-ContainerD may be supported in later Kubernetes versions.</p>

<h4 id="storage">Storage</h4>

<p>Kubernetes Volumes enable complex applications with data persistence and Pod volume sharing requirements to be deployed on Kubernetes. Kubernetes on Windows supports the following types of <a href="/ja/docs/concepts/storage/volumes/">volumes</a>:</p>

<ul>
<li>FlexVolume out-of-tree plugin with <a href="https://github.com/Microsoft/K8s-Storage-Plugins/tree/master/flexvolume/windows" target="_blank">SMB and iSCSI</a> support</li>
<li><a href="/ja/docs/concepts/storage/volumes/#azuredisk">azureDisk</a></li>
<li><a href="/ja/docs/concepts/storage/volumes/#azurefile">azureFile</a></li>
<li><a href="/ja/docs/concepts/storage/volumes/#gcepersistentdisk">gcePersistentDisk</a></li>
</ul>

<h4 id="networking">Networking</h4>

<p>Networking for Windows containers is exposed through <a href="/ja/docs/concepts/extend-kubernetes/compute-storage-net/network-plugins/">CNI plugins</a>. Windows containers function similarly to virtual machines in regards to networking. Each container has a virtual network adapter (vNIC) which is connected to a Hyper-V virtual switch (vSwitch). The Host Networking Service (HNS) and the Host Compute Service (HCS) work together to create containers and attach container vNICs to networks. HCS is responsible for the management of containers whereas HNS is responsible for the management of networking resources such as:</p>

<ul>
<li>Virtual networks (including creation of vSwitches)</li>
<li>Endpoints / vNICs</li>
<li>Namespaces</li>
<li>Policies (Packet encapsulations, Load-balancing rules, ACLs, NAT&rsquo;ing rules, etc.)</li>
</ul>

<p>The following service spec types are supported:</p>

<ul>
<li>NodePort</li>
<li>ClusterIP</li>
<li>LoadBalancer</li>
<li>ExternalName</li>
</ul>

<p>Windows supports five different networking drivers/modes: L2bridge, L2tunnel, Overlay, Transparent, and NAT. In a heterogeneous cluster with Windows and Linux worker nodes, you need to select a networking solution that is compatible on both Windows and Linux. The following out-of-tree plugins are supported on Windows, with recommendations on when to use each CNI:</p>

<table>
<thead>
<tr>
<th>Network Driver</th>
<th>Description</th>
<th>Container Packet Modifications</th>
<th>Network Plugins</th>
<th>Network Plugin Characteristics</th>
</tr>
</thead>

<tbody>
<tr>
<td>L2bridge</td>
<td>Containers are attached to an external vSwitch. Containers are attached to the underlay network, although the physical network doesn&rsquo;t need to learn the container MACs because they are rewritten on ingress/egress. Inter-container traffic is bridged inside the container host.</td>
<td>MAC is rewritten to host MAC, IP remains the same.</td>
<td><a href="https://github.com/containernetworking/plugins/tree/master/plugins/main/windows/win-bridge" target="_blank">win-bridge</a>, <a href="https://github.com/Azure/azure-container-networking/blob/master/docs/cni.md" target="_blank">Azure-CNI</a>, Flannel host-gateway uses win-bridge</td>
<td>win-bridge uses L2bridge network mode, connects containers to the underlay of hosts, offering best performance. Requires L2 adjacency between container hosts</td>
</tr>

<tr>
<td>L2Tunnel</td>
<td>This is a special case of l2bridge, but only used on Azure. All packets are sent to the virtualization host where SDN policy is applied.</td>
<td>MAC rewritten, IP visible on the underlay network</td>
<td><a href="https://github.com/Azure/azure-container-networking/blob/master/docs/cni.md" target="_blank">Azure-CNI</a></td>
<td>Azure-CNI allows integration of containers with Azure vNET, and allows them to leverage the set of capabilities that <a href="https://azure.microsoft.com/en-us/services/virtual-network/" target="_blank">Azure Virtual Network provides</a>. For example, securely connect to Azure services or use Azure NSGs. See <a href="https://docs.microsoft.com/en-us/azure/aks/concepts-network#azure-cni-advanced-networking" target="_blank">azure-cni for some examples</a></td>
</tr>

<tr>
<td>Overlay (Overlay networking for Windows in Kubernetes is in <em>alpha</em> stage)</td>
<td>Containers are given a vNIC connected to an external vSwitch. Each overlay network gets its own IP subnet, defined by a custom IP prefix.The overlay network driver uses VXLAN encapsulation.</td>
<td>Encapsulated with an outer header, inner packet remains the same.</td>
<td><a href="https://github.com/containernetworking/plugins/tree/master/plugins/main/windows/win-overlay" target="_blank">Win-overlay</a>, Flannel VXLAN (uses win-overlay)</td>
<td>win-overlay should be used when virtual container networks are desired to be isolated from underlay of hosts (e.g. for security reasons). Allows for IPs to be re-used for different overlay networks (which have different VNID tags)  if you are restricted on IPs in your datacenter. This option may be used when the container hosts are not L2 adjacent but have L3 connectivity</td>
</tr>

<tr>
<td>Transparent (special use case for <a href="https://github.com/openvswitch/ovn-kubernetes" target="_blank">ovn-kubernetes</a>)</td>
<td>Requires an external vSwitch. Containers are attached to an external vSwitch which enables intra-pod communication via logical networks (logical switches and routers).</td>
<td>Packet is encapsulated either via <a href="https://datatracker.ietf.org/doc/draft-gross-geneve/" target="_blank">GENEVE</a> or <a href="https://datatracker.ietf.org/doc/draft-davie-stt/" target="_blank">STT</a> tunneling to reach pods which are not on the same host.  <br/> Packets are forwarded or dropped via the tunnel metadata information supplied by the ovn network controller. <br/> NAT is done for north-south communication.</td>
<td><a href="https://github.com/openvswitch/ovn-kubernetes" target="_blank">ovn-kubernetes</a></td>
<td><a href="https://github.com/openvswitch/ovn-kubernetes/tree/master/contrib" target="_blank">Deploy via ansible</a>. Distributed ACLs can be applied via Kubernetes policies. IPAM support. Load-balancing can be achieved without kube-proxy. NATing is done without using iptables/netsh.</td>
</tr>

<tr>
<td>NAT (<em>not used in Kubernetes</em>)</td>
<td>Containers are given a vNIC connected to an internal vSwitch. DNS/DHCP is provided using an internal component called <a href="https://blogs.technet.microsoft.com/virtualization/2016/05/25/windows-nat-winnat-capabilities-and-limitations/" target="_blank">WinNAT</a></td>
<td>MAC and IP is rewritten to host MAC/IP.</td>
<td><a href="https://github.com/Microsoft/windows-container-networking/tree/master/plugins/nat" target="_blank">nat</a></td>
<td>Included here for completeness</td>
</tr>
</tbody>
</table>

<p>As outlined above, the <a href="https://github.com/coreos/flannel" target="_blank">Flannel</a> CNI <a href="https://github.com/containernetworking/plugins/tree/master/plugins/meta/flannel" target="_blank">meta plugin</a> is also supported on <a href="https://github.com/containernetworking/plugins/tree/master/plugins/meta/flannel#windows-support-experimental" target="_blank">Windows</a> via the <a href="https://github.com/coreos/flannel/blob/master/Documentation/backends.md#vxlan" target="_blank">VXLAN network backend</a> (<strong>alpha support</strong> ; delegates to win-overlay) and <a href="https://github.com/coreos/flannel/blob/master/Documentation/backends.md#host-gw" target="_blank">host-gateway network backend</a> (stable support; delegates to win-bridge). This plugin supports delegating to one of the reference CNI plugins (win-overlay, win-bridge), to work in conjunction with Flannel daemon on Windows (Flanneld) for automatic node subnet lease assignment and HNS network creation. This plugin reads in its own configuration file (net-conf.json), and aggregates it with the environment variables from the FlannelD generated subnet.env file. It then delegates to one of the reference CNI plugins for network plumbing, and sends the correct configuration containing the node-assigned subnet to the IPAM plugin (e.g. host-local).</p>

<p>For the node, pod, and service objects, the following network flows are supported for TCP/UDP traffic:</p>

<ul>
<li>Pod -&gt; Pod (IP)</li>
<li>Pod -&gt; Pod (Name)</li>
<li>Pod -&gt; Service (Cluster IP)</li>
<li>Pod -&gt; Service (PQDN, but only if there are no &ldquo;.&rdquo;)</li>
<li>Pod -&gt; Service (FQDN)</li>
<li>Pod -&gt; External (IP)</li>
<li>Pod -&gt; External (DNS)</li>
<li>Node -&gt; Pod</li>
<li>Pod -&gt; Node</li>
</ul>

<p>The following IPAM options are supported on Windows:</p>

<ul>
<li><a href="https://github.com/containernetworking/plugins/tree/master/plugins/ipam/host-local" target="_blank">Host-local</a></li>
<li>HNS IPAM (Inbox platform IPAM, this is a fallback when no IPAM is set)</li>
<li><a href="https://github.com/Azure/azure-container-networking/blob/master/docs/ipam.md" target="_blank">Azure-vnet-ipam</a> (for azure-cni only)</li>
</ul>

<h3 id="limitations">Limitations</h3>

<h4 id="control-plane">Control Plane</h4>

<p>Windows is only supported as a worker node in the Kubernetes architecture and component matrix. This means that a Kubernetes cluster must always include Linux master nodes, zero or more Linux worker nodes, and zero or more Windows worker nodes.</p>

<h4 id="compute-1">Compute</h4>

<h5 id="resource-management-and-process-isolation">Resource management and process isolation</h5>

<p>Linux cgroups are used as a pod boundary for resource controls in Linux. Containers are created within that boundary for network, process and file system isolation. The cgroups APIs can be used to gather cpu/io/memory stats. In contrast, Windows uses a Job object per container with a system namespace filter to contain all processes in a container and provide logical isolation from the host. There is no way to run a Windows container without the namespace filtering in place. This means that system privileges cannot be asserted in the context of the host, and thus privileged containers are not available on Windows. Containers cannot assume an identity from the host because the Security Account Manager (SAM) is separate.</p>

<h5 id="operating-system-restrictions">Operating System Restrictions</h5>

<p>Windows has strict compatibility rules, where the host OS version must match the container base image OS version. Only Windows containers with a container operating system of Windows Server 2019 are supported. Hyper-V isolation of containers, enabling some backward compatibility of Windows container image versions, is planned for a future release.</p>

<h5 id="feature-restrictions">Feature Restrictions</h5>

<ul>
<li>TerminationGracePeriod: not implemented</li>
<li>Single file mapping: to be implemented with CRI-ContainerD</li>
<li>Termination message: to be implemented with CRI-ContainerD</li>
<li>Privileged Containers: not currently supported in Windows containers</li>
<li>HugePages: not currently supported in Windows containers</li>
<li>The existing node problem detector is Linux-only and requires privileged containers. In general, we don&rsquo;t expect this to be used on Windows because privileged containers are not supported</li>
<li>Not all features of shared namespaces are supported (see API section for more details)</li>
</ul>

<h5 id="memory-reservations-and-handling">Memory Reservations and Handling</h5>

<p>Windows does not have an out-of-memory process killer as Linux does. Windows always treats all user-mode memory allocations as virtual, and pagefiles are mandatory. The net effect is that Windows won&rsquo;t reach out of memory conditions the same way Linux does, and processes page to disk instead of being subject to out of memory (OOM) termination. If memory is over-provisioned and all physical memory is exhausted, then paging can slow down performance.</p>

<p>Keeping memory usage within reasonable bounds is possible with a two-step process. First, use the kubelet parameters <code>--kubelet-reserve</code> and/or <code>--system-reserve</code> to account for memory usage on the node (outside of containers). This reduces <a href="/ja/docs/tasks/administer-cluster/reserve-compute-resources/#node-allocatable">NodeAllocatable</a>). As you deploy workloads, use resource limits (must set only limits or limits must equal requests) on containers. This also subtracts from NodeAllocatable and prevents the scheduler from adding more pods once a node is full.</p>

<p>A best practice to avoid over-provisioning is to configure the kubelet with a system reserved memory of at least 2GB to account for Windows, Docker, and Kubernetes processes.</p>

<p>The behavior of the flags behave differently as described below:</p>

<ul>
<li><code>--kubelet-reserve</code>, <code>--system-reserve</code> , and <code>--eviction-hard</code> flags update Node Allocatable</li>
<li>Eviction by using <code>--enforce-node-allocable</code> is not implemented</li>
<li>Eviction by using <code>--eviction-hard</code> and <code>--eviction-soft</code> are not implemented</li>
<li>MemoryPressure Condition is not implemented</li>
<li>There are no OOM eviction actions taken by the kubelet</li>
<li>Kubelet running on the windows node does not have memory restrictions. <code>--kubelet-reserve</code> and <code>--system-reserve</code> do not set limits on kubelet or processes running on the host. This means kubelet or a process on the host could cause memory resource starvation outside the node-allocatable and scheduler</li>
</ul>

<h4 id="storage-1">Storage</h4>

<p>Windows has a layered filesystem driver to mount container layers and create a copy filesystem based on NTFS. All file paths in the container are resolved only within the context of that container.</p>

<ul>
<li>Volume mounts can only target a directory in the container, and not an individual file</li>
<li>Volume mounts cannot project files or directories back to the host filesystem</li>
<li>Read-only filesystems are not supported because write access is always required for the Windows registry and SAM database. However, read-only volumes are supported</li>
<li>Volume user-masks and permissions are not available. Because the SAM is not shared between the host &amp; container, there&rsquo;s no mapping between them. All permissions are resolved within the context of the container</li>
</ul>

<p>As a result, the following storage functionality is not supported on Windows nodes</p>

<ul>
<li>Volume subpath mounts. Only the entire volume can be mounted in a Windows container.</li>
<li>Subpath volume mounting for Secrets</li>
<li>Host mount projection</li>
<li>DefaultMode (due to UID/GID dependency)</li>
<li>Read-only root filesystem. Mapped volumes still support readOnly</li>
<li>Block device mapping</li>
<li>Memory as the storage medium</li>
<li>CSI plugins which require privileged containers</li>
<li>File system features like uui/guid, per-user Linux filesystem permissions</li>
<li>NFS based storage/volume support</li>
<li>Expanding the mounted volume (resizefs)</li>
</ul>

<h4 id="networking-1">Networking</h4>

<p>Windows Container Networking differs in some important ways from Linux networking. The <a href="https://docs.microsoft.com/en-us/virtualization/windowscontainers/container-networking/architecture" target="_blank">Microsoft documentation for Windows Container Networking</a> contains additional details and background.</p>

<p>The Windows host networking networking service and virtual switch implement namespacing and can create virtual NICs as needed for a pod or container. However, many configurations such as DNS, routes, and metrics are stored in the Windows registry database rather than /etc/&hellip; files as they are on Linux. The Windows registry for the container is separate from that of the host, so concepts like mapping /etc/resolv.conf from the host into a container don&rsquo;t have the same effect they would on Linux. These must be configured using Windows APIs run in the context of that container. Therefore CNI implementations need to call the HNS instead of relying on file mappings to pass network details into the pod or container.</p>

<p>The following networking functionality is not supported on Windows nodes</p>

<ul>
<li>Host networking mode is not available for Windows pods</li>
<li>Local NodePort access from the node itself fails (works for other nodes or external clients)</li>
<li>Accessing service VIPs from nodes will be available with a future release of Windows Server</li>
<li>Overlay networking support in kube-proxy is an alpha release. In addition, it requires <a href="https://support.microsoft.com/en-us/help/4482887/windows-10-update-kb4482887" target="_blank">KB4482887</a> to be installed on Windows Server 2019</li>
<li>Local Traffic Policy and DSR mode</li>
<li>Windows containers connected to l2bridge, l2tunnel, or overlay networks do not support communicating over the IPv6 stack. There is outstanding Windows platform work required to enable these network drivers to consume IPv6 addresses and subsequent Kubernetes work in kubelet, kube-proxy, and CNI plugins.</li>
<li>Outbound communication using the ICMP protocol via the win-overlay, win-bridge, and Azure-CNI plugin. Specifically, the Windows data plane (<a href="https://www.microsoft.com/en-us/research/project/azure-virtual-filtering-platform/" target="_blank">VFP</a>) doesn&rsquo;t support ICMP packet transpositions. This means:

<ul>
<li>ICMP packets directed to destinations within the same network (e.g. pod to pod communication via ping) work as expected and without any limitations</li>
<li>TCP/UDP packets work as expected and without any limitations</li>
<li>ICMP packets directed to pass through a remote network (e.g. pod to external internet communication via ping) cannot be transposed and thus will not be routed back to their source</li>
<li>Since TCP/UDP packets can still be transposed, one can substitute <code>ping &lt;destination&gt;</code> with <code>curl &lt;destination&gt;</code> to be able to debug connectivity to the outside world.</li>
</ul></li>
</ul>

<p>These features were added in Kubernetes v1.15:</p>

<ul>
<li><code>kubectl port-forward</code></li>
</ul>

<h5 id="cni-plugins">CNI Plugins</h5>

<ul>
<li>Windows reference network plugins win-bridge and win-overlay do not currently implement <a href="https://github.com/containernetworking/cni/blob/master/SPEC.md" target="_blank">CNI spec</a> v0.4.0 due to missing &ldquo;CHECK&rdquo; implementation.</li>
<li>The Flannel VXLAN CNI has the following limitations on Windows:</li>
</ul>

<ol>
<li>Node-pod connectivity isn&rsquo;t possible by design. It&rsquo;s only possible for local pods with Flannel <a href="https://github.com/coreos/flannel/pull/1096" target="_blank">PR 1096</a></li>
<li>We are restricted to using VNI 4096 and UDP port 4789. The VNI limitation is being worked on and will be overcome in a future release (open-source flannel changes). See the official <a href="https://github.com/coreos/flannel/blob/master/Documentation/backends.md#vxlan" target="_blank">Flannel VXLAN</a> backend docs for more details on these parameters.</li>
</ol>

<h5 id="dns-limitations">DNS</h5>

<ul>
<li>ClusterFirstWithHostNet is not supported for DNS. Windows treats all names with a &lsquo;.&rsquo; as a FQDN and skips PQDN resolution</li>
<li>On Linux, you have a DNS suffix list, which is used when trying to resolve PQDNs. On Windows, we only have 1 DNS suffix, which is the DNS suffix associated with that pod&rsquo;s namespace (mydns.svc.cluster.local for example). Windows can resolve FQDNs and services or names resolvable with just that suffix. For example, a pod spawned in the default namespace, will have the DNS suffix <strong>default.svc.cluster.local</strong>. On a Windows pod, you can resolve both <strong>kubernetes.default.svc.cluster.local</strong> and <strong>kubernetes</strong>, but not the in-betweens, like <strong>kubernetes.default</strong> or <strong>kubernetes.default.svc</strong>.</li>
</ul>

<h5 id="security">Security</h5>

<p>Secrets are written in clear text on the node&rsquo;s volume (as compared to tmpfs/in-memory on linux). This means customers have to do two things</p>

<ol>
<li>Use file ACLs to secure the secrets file location</li>
<li>Use volume-level encryption using <a href="https://docs.microsoft.com/en-us/windows/security/information-protection/bitlocker/bitlocker-how-to-deploy-on-windows-server" target="_blank">BitLocker</a></li>
</ol>

<p><a href="/ja/docs/concepts/policy/pod-security-policy/#users-and-groups">RunAsUser </a>is not currently supported on Windows. The workaround is to create local accounts before packaging the container. The RunAsUsername capability may be added in a future release.</p>

<p>Linux specific pod security context privileges such as SELinux, AppArmor, Seccomp, Capabilities (POSIX Capabilities), and others are not supported.</p>

<p>In addition, as mentioned already, privileged containers are not supported on Windows.</p>

<h4 id="api">API</h4>

<p>There are no differences in how most of the Kubernetes APIs work for Windows. The subtleties around what&rsquo;s different come down to differences in the OS and container runtime. In certain situations, some properties on workload APIs such as Pod or Container were designed with an assumption that they are implemented on Linux, failing to run on Windows.</p>

<p>At a high level, these OS concepts are different:</p>

<ul>
<li>Identity - Linux uses userID (UID) and groupID (GID) which are represented as integer types. User and group names are not canonical - they are just an alias in <code>/etc/groups</code> or <code>/etc/passwd</code> back to UID+GID. Windows uses a larger binary security identifier (SID) which is stored in the Windows Security Access Manager (SAM) database. This database is not shared between the host and containers, or between containers.</li>
<li>File permissions - Windows uses an access control list based on SIDs, rather than a bitmask of permissions and UID+GID</li>
<li>File paths - convention on Windows is to use <code>\</code> instead of <code>/</code>. The Go IO libraries typically accept both and just make it work, but when you&rsquo;re setting a path or command line that&rsquo;s interpreted inside a container, <code>\</code> may be needed.</li>
<li>Signals - Windows interactive apps handle termination differently, and can implement one or more of these:

<ul>
<li>A UI thread handles well-defined messages including WM_CLOSE</li>
<li>Console apps handle ctrl-c or ctrl-break using a Control Handler</li>
<li>Services register a Service Control Handler function that can accept SERVICE_CONTROL_STOP control codes</li>
</ul></li>
</ul>

<p>Exit Codes follow the same convention where 0 is success, nonzero is failure. The specific error codes may differ across Windows and Linux. However, exit codes passed from the Kubernetes components (kubelet, kube-proxy) are unchanged.</p>

<h5 id="v1-container">V1.Container</h5>

<ul>
<li>V1.Container.ResourceRequirements.limits.cpu and V1.Container.ResourceRequirements.limits.memory - Windows doesn&rsquo;t use hard limits for CPU allocations. Instead, a share system is used. The existing fields based on millicores are scaled into relative shares that are followed by the Windows scheduler. <a href="https://github.com/kubernetes/kubernetes/blob/master/pkg/kubelet/kuberuntime/helpers_windows.go" target="_blank">see: kuberuntime/helpers_windows.go</a>, <a href="https://docs.microsoft.com/en-us/virtualization/windowscontainers/manage-containers/resource-controls" target="_blank">see: resource controls in Microsoft docs</a>

<ul>
<li>Huge pages are not implemented in the Windows container runtime, and are not available. They require <a href="https://docs.microsoft.com/en-us/windows/desktop/Memory/large-page-support" target="_blank">asserting a user privilege</a> that&rsquo;s not configurable for containers.</li>
</ul></li>
<li>V1.Container.ResourceRequirements.requests.cpu and V1.Container.ResourceRequirements.requests.memory - Requests are subtracted from node available resources, so they can be used to avoid overprovisioning a node. However, they cannot be used to guarantee resources in an overprovisioned node. They should be applied to all containers as a best practice if the operator wants to avoid overprovisioning entirely.</li>
<li>V1.Container.SecurityContext.allowPrivilegeEscalation - not possible on Windows, none of the capabilities are hooked up</li>
<li>V1.Container.SecurityContext.Capabilities - POSIX capabilities are not implemented on Windows</li>
<li>V1.Container.SecurityContext.privileged - Windows doesn&rsquo;t support privileged containers</li>
<li>V1.Container.SecurityContext.procMount - Windows doesn&rsquo;t have a /proc filesystem</li>
<li>V1.Container.SecurityContext.readOnlyRootFilesystem - not possible on Windows, write access is required for registry &amp; system processes to run inside the container</li>
<li>V1.Container.SecurityContext.runAsGroup - not possible on Windows, no GID support</li>
<li>V1.Container.SecurityContext.runAsNonRoot - Windows does not have a root user. The closest equivalent is ContainerAdministrator which is an identity that doesn&rsquo;t exist on the node.</li>
<li>V1.Container.SecurityContext.runAsUser - not possible on Windows, no UID support as int.</li>
<li>V1.Container.SecurityContext.seLinuxOptions - not possible on Windows, no SELinux</li>
<li>V1.Container.terminationMessagePath - this has some limitations in that Windows doesn&rsquo;t support mapping single files. The default value is /dev/termination-log, which does work because it does not exist on Windows by default.</li>
</ul>

<h5 id="v1-pod">V1.Pod</h5>

<ul>
<li>V1.Pod.hostIPC, v1.pod.hostpid - host namespace sharing is not possible on Windows</li>
<li>V1.Pod.hostNetwork - There is no Windows OS support to share the host network</li>
<li>V1.Pod.dnsPolicy - ClusterFirstWithHostNet - is not supported because Host Networking is not supported on Windows.</li>
<li>V1.Pod.podSecurityContext - see V1.PodSecurityContext below</li>
<li>V1.Pod.shareProcessNamespace - this is a beta feature, and depends on Linux namespaces which are not implemented on Windows. Windows cannot share process namespaces or the container&rsquo;s root filesystem. Only the network can be shared.</li>
<li>V1.Pod.terminationGracePeriodSeconds - this is not fully implemented in Docker on Windows, see: <a href="https://github.com/moby/moby/issues/25982" target="_blank">reference</a>. The behavior today is that the ENTRYPOINT process is sent CTRL_SHUTDOWN_EVENT, then Windows waits 5 seconds by default, and finally shuts down all processes using the normal Windows shutdown behavior. The 5 second default is actually in the Windows registry <a href="https://github.com/moby/moby/issues/25982#issuecomment-426441183" target="_blank">inside the container</a>, so it can be overridden when the container is built.</li>
<li>V1.Pod.volumeDevices - this is a beta feature, and is not implemented on Windows. Windows cannot attach raw block devices to pods.</li>
<li>V1.Pod.volumes - EmptyDir, Secret, ConfigMap, HostPath - all work and have tests in TestGrid

<ul>
<li>V1.emptyDirVolumeSource - the Node default medium is disk on Windows. Memory is not supported, as Windows does not have a built-in RAM disk.</li>
</ul></li>
<li>V1.VolumeMount.mountPropagation - mount propagation is not supported on Windows.</li>
</ul>

<h5 id="v1-podsecuritycontext">V1.PodSecurityContext</h5>

<p>None of the PodSecurityContext fields work on Windows. They&rsquo;re listed here for reference.</p>

<ul>
<li>V1.PodSecurityContext.SELinuxOptions - SELinux is not available on Windows</li>
<li>V1.PodSecurityContext.RunAsUser - provides a UID, not available on Windows</li>
<li>V1.PodSecurityContext.RunAsGroup - provides a GID, not available on Windows</li>
<li>V1.PodSecurityContext.RunAsNonRoot - Windows does not have a root user. The closest equivalent is ContainerAdministrator which is an identity that doesn&rsquo;t exist on the node.</li>
<li>V1.PodSecurityContext.SupplementalGroups - provides GID, not available on Windows</li>
<li>V1.PodSecurityContext.Sysctls - these are part of the Linux sysctl interface. There&rsquo;s no equivalent on Windows.</li>
</ul>

<h2 id="troubleshooting">Getting Help and Troubleshooting</h2>

<p>Your main source of help for troubleshooting your Kubernetes cluster should start with this <a href="/ja/docs/tasks/debug-application-cluster/troubleshooting/">section</a>. Some additional, Windows-specific troubleshooting help is included in this section. Logs are an important element of troubleshooting issues in Kubernetes. Make sure to include them any time you seek troubleshooting assistance from other contributors. Follow the instructions in the SIG-Windows <a href="https://github.com/kubernetes/community/blob/master/sig-windows/CONTRIBUTING.md#gathering-logs" target="_blank">contributing guide on gathering logs</a>.</p>

<ol>
<li><p>How do I know start.ps1 completed successfully?</p>

<p>You should see kubelet, kube-proxy, and (if you chose Flannel as your networking solution) flanneld host-agent processes running on your node, with running logs being displayed in separate PowerShell windows. In addition to this, your Windows node should be listed as &ldquo;Ready&rdquo; in your Kubernetes cluster.</p></li>

<li><p>Can I configure the Kubernetes node processes to run in the background as services?</p>

<p>Kubelet and kube-proxy are already configured to run as native Windows Services, offering resiliency by re-starting the services automatically in the event of failure (for example a process crash). You have two options for configuring these node components as services.</p>

<ol>
<li><p>As native Windows Services</p>

<p>Kubelet &amp; kube-proxy can be run as native Windows Services using <code>sc.exe</code>.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-powershell" data-lang="powershell"><span style="color:#080;font-style:italic"># Create the services for kubelet and kube-proxy in two separate commands</span>
sc.exe create &lt;component_name&gt; binPath= <span style="color:#b44">&#34;&lt;path_to_binary&gt; --service &lt;other_args&gt;&#34;</span>

<span style="color:#080;font-style:italic"># Please note that if the arguments contain spaces, they must be escaped.</span>
sc.exe create kubelet binPath= <span style="color:#b44">&#34;C:\kubelet.exe --service --hostname-override &#39;minion&#39; &lt;other_args&gt;&#34;</span>

<span style="color:#080;font-style:italic"># Start the services</span>
<span style="color:#a2f">Start-Service</span> kubelet
<span style="color:#a2f">Start-Service</span> kube-proxy

<span style="color:#080;font-style:italic"># Stop the service</span>
<span style="color:#a2f">Stop-Service</span> kubelet (-Force)
<span style="color:#a2f">Stop-Service</span> kube-proxy (-Force)

<span style="color:#080;font-style:italic"># Query the service status</span>
<span style="color:#a2f">Get-Service</span> kubelet
<span style="color:#a2f">Get-Service</span> kube-proxy</code></pre></div></li>

<li><p>Using nssm.exe</p>

<p>You can also always use alternative service managers like <a href="https://nssm.cc/" target="_blank">nssm.exe</a> to run these processes (flanneld, kubelet &amp; kube-proxy) in the background for you. You can use this <a href="https://github.com/Microsoft/SDN/tree/master/Kubernetes/flannel/register-svc.ps1" target="_blank">sample script</a>, leveraging nssm.exe to register kubelet, kube-proxy, and flanneld.exe to run as Windows services in the background.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-powershell" data-lang="powershell"><span style="color:#a2f">register-svc</span>.ps1 -NetworkMode &lt;Network mode&gt; -ManagementIP &lt;Windows Node IP&gt; -ClusterCIDR &lt;Cluster subnet&gt; -KubeDnsServiceIP &lt;Kube-dns Service IP&gt; -LogDir &lt;Directory to place logs&gt;

<span style="color:#080;font-style:italic"># NetworkMode      = The network mode l2bridge (flannel host-gw, also the default value) or overlay (flannel vxlan) chosen as a network solution</span>
<span style="color:#080;font-style:italic"># ManagementIP     = The IP address assigned to the Windows node. You can use ipconfig to find this</span>
<span style="color:#080;font-style:italic"># ClusterCIDR      = The cluster subnet range. (Default value 10.244.0.0/16)</span>
<span style="color:#080;font-style:italic"># KubeDnsServiceIP = The Kubernetes DNS service IP (Default value 10.96.0.10)</span>
<span style="color:#080;font-style:italic"># LogDir           = The directory where kubelet and kube-proxy logs are redirected into their respective output files (Default value C:\k)</span></code></pre></div>
<p>If the above referenced script is not suitable, you can manually configure nssm.exe using the following examples.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-powershell" data-lang="powershell"><span style="color:#080;font-style:italic"># Register flanneld.exe</span>
nssm install flanneld C<span style="">:</span>\flannel\flanneld.exe
nssm set flanneld AppParameters --kubeconfig<span style="color:#666">-file</span>=c<span style="">:</span>\k\config --iface=&lt;ManagementIP&gt; --ip-masq=1 --kube-subnet-mgr=1
nssm set flanneld AppEnvironmentExtra NODE_NAME=&lt;hostname&gt;
nssm set flanneld AppDirectory C<span style="">:</span>\flannel
nssm start flanneld

<span style="color:#080;font-style:italic"># Register kubelet.exe</span>
<span style="color:#080;font-style:italic"># Microsoft releases the pause infrastructure container at mcr.microsoft.com/k8s/core/pause:1.2.0</span>
<span style="color:#080;font-style:italic"># For more info search for &#34;pause&#34; in the &#34;Guide for adding Windows Nodes in Kubernetes&#34;</span>
nssm install kubelet C<span style="">:</span>\k\kubelet.exe
nssm set kubelet AppParameters --hostname-override=&lt;hostname&gt; --v=6 --pod-infra-container-image=mcr.microsoft.com/k8s/core/pause<span style="">:</span>1.2.0 --resolv-conf=<span style="color:#b44">&#34;&#34;</span> --allow-privileged=true --enable-debugging-handlers --cluster-dns=&lt;DNS-service-IP&gt; --cluster-domain=cluster.local --kubeconfig=c<span style="">:</span>\k\config --hairpin-mode=promiscuous-bridge --image-pull-progress-deadline=20m --cgroups-per-qos=false  --log-dir=&lt;log directory&gt; --logtostderr=false --enforce-node-allocatable=<span style="color:#b44">&#34;&#34;</span> --network-plugin=cni --cni-bin-dir=c<span style="">:</span>\k\cni --cni-conf-dir=c<span style="">:</span>\k\cni\config
nssm set kubelet AppDirectory C<span style="">:</span>\k
nssm start kubelet

<span style="color:#080;font-style:italic"># Register kube-proxy.exe (l2bridge / host-gw)</span>
nssm install kube-proxy C<span style="">:</span>\k\kube-proxy.exe
nssm set kube-proxy AppDirectory c<span style="">:</span>\k
nssm set kube-proxy AppParameters --v=4 --proxy-mode=kernelspace --hostname-override=&lt;hostname&gt;--kubeconfig=c<span style="">:</span>\k\config --enable-dsr=false --log-dir=&lt;log directory&gt; --logtostderr=false
nssm.exe set kube-proxy AppEnvironmentExtra KUBE_NETWORK=cbr0
nssm set kube-proxy DependOnService kubelet
nssm start kube-proxy

<span style="color:#080;font-style:italic"># Register kube-proxy.exe (overlay / vxlan)</span>
nssm install kube-proxy C<span style="">:</span>\k\kube-proxy.exe
nssm set kube-proxy AppDirectory c<span style="">:</span>\k
nssm set kube-proxy AppParameters --v=4 --proxy-mode=kernelspace --feature-gates=<span style="color:#b44">&#34;WinOverlay=true&#34;</span> --hostname-override=&lt;hostname&gt; --kubeconfig=c<span style="">:</span>\k\config --network-name=vxlan0 --source-vip=&lt;source-vip&gt; --enable-dsr=false --log-dir=&lt;log directory&gt; --logtostderr=false
nssm set kube-proxy DependOnService kubelet
nssm start kube-proxy</code></pre></div>
<p>For initial troubleshooting, you can use the following flags in <a href="https://nssm.cc/" target="_blank">nssm.exe</a> to redirect stdout and stderr to a output file:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-powershell" data-lang="powershell">nssm set &lt;Service Name&gt; AppStdout C<span style="">:</span>\k\mysvc.log
nssm set &lt;Service Name&gt; AppStderr C<span style="">:</span>\k\mysvc.log</code></pre></div>
<p>For additional details, see official <a href="https://nssm.cc/usage" target="_blank">nssm usage</a> docs.</p></li>
</ol></li>

<li><p>My Windows Pods do not have network connectivity</p>

<p>If you are using virtual machines, ensure that MAC spoofing is enabled on all the VM network adapter(s).</p></li>

<li><p>My Windows Pods cannot ping external resources</p>

<p>Windows Pods do not have outbound rules programmed for the ICMP protocol today. However, TCP/UDP is supported. When trying to demonstrate connectivity to resources outside of the cluster, please substitute <code>ping &lt;IP&gt;</code> with corresponding <code>curl &lt;IP&gt;</code> commands.</p>

<p>If you are still facing problems, most likely your network configuration in <a href="https://github.com/Microsoft/SDN/blob/master/Kubernetes/flannel/l2bridge/cni/config/cni.conf" target="_blank">cni.conf</a> deserves some extra attention. You can always edit this static file. The configuration update will apply to any newly created Kubernetes resources.</p>

<p>One of the Kubernetes networking requirements (see <a href="/ja/docs/concepts/cluster-administration/networking/">Kubernetes model</a>) is for cluster communication to occur without NAT internally. To honor this requirement, there is an <a href="https://github.com/Microsoft/SDN/blob/master/Kubernetes/flannel/l2bridge/cni/config/cni.conf#L20" target="_blank">ExceptionList</a> for all the communication where we do not want outbound NAT to occur. However, this also means that you need to exclude the external IP you are trying to query from the ExceptionList. Only then will the traffic originating from your Windows pods be SNAT&rsquo;ed correctly to receive a response from the outside world. In this regard, your ExceptionList in <code>cni.conf</code> should look as follows:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-conf" data-lang="conf">&#34;ExceptionList&#34;: [
                &#34;10.244.0.0/16&#34;,  # Cluster subnet
                &#34;10.96.0.0/12&#34;,   # Service subnet
                &#34;10.127.130.0/24&#34; # Management (host) subnet
            ]</code></pre></div></li>

<li><p>My Windows node cannot access NodePort service</p>

<p>Local NodePort access from the node itself fails. This is a known limitation. NodePort access works from other nodes or external clients.</p></li>

<li><p>vNICs and HNS endpoints of containers are being deleted</p>

<p>This issue can be caused when the <code>hostname-override</code> parameter is not passed to <a href="/ja/docs/reference/command-line-tools-reference/kube-proxy/">kube-proxy</a>. To resolve it, users need to pass the hostname to kube-proxy as follows:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-powershell" data-lang="powershell">C<span style="">:</span>\k\kube-proxy.exe --hostname-override=$(hostname)</code></pre></div></li>

<li><p>With flannel my nodes are having issues after rejoining a cluster</p>

<p>Whenever a previously deleted node is being re-joined to the cluster, flannelD tries to assign a new pod subnet to the node. Users should remove the old pod subnet configuration files in the following paths:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-powershell" data-lang="powershell"><span style="color:#a2f">Remove-Item</span> C<span style="">:</span>\k\SourceVip.json
<span style="color:#a2f">Remove-Item</span> C<span style="">:</span>\k\SourceVipRequest.json</code></pre></div></li>

<li><p>After launching <code>start.ps1</code>, flanneld is stuck in &ldquo;Waiting for the Network to be created&rdquo;</p>

<p>There are numerous reports of this <a href="https://github.com/coreos/flannel/issues/1066" target="_blank">issue which are being investigated</a>; most likely it is a timing issue for when the management IP of the flannel network is set. A workaround is to simply relaunch start.ps1 or relaunch it manually as follows:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-powershell" data-lang="powershell">PS C<span style="">:</span>&gt; <span style="color:#800">[Environment]</span>::SetEnvironmentVariable(<span style="color:#b44">&#34;NODE_NAME&#34;</span>, <span style="color:#b44">&#34;&lt;Windows_Worker_Hostname&gt;&#34;</span>)
PS C<span style="">:</span>&gt; C<span style="">:</span>\flannel\flanneld.exe --kubeconfig<span style="color:#666">-file</span>=c<span style="">:</span>\k\config --iface=&lt;Windows_Worker_Node_IP&gt; --ip-masq=1 --kube-subnet-mgr=1</code></pre></div></li>

<li><p>My Windows Pods cannot launch because of missing <code>/run/flannel/subnet.env</code></p>

<p>This indicates that Flannel didn&rsquo;t launch correctly. You can either try to restart flanneld.exe or you can copy the files over manually from <code>/run/flannel/subnet.env</code> on the Kubernetes master to<code>C:\run\flannel\subnet.env</code> on the Windows worker node and modify the <code>FLANNEL_SUBNET</code> row to a different number. For example, if node subnet 10.244.4.1/24 is desired:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-env" data-lang="env">FLANNEL_NETWORK=10.244.0.0/16
FLANNEL_SUBNET=10.244.4.1/24
FLANNEL_MTU=1500
FLANNEL_IPMASQ=true</code></pre></div></li>

<li><p>My Windows node cannot access my services using the service IP</p>

<p>This is a known limitation of the current networking stack on Windows. Windows Pods are able to access the service IP however.</p></li>

<li><p>No network adapter is found when starting kubelet</p>

<p>The Windows networking stack needs a virtual adapter for Kubernetes networking to work. If the following commands return no results (in an admin shell), virtual network creation — a necessary prerequisite for Kubelet to work — has failed:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-powershell" data-lang="powershell"><span style="color:#a2f">Get-HnsNetwork</span> | ? Name <span style="color:#666">-ieq</span> <span style="color:#b44">&#34;cbr0&#34;</span>
<span style="color:#a2f">Get-NetAdapter</span> | ? Name <span style="color:#666">-Like</span> <span style="color:#b44">&#34;vEthernet (Ethernet*&#34;</span></code></pre></div>
<p>Often it is worthwhile to modify the <a href="https://github.com/Microsoft/SDN/blob/master/Kubernetes/flannel/l2bridge/start.ps1#L6" target="_blank">InterfaceName</a> parameter of the start.ps1 script, in cases where the host&rsquo;s network adapter isn&rsquo;t &ldquo;Ethernet&rdquo;. Otherwise, consult the output of the <code>start-kubelet.ps1</code> script to see if there are errors during virtual network creation.</p></li>

<li><p>My Pods are stuck at &ldquo;Container Creating&rdquo; or restarting over and over</p>

<p>Check that your pause image is compatible with your OS version. The <a href="https://docs.microsoft.com/en-us/virtualization/windowscontainers/kubernetes/deploying-resources" target="_blank">instructions</a> assume that both the OS and the containers are version 1803. If you have a later version of Windows, such as an Insider build, you need to adjust the images accordingly. Please refer to the Microsoft&rsquo;s <a href="https://hub.docker.com/u/microsoft/" target="_blank">Docker repository</a> for images. Regardless, both the pause image Dockerfile and the sample service expect the image to be tagged as :latest.</p>

<p>Starting with Kubernetes v1.14, Microsoft releases the pause infrastructure container at <code>mcr.microsoft.com/k8s/core/pause:1.2.0</code>. For more information search for &ldquo;pause&rdquo; in the <a href="../user-guide-windows-nodes">Guide for adding Windows Nodes in Kubernetes</a>.</p></li>

<li><p>DNS resolution is not properly working</p>

<p>Check the DNS limitations for Windows in this <a href="#dns-limitations">section</a>.</p></li>

<li><p><code>kubectl port-forward</code> fails with &ldquo;unable to do port forwarding: wincat not found&rdquo;</p>

<p>This was implemented in Kubernetes 1.15, and the pause infrastructure container <code>mcr.microsoft.com/k8s/core/pause:1.2.0</code>. Be sure to use these versions or newer ones.
If you would like to build your own pause infrastructure container, be sure to include <a href="https://github.com/kubernetes-sigs/sig-windows-tools/tree/master/cmd/wincat" target="_blank">wincat</a></p></li>
</ol>

<h3 id="further-investigation">Further investigation</h3>

<p>If these steps don&rsquo;t resolve your problem, you can get help running Windows containers on Windows nodes in Kubernetes through:</p>

<ul>
<li>StackOverflow <a href="https://stackoverflow.com/questions/tagged/windows-server-container" target="_blank">Windows Server Container</a> topic</li>
<li>Kubernetes Official Forum <a href="https://discuss.kubernetes.io/" target="_blank">discuss.kubernetes.io</a></li>
<li>Kubernetes Slack <a href="https://kubernetes.slack.com/messages/sig-windows" target="_blank">#SIG-Windows Channel</a></li>
</ul>

<h2 id="reporting-issues-and-feature-requests">Reporting Issues and Feature Requests</h2>

<p>If you have what looks like a bug, or you would like to make a feature request, please use the <a href="https://github.com/kubernetes/kubernetes/issues" target="_blank">GitHub issue tracking system</a>. You can open issues on <a href="https://github.com/kubernetes/kubernetes/issues/new/choose" target="_blank">GitHub</a> and assign them to SIG-Windows. You should first search the list of issues in case it was reported previously and comment with your experience on the issue and add additional logs. SIG-Windows Slack is also a great avenue to get some initial support and troubleshooting ideas prior to creating a ticket.</p>

<p>If filing a bug, please include detailed information about how to reproduce the problem, such as:</p>

<ul>
<li>Kubernetes version: kubectl version</li>
<li>Environment details: Cloud provider, OS distro, networking choice and configuration, and Docker version</li>
<li>Detailed steps to reproduce the problem</li>
<li><a href="https://github.com/kubernetes/community/blob/master/sig-windows/CONTRIBUTING.md#gathering-logs" target="_blank">Relevant logs</a></li>
<li>Tag the issue sig/windows by commenting on the issue with <code>/sig windows</code> to bring it to a SIG-Windows member&rsquo;s attention</li>
</ul>












<h2 id="次の項目">次の項目</h2>
<p>We have a lot of features in our roadmap. An abbreviated high level list is included below, but we encourage you to view our <a href="https://github.com/orgs/kubernetes/projects/8" target="_blank">roadmap project</a> and help us make Windows support better by <a href="https://github.com/kubernetes/community/blob/master/sig-windows/" target="_blank">contributing</a>.</p>

<h3 id="cri-containerd">CRI-ContainerD</h3>

<p><a class='glossary-tooltip' href='https://containerd.io/docs/' target='_blank'>containerd<span class='tooltip-text'>A container runtime with an emphasis on simplicity, robustness and portability</span>
</a> is another OCI-compliant runtime that recently graduated as a <a class='glossary-tooltip' href='https://cncf.io/' target='_blank'>CNCF<span class='tooltip-text'>Cloud Native Computing Foundation</span>
</a> project. It&rsquo;s currently tested on Linux, but 1.3 will bring support for Windows and Hyper-V. [<a href="https://blog.docker.com/2019/02/containerd-graduates-within-the-cncf/" target="_blank">reference</a>]</p>

<p>The CRI-ContainerD interface will be able to manage sandboxes based on Hyper-V. This provides a foundation where RuntimeClass could be implemented for new use cases including:</p>

<ul>
<li>Hypervisor-based isolation between pods for additional security</li>
<li>Backwards compatibility allowing a node to run a newer Windows Server version without requiring containers to be rebuilt</li>
<li>Specific CPU/NUMA settings for a pod</li>
<li>Memory isolation and reservations</li>
</ul>

<h3 id="hyper-v-isolation">Hyper-V isolation</h3>

<p>The existing Hyper-V isolation support, an experimental feature as of v1.10, will be deprecated in the future in favor of the CRI-ContainerD and RuntimeClass features mentioned above. To use the current features and create a Hyper-V isolated container, the kubelet should be started with feature gates <code>HyperVContainer=true</code> and the Pod should include the annotation <code>experimental.windows.kubernetes.io/isolation-type=hyperv</code>. In the experiemental release, this feature is limited to 1 container per Pod.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">apiVersion:<span style="color:#bbb"> </span>apps/v1<span style="color:#bbb">
</span><span style="color:#bbb"></span>kind:<span style="color:#bbb"> </span>Deployment<span style="color:#bbb">
</span><span style="color:#bbb"></span>metadata:<span style="color:#bbb">
</span><span style="color:#bbb">  </span>name:<span style="color:#bbb"> </span>iis<span style="color:#bbb">
</span><span style="color:#bbb"></span>spec:<span style="color:#bbb">
</span><span style="color:#bbb">  </span>selector:<span style="color:#bbb">
</span><span style="color:#bbb">    </span>matchLabels:<span style="color:#bbb">
</span><span style="color:#bbb">      </span>app:<span style="color:#bbb"> </span>iis<span style="color:#bbb">
</span><span style="color:#bbb">  </span>replicas:<span style="color:#bbb"> </span><span style="color:#666">3</span><span style="color:#bbb">
</span><span style="color:#bbb">  </span>template:<span style="color:#bbb">
</span><span style="color:#bbb">    </span>metadata:<span style="color:#bbb">
</span><span style="color:#bbb">      </span>labels:<span style="color:#bbb">
</span><span style="color:#bbb">        </span>app:<span style="color:#bbb"> </span>iis<span style="color:#bbb">
</span><span style="color:#bbb">      </span>annotations:<span style="color:#bbb">
</span><span style="color:#bbb">        </span>experimental.windows.kubernetes.io/isolation-type:<span style="color:#bbb"> </span>hyperv<span style="color:#bbb">
</span><span style="color:#bbb">    </span>spec:<span style="color:#bbb">
</span><span style="color:#bbb">      </span>containers:<span style="color:#bbb">
</span><span style="color:#bbb">      </span>-<span style="color:#bbb"> </span>name:<span style="color:#bbb"> </span>iis<span style="color:#bbb">
</span><span style="color:#bbb">        </span>image:<span style="color:#bbb"> </span>microsoft/iis<span style="color:#bbb">
</span><span style="color:#bbb">        </span>ports:<span style="color:#bbb">
</span><span style="color:#bbb">        </span>-<span style="color:#bbb"> </span>containerPort:<span style="color:#bbb"> </span><span style="color:#666">80</span></code></pre></div>
<h3 id="deployment-with-kubeadm-and-cluster-api">Deployment with kubeadm and cluster API</h3>

<p>Kubeadm is becoming the de facto standard for users to deploy a Kubernetes cluster. Windows node support in kubeadm will come in a future release. We are also making investments in cluster API to ensure Windows nodes are properly provisioned.</p>

<h3 id="a-few-other-key-features">A few other key features</h3>

<ul>
<li>Beta support for Group Managed Service Accounts</li>
<li>More CNIs</li>
<li>More Storage Plugins</li>
</ul>







    
            
  <h2>フィードバック</h2>
  <p class="feedback--prompt">このページは役に立ちましたか？ </p>
  <button class="button feedback--yes">はい</button>
  <button class="button feedback--no">いいえ</button>
  <p class="feedback--response feedback--response__hidden">
    Thanks for the feedback. If you have a specific, answerable question about how to use Kubernetes, ask it on
    <a target="_blank" rel="noopener"
      href="https://stackoverflow.com/questions/tagged/kubernetes">
      Stack Overflow</a>.
    Open an issue in the GitHub repo if you want to 
    <a class="feedback--link" target="_blank" rel="noopener"
      href="https://github.com/kubernetes/website/issues/new?title=Issue%20with%20k8s.io">
      問題を報告する</a>
    or
    <a class="feedback--link" target="_blank" rel="noopener"
      href="https://github.com/kubernetes/website/issues/new?title=Improvement%20for%20k8s.io">
      改善を提案</a>.
  </p>
  <script>
    const yes = document.querySelector('.feedback--yes');
    const no = document.querySelector('.feedback--no');
    document.querySelectorAll('.feedback--link').forEach(link => {
      link.href = link.href + window.location.pathname;
    });
    const sendFeedback = (value) => {
      if (!gtag) { console.log('!gtag'); }
      gtag('event', 'click', {
        'event_category': 'Helpful',
        'event_label': window.location.pathname,
        value
      });
    };
    const disableButtons = () => {
      yes.disabled = true;
      yes.classList.add('feedback--button__disabled');
      no.disabled = true;
      no.classList.add('feedback--button__disabled');
    };
    yes.addEventListener('click', () => {
      sendFeedback(1);
      disableButtons();
      document.querySelector('.feedback--response').classList.remove('feedback--response__hidden');
    });
    no.addEventListener('click', () => {
      sendFeedback(0);
      disableButtons();
      document.querySelector('.feedback--response').classList.remove('feedback--response__hidden');
    });
  </script>


    
            <div id="pre-footer"> 
  <hr />

  <div class="issue-button-container">
    <p><a href=""><img src="https://kubernetes-site.appspot.com/UA-36037335-10/GitHub/docs/setup/production-environment/windows/intro-windows-in-kubernetes.md?pixel" alt="Analytics" /></a></p>
    
    
    <script type="text/javascript">
    PDRTJS_settings_8345992 = {
    "id" : "8345992",
    "unique_id" : "\/ja\/docs\/setup\/production-environment\/windows\/intro-windows-in-kubernetes\/",
    "title" : "Intro to Windows support in Kubernetes",
    "permalink" : "https:\/\/kubernetes.io\/ja\/docs\/setup\/production-environment\/windows\/intro-windows-in-kubernetes\/"
    };
    (function(d,c,j){if(!document.getElementById(j)){var pd=d.createElement(c),s;pd.id=j;pd.src=('https:'==document.location.protocol)?'https://polldaddy.com/js/rating/rating.js':'http://i0.poll.fm/js/rating/rating.js';s=document.getElementsByTagName(c)[0];s.parentNode.insertBefore(pd,s);}}(document,'script','pd-rating-js'));
    </script>
    <a href="" onclick="window.open('https://github.com/kubernetes/website/issues/new?template=bug-report.md&title=Issue%20with%20' +
    'k8s.io'+window.location.pathname)" class="button issue">Issue作成</a>
    
    
    
    <a href="https://github.com/kubernetes/website/edit/master/content/ja/docs/setup/production-environment/windows/intro-windows-in-kubernetes.md" class="button issue">ページ編集</a>
    
  </div>
  

  <div id="lastedit" class="lastedit issue-button-container">
    ページの最終更新 November 20, 2019 at 2:25 PM PST by
    <a href="https://github.com/kubernetes/website/commit/4532bd2bdb4419de4783be084195f18be516ee53/">First Japanese l10n work for release-1.15. (#17693)</a> (<a href="https://github.com/kubernetes/website/commits/master/content/en/docs/setup/production-environment/windows/intro-windows-in-kubernetes.md">ページ履歴</a>)
  </div>
  
</div>

          </div>
        </section>
    </main>
		<footer>
    <div class="light-text main-section">
        <nav>
            
            
            
            <a href="/ja/docs/home/">ホーム</a>
            
            
            
            
            
            
            
            
            
            <a href="/ja/case-studies/">ケーススタディ</a>
            
        </nav>
        <div class="social" role="region" aria-label="Social hyperlinks">
            <div>
                <a href="https://twitter.com/kubernetesio" class="twitter"><span>Twitter</span></a>
                <a href="https://github.com/kubernetes/kubernetes" class="github"><span>GitHub</span></a>
                <a href="https://slack.k8s.io/" class="slack"><span>Slack</span></a>
            </div>
            <div>
                <a href="https://stackoverflow.com/questions/tagged/kubernetes" class="stack-overflow"><span>Stack Overflow</span></a>
                <a href="https://www.youtube.com/kubernetescommunity" class="youtube"><span>YouTube</span></a>
                <a href="https://discuss.kubernetes.io" class="mailing-list"><span>フォーラム</span></a>
                <a href="https://calendar.google.com/calendar/embed?src=nt2tcnbtbied3l6gi2h29slvc0%40group.calendar.google.com" class="calendar"><span>イベントカレンダー</span></a>
            </div>
            <div>
                
                <a href="https://git.k8s.io/community/contributors/guide" class="button">コントリビュート</a>
            </div>
        </div>
        <div class="miceType center">
            &copy; 2023 The Kubernetes Authors | Documentation Distributed under <a href="https://git.k8s.io/website/LICENSE" class="light-text">CC BY 4.0</a></a>
        </div>
        <div class="miceType center">
            Copyright &copy; 2023 The Linux Foundation &reg;. All rights reserved. The Linux Foundation has registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our <a href="https://www.linuxfoundation.org/trademark-usage" class="light-text">Trademark Usage page</a>
        </div>
        <div class="miceType center">
            ICP license: 京ICP备17074266号-3
        </div>
    </div>
</footer>

		<button class="flyout-button" onclick="kub.toggleToc()" aria-label="Toggle table of contents visibility"></button>

<script>

(function () {
    window.addEventListener('DOMContentLoaded', init)

        
        function init() {
            window.removeEventListener('DOMContentLoaded', init)
                hideNav()
        }

    function hideNav(toc){
        if (!toc) toc = document.querySelector('#docsToc')
        if (!toc) return
            var container = toc.querySelector('.container')

                
                if (container) {
                    if (container.childElementCount === 0 || toc.querySelectorAll('a.item').length === 1) {
                        toc.style.display = 'none'
                            document.getElementById('docsContent').style.width = '100%'
                    }
                } else {
                    requestAnimationFrame(function () {
                        hideNav(toc)
                    })
                }
    }
})();
</script>



    <script language="application/javascript">
      
      (function addHeadingLinks(){
        var article = document.getElementById('docsContent');
        var headings = article.querySelectorAll('h1, h2, h3, h4, h5, h6');
        headings.forEach(function(heading){
          if(heading.id){
            var a = document.createElement('a');
            a.innerHTML = heading.innerHTML;
            a.href = '#'+heading.id;
            a.classList.add('inpage_heading');
            heading.innerHTML = '';
            heading.appendChild(a);
          }
        });
      })();
    </script>
	</body>
</html>
