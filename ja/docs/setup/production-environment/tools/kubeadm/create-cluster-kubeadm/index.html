<!DOCTYPE html>
<html id="docs" lang="ja" class="">
	<head>
	

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-36037335-10"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-36037335-10');
</script>
<meta charset="utf-8">
<title>kubeadmを使用したシングルコントロールプレーンクラスターの作成 - Kubernetes</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="theme-color" content="#326ce5">
<link rel="shortcut icon" type="image/png" href="/images/favicon.png">









<link rel="stylesheet" href="/css/style.b7b8403eb5b1fddd0a2da2a8383d5b53e6ef81c23e4b0e292e6103bd91f9502d.css" integrity="sha256-t7hAPrWx/d0KLaKoOD1bU&#43;bvgcI&#43;Sw4pLmEDvZH5UC0=">


<link rel="stylesheet" href="/css/base_fonts.css">
<link rel="stylesheet" href="/css/jquery-ui.min.css">
<link rel="stylesheet" href="/css/callouts.css">
<link rel="stylesheet" href="/css/custom-jekyll/tags.css">



<meta name="description" content="">
<meta property="og:description" content="">
<meta name="twitter:description" content="">
<meta property="og:url" content="https://kubernetes.io/ja/docs/setup/production-environment/tools/kubeadm/create-cluster-kubeadm/">
<meta property="og:title" content="kubeadmを使用したシングルコントロールプレーンクラスターの作成">
<meta name="twitter:title" content="kubeadmを使用したシングルコントロールプレーンクラスターの作成">
<meta name="twitter:image" content="https://kubernetes.io/images/favicon.png" />

<meta name="twitter:image:alt" content="Kubernetes">

<meta property="og:image" content="/images/kubernetes-horizontal-color.png">

<meta property="og:type" content="article">
<script src="/js/anchor-4.1.1.min.js"></script>
<script src="/js/jquery-3.2.1.min.js"></script>
<script src="/js/jquery-ui-1.12.1.min.js"></script>
<script src="/js/bootstrap-4.3.1.min.js"></script>
<script src="/js/sweetalert-2.1.2.min.js"></script>

<script src="/js/script.js"></script>
<script src="/js/custom-jekyll/tags.js"></script>


	</head>
	<body>
		<div id="cellophane" onclick="kub.toggleMenu()"></div>

<header>
    <a href="/ja/" class="logo" title="プロダクショングレードのコンテナ管理基盤 - Kubernetes" aria-label="Kubernetes website"></a>

    <div class="nav-buttons" data-auto-burger="primary">
        <ul class="global-nav">
            
            
            <li><a href="/ja/docs/" class="active">ドキュメント</a></li>
            
            
            
            
            
            
            
            
            
            <li><a href="/ja/case-studies/">ケーススタディ</a></li>
            
            
            
             <li>
                <a href="#">
                    日本語 Japanese <span class="ui-icon ui-icon-carat-1-s"></span>
                </a>
                <ul>
                
                    <li><a href="/docs/setup/production-environment/tools/kubeadm/create-cluster-kubeadm/">English</a></li>
                
                </ul>
            </li>

            <li>
                <a href="#">
                    v1.17 <span class="ui-icon ui-icon-carat-1-s"></span>
                </a>
                <ul>
                
                    <li><a href="https://kubernetes.io/ja/docs/setup/production-environment/tools/kubeadm/create-cluster-kubeadm/">v1.21</a></li>
                
                    <li><a href="https://v1-20.docs.kubernetes.io/ja/docs/setup/production-environment/tools/kubeadm/create-cluster-kubeadm/">v1.20</a></li>
                
                    <li><a href="https://v1-19.docs.kubernetes.io/ja/docs/setup/production-environment/tools/kubeadm/create-cluster-kubeadm/">v1.19</a></li>
                
                    <li><a href="https://v1-18.docs.kubernetes.io/ja/docs/setup/production-environment/tools/kubeadm/create-cluster-kubeadm/">v1.18</a></li>
                
                    <li><a href="https://v1-17.docs.kubernetes.io/ja/docs/setup/production-environment/tools/kubeadm/create-cluster-kubeadm/">v1.17</a></li>
                
                </ul>
            </li>
        </ul>
        
        <a href="/ja/docs/tutorials/kubernetes-basics/" class="button" id="tryKubernetes" data-auto-burger-exclude>Kubernetesの基本を学ぶ</a>
        

        <button id="hamburger" onclick="kub.toggleMenu()" data-auto-burger-exclude><div></div></button>
    </div>

    <nav id="mainNav">
        <div class="main-section" data-auto-burger="primary">
         
           <div class="nav-box">
            <h3><a href="/ja/docs/tutorials/hello-minikube/">Get Started</a></h3>
           <p>手を動かす準備はできていますか？本チュートリアルでは、Node.jsを使った簡単な"Hello World"を実行するKubernetesクラスタをビルドします。</p>

            </div>
         
           <div class="nav-box">
            <h3><a href="/ja/docs/home/">ドキュメント</a></h3>
           <p>チュートリアル、サンプルやドキュメントのリファレンスを使って Kubernetes の利用方法を学んでください。あなたは<a href="/editdocs/" data-auto-burger-exclude>ドキュメントへコントリビュートをする</a>こともできます!</p>

            </div>
         
        </div>
        <div class="main-section" data-auto-burger="primary">
            <div class="left">
                <h5 class="github-invite">Kubernetesのコードを編集することに興味がありますか？</h5>
                <a href="https://github.com/kubernetes/kubernetes" class="button" data-auto-burger-exclude>GitHubで参照する</a>
            </div>

            <div class="right">
                <h5 class="github-invite">コミュニティを探す</h5>
                <div class="social">
                    <a href="https://twitter.com/kubernetesio" class="twitter"><span>Twitter</span></a>
                    <a href="https://github.com/kubernetes/kubernetes" class="github"><span>GitHub</span></a>
                    <a href="http://slack.k8s.io/" class="slack"><span>Slack Slack</span></a>
                    <a href="https://stackoverflow.com/questions/tagged/kubernetes" class="stack-overflow"><span>Stack Overflow</span></a>
                    <a href="https://www.youtube.com/kubernetescommunity" class="youtube"><span>YouTube</span></a>
                    <a href="https://discuss.kubernetes.io" class="mailing-list"><span>フォーラム</span></a>
                    <a href="https://calendar.google.com/calendar/embed?src=nt2tcnbtbied3l6gi2h29slvc0%40group.calendar.google.com" class="calendar"><span>イベントカレンダー</span></a>
                </div>
            </div>
            <div class="clear" style="clear: both"></div>
        </div>
    </nav>
</header>

		
		
		<section id="hero" class="light-text no-sub">
			







<h1>はじめに</h1>
<h5></h5>












<div id="vendorStrip" class="light-text">
	<ul>
		
		
		<li><a href="/ja/docs/home/">ホーム</a></li>
		
		
		<li><a href="/ja/docs/setup/" class="YAH">はじめに</a></li>
		
		
		<li><a href="/ja/docs/concepts/">コンセプト</a></li>
		
		
		<li><a href="/ja/docs/tasks/">タスク</a></li>
		
		
		<li><a href="/ja/docs/tutorials/">チュートリアル</a></li>
		
		
		<li><a href="/ja/docs/reference/">リファレンス</a></li>
		
		
		<li><a href="/ja/docs/contribute/">貢献</a></li>
		
	</ul>
	<form id="searchBox" action="/docs/search/" role="search">
		<input type="text" id="search" name="q" placeholder="検索" aria-label="Search">
	</form>
</div>

		</section>
		
    
		
<section id="deprecationWarning">
  <main>
    <div class="content deprecation-warning">
      <h3>
	 Kubernetes v1.17
	  のドキュメントは積極的にメンテナンスされていません。現在表示されているバージョンはスナップショットです。最新のドキュメントはこちらです: 
	 <a href="https://kubernetes.io/docs/home/">最新バージョン</a>
      </h3>
    </div>
  </main>
</section>


    <main>
        <section id="encyclopedia">
          
<div id="docsToc">
     <div class="pi-accordion">
    	
        
        
        
        
        
         
             
                 
             
         
             
                 
                          
                          
                 
             
         
             
         
             
         
             
         
             
         
             
         
         
        
        <a class="item" data-title="はじめに" href="/ja/docs/setup/"></a>

	
	
			
			
			
			
			
		
	
	
	
		
			
<div class="item" data-title="リリースノート及びバージョンスキュー">
	<div class="container">
		
		
	
	
			
			
			
			
			
		
	
	
	
		
			

<a class="item" target="_blank" data-title="v1.17 Release Notes <small>(EN)</small>" href="/docs/setup/release/notes/"></a>

		
	
		
			

<a class="item" data-title="Kubernetesバージョンとバージョンスキューサポートポリシー" href="/ja/docs/setup/release/version-skew-policy/"></a>

		
	
		
			

<a class="item" data-title="リリースのビルド" href="/ja/docs/setup/release/building-from-source/"></a>

		
	

	</div>
</div>

		
	
		
			
<div class="item" data-title="環境について学ぶ">
	<div class="container">
		
		
	
	
			
			
			
			
			
		
	
	
	
		
			

<a class="item" target="_blank" data-title="Installing Kubernetes with Kind <small>(EN)</small>" href="/docs/setup/learning-environment/kind/"></a>

		
	
		
			

<a class="item" data-title="Minikubeを使用してローカル環境でKubernetesを動かす" href="/ja/docs/setup/learning-environment/minikube/"></a>

		
	

	</div>
</div>

		
	
		
			
<div class="item" data-title="プロダクション環境">
	<div class="container">
		
		
	
	
			
			
			
			
			
		
	
	
	
		
			

<a class="item" data-title="CRIのインストール" href="/ja/docs/setup/production-environment/container-runtimes/"></a>

		
	
		
			
<div class="item" data-title="Kubernetesをデプロイツールでインストールする">
	<div class="container">
		
		
	
	
			
			
			
			
			
		
	
	
	
		
			
<div class="item" data-title="kubeadmを使ってクラスターを構築する">
	<div class="container">
		
		
	
	
			
			
			
			
			
		
	
	
	
		
			

<a class="item" data-title="kubeadmのインストール" href="/ja/docs/setup/production-environment/tools/kubeadm/install-kubeadm/"></a>

		
	
		
			

<a class="item" data-title="kubeadmを使用したシングルコントロールプレーンクラスターの作成" href="/ja/docs/setup/production-environment/tools/kubeadm/create-cluster-kubeadm/"></a>

		
	
		
			

<a class="item" data-title="kubeadmを使ったコントロールプレーンの設定のカスタマイズ" href="/ja/docs/setup/production-environment/tools/kubeadm/control-plane-flags/"></a>

		
	
		
			

<a class="item" data-title="Options for Highly Available topology" href="/ja/docs/setup/production-environment/tools/kubeadm/ha-topology/"></a>

		
	
		
			

<a class="item" data-title="kubeadmを使用した高可用性クラスターの作成" href="/ja/docs/setup/production-environment/tools/kubeadm/high-availability/"></a>

		
	
		
			

<a class="item" data-title="kubeadmを使用した高可用性etcdクラスターの作成" href="/ja/docs/setup/production-environment/tools/kubeadm/setup-ha-etcd-with-kubeadm/"></a>

		
	
		
			

<a class="item" data-title="kubeadmを使用したクラスター内の各kubeletの設定" href="/ja/docs/setup/production-environment/tools/kubeadm/kubelet-integration/"></a>

		
	
		
			

<a class="item" data-title="kubeadmのトラブルシューティング" href="/ja/docs/setup/production-environment/tools/kubeadm/troubleshooting-kubeadm/"></a>

		
	
		
			

<a class="item" data-title="Configuring your kubernetes cluster to self-host the control plane" href="/ja/docs/setup/production-environment/tools/kubeadm/self-hosting/"></a>

		
	

	</div>
</div>

		
	
		
			

<a class="item" data-title="kopsを使ったAWS上でのKubernetesのインストール" href="/ja/docs/setup/production-environment/tools/kops/"></a>

		
	
		
			

<a class="item" data-title="KRIBを使用してDigital Rebar Provision (DRP)と共にKubernetesをインストールする" href="/ja/docs/setup/production-environment/tools/krib/"></a>

		
	
		
			

<a class="item" data-title="kubesprayを使ったオンプレミス/クラウドプロバイダへのKubernetesのインストール" href="/ja/docs/setup/production-environment/tools/kubespray/"></a>

		
	

	</div>
</div>

		
	
		
			
<div class="item" data-title="ターンキークラウドソリューション">
	<div class="container">
		
		
	
	
			
			
			
			
			
		
	
	
	
		
			

<a class="item" data-title="Alibaba CloudでKubernetesを動かす" href="/ja/docs/setup/production-environment/turnkey/alibaba-cloud/"></a>

		
	
		
			

<a class="item" data-title="AWS EC2上でKubernetesを動かす" href="/ja/docs/setup/production-environment/turnkey/aws/"></a>

		
	
		
			

<a class="item" data-title="Azure 上で Kubernetes を動かす" href="/ja/docs/setup/production-environment/turnkey/azure/"></a>

		
	
		
			

<a class="item" data-title="CenturyLink Cloud上でKubernetesを動かす" href="/ja/docs/setup/production-environment/turnkey/clc/"></a>

		
	
		
			

<a class="item" data-title="Google Compute Engine上でKubernetesを動かす" href="/ja/docs/setup/production-environment/turnkey/gce/"></a>

		
	
		
			

<a class="item" data-title="IBM Cloud Privateを使ってマルチクラウドでKubernetesを動かす" href="/ja/docs/setup/production-environment/turnkey/icp/"></a>

		
	
		
			

<a class="item" target="_blank" data-title="Running Kubernetes on Tencent Kubernetes Engine <small>(EN)</small>" href="/docs/setup/production-environment/turnkey/tencent/"></a>

		
	
		
			

<a class="item" data-title="Stackpoint.ioを利用して複数のクラウド上でKubernetesを動かす" href="/ja/docs/setup/production-environment/turnkey/stackpoint/"></a>

		
	

	</div>
</div>

		
	
		
			
<div class="item" data-title="Windows in Kubernetes">
	<div class="container">
		
		
	
	
			
			
			
			
			
		
	
	
	
		
			

<a class="item" data-title="Intro to Windows support in Kubernetes" href="/ja/docs/setup/production-environment/windows/intro-windows-in-kubernetes/"></a>

		
	
		
			

<a class="item" data-title="Guide for adding Windows Nodes in Kubernetes" href="/ja/docs/setup/production-environment/windows/user-guide-windows-nodes/"></a>

		
	
		
			

<a class="item" data-title="Guide for scheduling Windows containers in Kubernetes" href="/ja/docs/setup/production-environment/windows/user-guide-windows-containers/"></a>

		
	

	</div>
</div>

		
	
		
			
<div class="item" data-title="オンプレミスVM">
	<div class="container">
		
		
	
	
			
			
			
			
			
		
	
	
	
		
			

<a class="item" data-title="Cloudstack" href="/ja/docs/setup/production-environment/on-premises-vm/cloudstack/"></a>

		
	
		
			

<a class="item" data-title="DC/OS上のKubernetes" href="/ja/docs/setup/production-environment/on-premises-vm/dcos/"></a>

		
	
		
			

<a class="item" data-title="oVirt" href="/ja/docs/setup/production-environment/on-premises-vm/ovirt/"></a>

		
	

	</div>
</div>

		
	

	</div>
</div>

		
	
		
			
<div class="item" data-title="ベストプラクティス">
	<div class="container">
		
		
	
	
			
			
			
			
			
		
	
	
	
		
			

<a class="item" data-title="複数のゾーンで動かす" href="/ja/docs/setup/best-practices/multiple-zones/"></a>

		
	
		
			

<a class="item" data-title="大規模クラスタの構築" href="/ja/docs/setup/best-practices/cluster-large/"></a>

		
	
		
			

<a class="item" data-title="ノードのセットアップの検証" href="/ja/docs/setup/best-practices/node-conformance/"></a>

		
	
		
			

<a class="item" data-title="PKI証明書とその要件" href="/ja/docs/setup/best-practices/certificates/"></a>

		
	

	</div>
</div>

		
	





     </div> 
    <button class="push-menu-close-button" onclick="kub.toggleToc()"></button>
</div> 


          <div id="docsContent">
            

<p>
  <a href="https://github.com/kubernetes/website/edit/master/content/ja/docs/setup/production-environment/tools/kubeadm/create-cluster-kubeadm.md" id="editPageButton" target="_blank">
    Edit This Page
  </a>
</p>

<h1>kubeadmを使用したシングルコントロールプレーンクラスターの作成</h1>




<p><img src="https://raw.githubusercontent.com/kubernetes/kubeadm/master/logos/stacked/color/kubeadm-stacked-color.png" align="right" width="150px"><strong>kubeadm</strong> helps you bootstrap a minimum viable Kubernetes cluster that conforms to best practices.  With kubeadm, your cluster should pass <a href="https://kubernetes.io/blog/2017/10/software-conformance-certification" target="_blank">Kubernetes Conformance tests</a>. Kubeadm also supports other cluster
lifecycle functions, such as upgrades, downgrade, and managing <a href="/ja/docs/reference/access-authn-authz/bootstrap-tokens/">bootstrap tokens</a>.</p>

<p>Because you can install kubeadm on various types of machine (e.g. laptop, server,
Raspberry Pi, etc.), it&rsquo;s well suited for integration with provisioning systems
such as Terraform or Ansible.</p>

<p>kubeadm&rsquo;s simplicity means it can serve a wide range of use cases:</p>

<ul>
<li>New users can start with kubeadm to try Kubernetes out for the first time.</li>
<li>Users familiar with Kubernetes can spin up clusters with kubeadm and test their applications.</li>
<li>Larger projects can include kubeadm as a building block in a more complex system that can also include other installer tools.</li>
</ul>

<p>kubeadm is designed to be a simple way for new users to start trying
Kubernetes out, possibly for the first time, a way for existing users to
test their application on and stitch together a cluster easily, and also to be
a building block in other ecosystem and/or installer tool with a larger
scope.</p>

<p>You can install <em>kubeadm</em> very easily on operating systems that support
installing deb or rpm packages. The responsible SIG for kubeadm,
<a href="https://github.com/kubernetes/community/tree/master/sig-cluster-lifecycle" target="_blank">SIG Cluster Lifecycle</a>, provides these packages pre-built for you,
but you may also build them from source for other OSes.</p>

<h3 id="kubeadmの成熟度">kubeadmの成熟度</h3>

<p>kubeadm&rsquo;s overall feature state is <strong>GA</strong>. Some sub-features, like the configuration
file API are still under active development. The implementation of creating the cluster
may change slightly as the tool evolves, but the overall implementation should be pretty stable.
Any commands under <code>kubeadm alpha</code> are by definition, supported on an alpha level.</p>

<h3 id="サポート期間">サポート期間</h3>

<p>Kubernetes releases are generally supported for nine months, and during that
period a patch release may be issued from the release branch if a severe bug or
security issue is found. Here are the latest Kubernetes releases and the support
timeframe; which also applies to <code>kubeadm</code>.</p>

<table>
<thead>
<tr>
<th>Kubernetes version</th>
<th>Release month</th>
<th>End-of-life-month</th>
</tr>
</thead>

<tbody>
<tr>
<td>v1.13.x</td>
<td>December 2018</td>
<td>September 2019</td>
</tr>

<tr>
<td>v1.14.x</td>
<td>March 2019</td>
<td>December 2019</td>
</tr>

<tr>
<td>v1.15.x</td>
<td>June 2019</td>
<td>March 2020</td>
</tr>

<tr>
<td>v1.16.x</td>
<td>September 2019</td>
<td>June 2020</td>
</tr>
</tbody>
</table>











<ul id="markdown-toc">










<li><a href="#%e5%a7%8b%e3%82%81%e3%82%8b%e5%89%8d%e3%81%ab">始める前に</a></li>












<li><a href="#%e7%9b%ae%e7%9a%84">目的</a></li>




<li><a href="#%e8%aa%ac%e6%98%8e">説明</a></li>




<li><a href="#tear-down">クラスターの削除</a></li>




<li><a href="#lifecycle">クラスターの維持</a></li>




<li><a href="#other-addons">他アドオンの参照</a></li>




<li><a href="#whats-next">次の手順</a></li>




<li><a href="#feedback">フィードバック</a></li>




<li><a href="#version-skew-policy">バージョン互換ポリシー</a></li>




<li><a href="#kubeadm%e3%81%af%e6%a7%98%e3%80%85%e3%81%aa%e3%83%97%e3%83%a9%e3%83%83%e3%83%88%e3%83%95%e3%82%a9%e3%83%bc%e3%83%a0%e3%81%a7%e5%8b%95%e3%81%8f">kubeadmは様々なプラットフォームで動く</a></li>




<li><a href="#limitations">制限事項</a></li>




<li><a href="#troubleshooting">トラブルシューティング</a></li>



























</ul>



<h2 id="始める前に">始める前に</h2>
<ul>
<li>One or more machines running a deb/rpm-compatible OS, for example Ubuntu or CentOS</li>
<li>2 GB or more of RAM per machine. Any less leaves little room for your
apps.</li>
<li>2 CPUs or more on the control-plane node</li>
<li>Full network connectivity among all machines in the cluster. A public or
private network is fine.</li>
</ul>




<h2 id="目的">目的</h2>

<ul>
<li>Install a single control-plane Kubernetes cluster or <a href="/ja/docs/setup/production-environment/tools/kubeadm/high-availability/">high availability cluster</a></li>
<li>Install a Pod network on the cluster so that your Pods can
talk to each other</li>
</ul>

<h2 id="説明">説明</h2>

<h3 id="kubeadmのインストール">kubeadmのインストール</h3>

<p>See <a href="/ja/docs/setup/production-environment/tools/kubeadm/install-kubeadm/">&ldquo;Installing kubeadm&rdquo;</a>.</p>

<blockquote class="note">
  <div><strong>備考:</strong> <p>If you have already installed kubeadm, run <code>apt-get update &amp;&amp;
apt-get upgrade</code> or <code>yum update</code> to get the latest version of kubeadm.</p>

<p>When you upgrade, the kubelet restarts every few seconds as it waits in a crashloop for
kubeadm to tell it what to do. This crashloop is expected and normal.
After you initialize your control-plane, the kubelet runs normally.</p>
</div>
</blockquote>

<h3 id="コントロールプレーンノードの初期化">コントロールプレーンノードの初期化</h3>

<p>The control-plane node is the machine where the control plane components run, including
etcd (the cluster database) and the API server (which the kubectl CLI
communicates with).</p>

<ol>
<li>(Recommended) If you have plans to upgrade this single control-plane kubeadm cluster
to high availability you should specify the <code>--control-plane-endpoint</code> to set the shared endpoint
for all control-plane nodes. Such an endpoint can be either a DNS name or an IP address of a load-balancer.</li>
<li>Choose a Pod network add-on, and verify whether it requires any arguments to
be passed to kubeadm initialization. Depending on which
third-party provider you choose, you might need to set the <code>--pod-network-cidr</code> to
a provider-specific value. See <a href="#pod-network">Installing a Pod network add-on</a>.</li>
<li>(Optional) Since version 1.14, kubeadm will try to detect the container runtime on Linux
by using a list of well known domain socket paths. To use different container runtime or
if there are more than one installed on the provisioned node, specify the <code>--cri-socket</code>
argument to <code>kubeadm init</code>. See <a href="/ja/docs/setup/production-environment/tools/kubeadm/install-kubeadm/#installing-runtime">Installing runtime</a>.</li>
<li>(Optional) Unless otherwise specified, kubeadm uses the network interface associated
with the default gateway to set the advertise address for this particular control-plane node&rsquo;s API server.
To use a different network interface, specify the <code>--apiserver-advertise-address=&lt;ip-address&gt;</code> argument
to <code>kubeadm init</code>. To deploy an IPv6 Kubernetes cluster using IPv6 addressing, you
must specify an IPv6 address, for example <code>--apiserver-advertise-address=fd00::101</code></li>
<li>(Optional) Run <code>kubeadm config images pull</code> prior to <code>kubeadm init</code> to verify
connectivity to gcr.io registries.</li>
</ol>

<p>To initialize the control-plane node run:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">kubeadm init &lt;args&gt;</code></pre></div>
<h3 id="considerations-about-apiserver-advertise-address-and-controlplaneendpoint">Considerations about apiserver-advertise-address and ControlPlaneEndpoint</h3>

<p>While <code>--apiserver-advertise-address</code> can be used to set the advertise address for this particular
control-plane node&rsquo;s API server, <code>--control-plane-endpoint</code> can be used to set the shared endpoint
for all control-plane nodes.</p>

<p><code>--control-plane-endpoint</code> allows IP addresses but also DNS names that can map to IP addresses.
Please contact your network administrator to evaluate possible solutions with respect to such mapping.</p>

<p>Here is an example mapping:</p>

<pre><code>192.168.0.102 cluster-endpoint
</code></pre>

<p>Where <code>192.168.0.102</code> is the IP address of this node and <code>cluster-endpoint</code> is a custom DNS name that maps to this IP.
This will allow you to pass <code>--control-plane-endpoint=cluster-endpoint</code> to <code>kubeadm init</code> and pass the same DNS name to
<code>kubeadm join</code>. Later you can modify <code>cluster-endpoint</code> to point to the address of your load-balancer in an
high availability scenario.</p>

<p>Turning a single control plane cluster created without <code>--control-plane-endpoint</code> into a highly available cluster
is not supported by kubeadm.</p>

<h3 id="詳細">詳細</h3>

<p>For more information about <code>kubeadm init</code> arguments, see the <a href="/ja/docs/reference/setup-tools/kubeadm/kubeadm/">kubeadm reference guide</a>.</p>

<p>For a complete list of configuration options, see the <a href="/ja/docs/reference/setup-tools/kubeadm/kubeadm-init/#config-file">configuration file documentation</a>.</p>

<p>To customize control plane components, including optional IPv6 assignment to liveness probe for control plane components and etcd server, provide extra arguments to each component as documented in <a href="/ja/docs/setup/production-environment/tools/kubeadm/control-plane-flags/">custom arguments</a>.</p>

<p>To run <code>kubeadm init</code> again, you must first <a href="#tear-down">tear down the cluster</a>.</p>

<p>If you join a node with a different architecture to your cluster, make sure that your deployed DaemonSets
have container image support for this architecture.</p>

<p><code>kubeadm init</code> first runs a series of prechecks to ensure that the machine
is ready to run Kubernetes. These prechecks expose warnings and exit on errors. <code>kubeadm init</code>
then downloads and installs the cluster control plane components. This may take several minutes.
The output should look like:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-none" data-lang="none">[init] Using Kubernetes version: vX.Y.Z
[preflight] Running pre-flight checks
[preflight] Pulling images required for setting up a Kubernetes cluster
[preflight] This might take a minute or two, depending on the speed of your internet connection
[preflight] You can also perform this action in beforehand using &#39;kubeadm config images pull&#39;
[kubelet-start] Writing kubelet environment file with flags to file &#34;/var/lib/kubelet/kubeadm-flags.env&#34;
[kubelet-start] Writing kubelet configuration to file &#34;/var/lib/kubelet/config.yaml&#34;
[kubelet-start] Activating the kubelet service
[certs] Using certificateDir folder &#34;/etc/kubernetes/pki&#34;
[certs] Generating &#34;etcd/ca&#34; certificate and key
[certs] Generating &#34;etcd/server&#34; certificate and key
[certs] etcd/server serving cert is signed for DNS names [kubeadm-cp localhost] and IPs [10.138.0.4 127.0.0.1 ::1]
[certs] Generating &#34;etcd/healthcheck-client&#34; certificate and key
[certs] Generating &#34;etcd/peer&#34; certificate and key
[certs] etcd/peer serving cert is signed for DNS names [kubeadm-cp localhost] and IPs [10.138.0.4 127.0.0.1 ::1]
[certs] Generating &#34;apiserver-etcd-client&#34; certificate and key
[certs] Generating &#34;ca&#34; certificate and key
[certs] Generating &#34;apiserver&#34; certificate and key
[certs] apiserver serving cert is signed for DNS names [kubeadm-cp kubernetes kubernetes.default kubernetes.default.svc kubernetes.default.svc.cluster.local] and IPs [10.96.0.1 10.138.0.4]
[certs] Generating &#34;apiserver-kubelet-client&#34; certificate and key
[certs] Generating &#34;front-proxy-ca&#34; certificate and key
[certs] Generating &#34;front-proxy-client&#34; certificate and key
[certs] Generating &#34;sa&#34; key and public key
[kubeconfig] Using kubeconfig folder &#34;/etc/kubernetes&#34;
[kubeconfig] Writing &#34;admin.conf&#34; kubeconfig file
[kubeconfig] Writing &#34;kubelet.conf&#34; kubeconfig file
[kubeconfig] Writing &#34;controller-manager.conf&#34; kubeconfig file
[kubeconfig] Writing &#34;scheduler.conf&#34; kubeconfig file
[control-plane] Using manifest folder &#34;/etc/kubernetes/manifests&#34;
[control-plane] Creating static Pod manifest for &#34;kube-apiserver&#34;
[control-plane] Creating static Pod manifest for &#34;kube-controller-manager&#34;
[control-plane] Creating static Pod manifest for &#34;kube-scheduler&#34;
[etcd] Creating static Pod manifest for local etcd in &#34;/etc/kubernetes/manifests&#34;
[wait-control-plane] Waiting for the kubelet to boot up the control plane as static Pods from directory &#34;/etc/kubernetes/manifests&#34;. This can take up to 4m0s
[apiclient] All control plane components are healthy after 31.501735 seconds
[uploadconfig] storing the configuration used in ConfigMap &#34;kubeadm-config&#34; in the &#34;kube-system&#34; Namespace
[kubelet] Creating a ConfigMap &#34;kubelet-config-X.Y&#34; in namespace kube-system with the configuration for the kubelets in the cluster
[patchnode] Uploading the CRI Socket information &#34;/var/run/dockershim.sock&#34; to the Node API object &#34;kubeadm-cp&#34; as an annotation
[mark-control-plane] Marking the node kubeadm-cp as control-plane by adding the label &#34;node-role.kubernetes.io/master=&#39;&#39;&#34;
[mark-control-plane] Marking the node kubeadm-cp as control-plane by adding the taints [node-role.kubernetes.io/master:NoSchedule]
[bootstrap-token] Using token: &lt;token&gt;
[bootstrap-token] Configuring bootstrap tokens, cluster-info ConfigMap, RBAC Roles
[bootstraptoken] configured RBAC rules to allow Node Bootstrap tokens to post CSRs in order for nodes to get long term certificate credentials
[bootstraptoken] configured RBAC rules to allow the csrapprover controller automatically approve CSRs from a Node Bootstrap Token
[bootstraptoken] configured RBAC rules to allow certificate rotation for all node client certificates in the cluster
[bootstraptoken] creating the &#34;cluster-info&#34; ConfigMap in the &#34;kube-public&#34; namespace
[addons] Applied essential addon: CoreDNS
[addons] Applied essential addon: kube-proxy

Your Kubernetes control-plane has initialized successfully!

To start using your cluster, you need to run the following as a regular user:

  mkdir -p $HOME/.kube
  sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config
  sudo chown $(id -u):$(id -g) $HOME/.kube/config

You should now deploy a Pod network to the cluster.
Run &#34;kubectl apply -f [podnetwork].yaml&#34; with one of the options listed at:
  /docs/concepts/cluster-administration/addons/

You can now join any number of machines by running the following on each node
as root:

  kubeadm join &lt;control-plane-host&gt;:&lt;control-plane-port&gt; --token &lt;token&gt; --discovery-token-ca-cert-hash sha256:&lt;hash&gt;</code></pre></div>
<p>To make kubectl work for your non-root user, run these commands, which are
also part of the <code>kubeadm init</code> output:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">mkdir -p <span style="color:#b8860b">$HOME</span>/.kube
sudo cp -i /etc/kubernetes/admin.conf <span style="color:#b8860b">$HOME</span>/.kube/config
sudo chown <span style="color:#a2f;font-weight:bold">$(</span>id -u<span style="color:#a2f;font-weight:bold">)</span>:<span style="color:#a2f;font-weight:bold">$(</span>id -g<span style="color:#a2f;font-weight:bold">)</span> <span style="color:#b8860b">$HOME</span>/.kube/config</code></pre></div>
<p>Alternatively, if you are the <code>root</code> user, you can run:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#a2f">export</span> <span style="color:#b8860b">KUBECONFIG</span><span style="color:#666">=</span>/etc/kubernetes/admin.conf</code></pre></div>
<p>Make a record of the <code>kubeadm join</code> command that <code>kubeadm init</code> outputs. You
need this command to <a href="#join-nodes">join nodes to your cluster</a>.</p>

<p>The token is used for mutual authentication between the control-plane node and the joining
nodes. The token included here is secret. Keep it safe, because anyone with this
token can add authenticated nodes to your cluster. These tokens can be listed,
created, and deleted with the <code>kubeadm token</code> command. See the
<a href="/ja/docs/reference/setup-tools/kubeadm/kubeadm-token/">kubeadm reference guide</a>.</p>

<h3 id="pod-network">Podネットワークアドオンのインストール</h3>

<blockquote class="caution">
  <div><strong>注意:</strong> This section contains important information about installation and deployment order. Read it carefully before proceeding.</div>
</blockquote>

<p>You must install a Pod network add-on so that your Pods can communicate with
each other.</p>

<p><strong>The network must be deployed before any applications. Also, CoreDNS will not start up before a network is installed.
kubeadm only supports Container Network Interface (CNI) based networks (and does not support kubenet).</strong></p>

<p>Several projects provide Kubernetes Pod networks using CNI, some of which also
support <a href="/ja/docs/concepts/services-networking/networkpolicies/">Network Policy</a>. See the <a href="/ja/docs/concepts/cluster-administration/addons/">add-ons page</a> for a complete list of available network add-ons.
- IPv6 support was added in <a href="https://github.com/containernetworking/cni/releases/tag/v0.6.0" target="_blank">CNI v0.6.0</a>.
- <a href="https://github.com/containernetworking/plugins/blob/master/plugins/main/bridge/README.md" target="_blank">CNI bridge</a> and <a href="https://github.com/containernetworking/plugins/blob/master/plugins/ipam/host-local/README.md" target="_blank">local-ipam</a> are the only supported IPv6 network plugins in Kubernetes version 1.9.</p>

<p>Note that kubeadm sets up a more secure cluster by default and enforces use of <a href="/ja/docs/reference/access-authn-authz/rbac/">RBAC</a>.
Make sure that your network manifest supports RBAC.</p>

<p>Also, beware, that your Pod network must not overlap with any of the host networks as this can cause issues.
If you find a collision between your network plugin’s preferred Pod network and some of your host networks, you should think of a suitable CIDR replacement and use that during <code>kubeadm init</code> with <code>--pod-network-cidr</code> and as a replacement in your network plugin’s YAML.</p>

<p>You can install a Pod network add-on with the following command on the control-plane node or a node that has the kubeconfig credentials:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">kubectl apply -f &lt;add-on.yaml&gt;</code></pre></div>
<p>You can install only one Pod network per cluster.
Below you can find installation instructions for some popular Pod network plugins:</p>

<div id="tabs-pod-install">
<ul>
    
      
  <li><a href="#tabs-pod-install-0">Calico</a></li>

      
  <li><a href="#tabs-pod-install-1">Cilium</a></li>

      
  <li><a href="#tabs-pod-install-2">Contiv-VPP</a></li>

      
  <li><a href="#tabs-pod-install-3">Flannel</a></li>

      
  <li><a href="#tabs-pod-install-4">Kube-router</a></li>

      
  <li><a href="#tabs-pod-install-5">Weave Net</a></li>

</ul>


<div id="tabs-pod-install-0">
    
        <p>For more information about using Calico, see <a href="https://docs.projectcalico.org/latest/getting-started/kubernetes/" target="_blank">Quickstart for Calico on Kubernetes</a>, <a href="https://docs.projectcalico.org/latest/getting-started/kubernetes/installation/calico" target="_blank">Installing Calico for policy and networking</a>, and other related resources.</p>

<p>For Calico to work correctly, you need to pass <code>--pod-network-cidr=192.168.0.0/16</code> to <code>kubeadm init</code> or update the <code>calico.yml</code> file to match your Pod network. Note that Calico works on <code>amd64</code>, <code>arm64</code>, and <code>ppc64le</code> only.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl apply -f https://docs.projectcalico.org/v3.8/manifests/calico.yaml</code></pre></div>
    

<p></div></p>

<div id="tabs-pod-install-1">
    
        <p>For Cilium to work correctly, you must pass <code>--pod-network-cidr=10.217.0.0/16</code> to <code>kubeadm init</code>.</p>

<p>To deploy Cilium you just need to run:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl create -f https://raw.githubusercontent.com/cilium/cilium/v1.6/install/kubernetes/quick-install.yaml</code></pre></div>
<p>Once all Cilium Pods are marked as <code>READY</code>, you start using your cluster.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl get pods -n kube-system --selector<span style="color:#666">=</span>k8s-app<span style="color:#666">=</span>cilium</code></pre></div>
<p>The output is similar to this:</p>

<pre><code>NAME           READY   STATUS    RESTARTS   AGE
cilium-drxkl   1/1     Running   0          18m
</code></pre>

<p>Cilium can be used as a replacement for kube-proxy, see <a href="https://docs.cilium.io/en/stable/gettingstarted/kubeproxy-free" target="_blank">Kubernetes without kube-proxy</a>.</p>

<p>For more information about using Cilium with Kubernetes, see <a href="https://docs.cilium.io/en/stable/kubernetes/" target="_blank">Kubernetes Install guide for Cilium</a>.</p>

    
</div>

<div id="tabs-pod-install-2">
    
        <p><a href="https://contivpp.io/" target="_blank">Contiv-VPP</a> employs a programmable CNF vSwitch based on <a href="https://fd.io/" target="_blank">FD.io VPP</a>,
offering feature-rich &amp; high-performance cloud-native networking and services.</p>

<p>It implements k8s services and network policies in the user space (on VPP).</p>

<p>Please refer to this installation guide: <a href="https://github.com/contiv/vpp/blob/master/docs/setup/MANUAL_INSTALL.md" target="_blank">Contiv-VPP Manual Installation</a></p>

    
</div>

<div id="tabs-pod-install-3">
    
        <p>For <code>flannel</code> to work correctly, you must pass <code>--pod-network-cidr=10.244.0.0/16</code> to <code>kubeadm init</code>.</p>

<p>Set <code>/proc/sys/net/bridge/bridge-nf-call-iptables</code> to <code>1</code> by running <code>sysctl net.bridge.bridge-nf-call-iptables=1</code>
to pass bridged IPv4 traffic to iptables&rsquo; chains. This is a requirement for some CNI plugins to work, for more information
please see <a href="/ja/docs/concepts/cluster-administration/network-plugins/#network-plugin-requirements">here</a>.</p>

<p>Make sure that your firewall rules allow UDP ports 8285 and 8472 traffic for all hosts participating in the overlay network.
see <a href="https://coreos.com/flannel/docs/latest/troubleshooting.html#firewalls" target="_blank">here
</a>.</p>

<p>Note that <code>flannel</code> works on <code>amd64</code>, <code>arm</code>, <code>arm64</code>, <code>ppc64le</code> and <code>s390x</code> under Linux.
Windows (<code>amd64</code>) is claimed as supported in v0.11.0 but the usage is undocumented.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl apply -f https://raw.githubusercontent.com/coreos/flannel/2140ac876ef134e0ed5af15c65e414cf26827915/Documentation/kube-flannel.yml</code></pre></div>
<p>For more information about <code>flannel</code>, see <a href="https://github.com/coreos/flannel" target="_blank">the CoreOS flannel repository on GitHub
</a>.</p>

    
</div>

<div id="tabs-pod-install-4">
    
        <p>Set <code>/proc/sys/net/bridge/bridge-nf-call-iptables</code> to <code>1</code> by running <code>sysctl net.bridge.bridge-nf-call-iptables=1</code>
to pass bridged IPv4 traffic to iptables&rsquo; chains. This is a requirement for some CNI plugins to work, for more information
please see <a href="/ja/docs/concepts/cluster-administration/network-plugins/#network-plugin-requirements">here</a>.</p>

<p>Kube-router relies on kube-controller-manager to allocate Pod CIDR for the nodes. Therefore, use <code>kubeadm init</code> with the <code>--pod-network-cidr</code> flag.</p>

<p>Kube-router provides Pod networking, network policy, and high-performing IP Virtual Server(IPVS)/Linux Virtual Server(LVS) based service proxy.</p>

<p>For information on setting up Kubernetes cluster with Kube-router using kubeadm, please see official <a href="https://github.com/cloudnativelabs/kube-router/blob/master/docs/kubeadm.md" target="_blank">setup guide</a>.</p>

    
</div>

<div id="tabs-pod-install-5">
    
        <p>Set <code>/proc/sys/net/bridge/bridge-nf-call-iptables</code> to <code>1</code> by running <code>sysctl net.bridge.bridge-nf-call-iptables=1</code>
to pass bridged IPv4 traffic to iptables&rsquo; chains. This is a requirement for some CNI plugins to work, for more information
please see <a href="/ja/docs/concepts/cluster-administration/network-plugins/#network-plugin-requirements">here</a>.</p>

<p>The official Weave Net set-up guide is <a href="https://www.weave.works/docs/net/latest/kube-addon/" target="_blank">here</a>.</p>

<p>Weave Net works on <code>amd64</code>, <code>arm</code>, <code>arm64</code> and <code>ppc64le</code> without any extra action required.
Weave Net sets hairpin mode by default. This allows Pods to access themselves via their Service IP address
if they don&rsquo;t know their PodIP.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl apply -f <span style="color:#b44">&#34;https://cloud.weave.works/k8s/net?k8s-version=</span><span style="color:#a2f;font-weight:bold">$(</span>kubectl version | base64 | tr -d <span style="color:#b44">&#39;\n&#39;</span><span style="color:#a2f;font-weight:bold">)</span><span style="color:#b44">&#34;</span></code></pre></div>
    

<p></div></p>

<p></div></p>

<script>$(function(){$("#tabs-pod-install").tabs();});</script>

<p>Once a Pod network has been installed, you can confirm that it is working by
checking that the CoreDNS Pod is Running in the output of <code>kubectl get pods --all-namespaces</code>.
And once the CoreDNS Pod is up and running, you can continue by joining your nodes.</p>

<p>If your network is not working or CoreDNS is not in the Running state, checkout our <a href="/ja/docs/setup/production-environment/tools/kubeadm/troubleshooting-kubeadm/">troubleshooting docs</a>.</p>

<h3 id="コントロールプレーンノードの隔離">コントロールプレーンノードの隔離</h3>

<p>By default, your cluster will not schedule Pods on the control-plane node for security
reasons. If you want to be able to schedule Pods on the control-plane node, e.g. for a
single-machine Kubernetes cluster for development, run:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">kubectl taint nodes --all node-role.kubernetes.io/master-</code></pre></div>
<p>With output looking something like:</p>

<pre><code>node &quot;test-01&quot; untainted
taint &quot;node-role.kubernetes.io/master:&quot; not found
taint &quot;node-role.kubernetes.io/master:&quot; not found
</code></pre>

<p>This will remove the <code>node-role.kubernetes.io/master</code> taint from any nodes that
have it, including the control-plane node, meaning that the scheduler will then be able
to schedule Pods everywhere.</p>

<h3 id="join-nodes">ノードの追加</h3>

<p>The nodes are where your workloads (containers and Pods, etc) run. To add new nodes to your cluster do the following for each machine:</p>

<ul>
<li>SSH to the machine</li>
<li>Become root (e.g. <code>sudo su -</code>)</li>

<li><p>Run the command that was output by <code>kubeadm init</code>. For example:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">kubeadm join --token &lt;token&gt; &lt;control-plane-host&gt;:&lt;control-plane-port&gt; --discovery-token-ca-cert-hash sha256:&lt;hash&gt;</code></pre></div></li>
</ul>

<p>If you do not have the token, you can get it by running the following command on the control-plane node:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">kubeadm token list</code></pre></div>
<p>The output is similar to this:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-console" data-lang="console">TOKEN                    TTL  EXPIRES              USAGES           DESCRIPTION            EXTRA GROUPS
8ewj1p.9r9hcjoqgajrj4gi  23h  2018-06-12T02:51:28Z authentication,  The default bootstrap  system:
                                                   signing          token generated by     bootstrappers:
                                                                    &#39;kubeadm init&#39;.        kubeadm:
                                                                                           default-node-token</code></pre></div>
<p>By default, tokens expire after 24 hours. If you are joining a node to the cluster after the current token has expired,
you can create a new token by running the following command on the control-plane node:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">kubeadm token create</code></pre></div>
<p>The output is similar to this:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-console" data-lang="console">5didvk.d09sbcov8ph2amjw</code></pre></div>
<p>If you don&rsquo;t have the value of <code>--discovery-token-ca-cert-hash</code>, you can get it by running the following command chain on the control-plane node:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">openssl x509 -pubkey -in /etc/kubernetes/pki/ca.crt | openssl rsa -pubin -outform der <span style="color:#666">2</span>&gt;/dev/null | <span style="color:#b62;font-weight:bold">\
</span><span style="color:#b62;font-weight:bold"></span>   openssl dgst -sha256 -hex | sed <span style="color:#b44">&#39;s/^.* //&#39;</span></code></pre></div>
<p>The output is similar to this:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-console" data-lang="console">8cb2de97839780a412b93877f8507ad6c94f73add17d5d7058e91741c9d5ec78</code></pre></div>
<blockquote class="note">
  <div><strong>備考:</strong> To specify an IPv6 tuple for <code>&lt;control-plane-host&gt;:&lt;control-plane-ip&gt;</code>, IPv6 address must be enclosed in square brackets, for example: <code>[fd00::101]:2073</code>.</div>
</blockquote>

<p>The output should look something like:</p>

<pre><code>[preflight] Running pre-flight checks

... (log output of join workflow) ...

Node join complete:
* Certificate signing request sent to control-plane and response
  received.
* Kubelet informed of new secure connection details.

Run 'kubectl get nodes' on control-plane to see this machine join.
</code></pre>

<p>A few seconds later, you should notice this node in the output from <code>kubectl get
nodes</code> when run on the control-plane node.</p>

<h3 id="任意-コントロールプレーンノード以外のマシンからのクラスター操作">(任意)コントロールプレーンノード以外のマシンからのクラスター操作</h3>

<p>In order to get a kubectl on some other computer (e.g. laptop) to talk to your
cluster, you need to copy the administrator kubeconfig file from your control-plane node
to your workstation like this:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">scp root@&lt;control-plane-host&gt;:/etc/kubernetes/admin.conf .
kubectl --kubeconfig ./admin.conf get nodes</code></pre></div>
<blockquote class="note">
  <div><strong>備考:</strong> <p>The example above assumes SSH access is enabled for root. If that is not the
case, you can copy the <code>admin.conf</code> file to be accessible by some other user
and <code>scp</code> using that other user instead.</p>

<p>The <code>admin.conf</code> file gives the user <em>superuser</em> privileges over the cluster.
This file should be used sparingly. For normal users, it&rsquo;s recommended to
generate an unique credential to which you whitelist privileges. You can do
this with the <code>kubeadm alpha kubeconfig user --client-name &lt;CN&gt;</code>
command. That command will print out a KubeConfig file to STDOUT which you
should save to a file and distribute to your user. After that, whitelist
privileges by using <code>kubectl create (cluster)rolebinding</code>.</p>
</div>
</blockquote>

<h3 id="任意-apiサーバーをlocalhostへプロキシ">(任意) APIサーバーをlocalhostへプロキシ</h3>

<p>If you want to connect to the API Server from outside the cluster you can use
<code>kubectl proxy</code>:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">scp root@&lt;control-plane-host&gt;:/etc/kubernetes/admin.conf .
kubectl --kubeconfig ./admin.conf proxy</code></pre></div>
<p>You can now access the API Server locally at <code>http://localhost:8001/api/v1</code></p>

<h2 id="tear-down">クラスターの削除</h2>

<p>To undo what kubeadm did, you should first <a href="/ja/docs/reference/generated/kubectl/kubectl-commands#drain">drain the
node</a> and make
sure that the node is empty before shutting it down.</p>

<p>Talking to the control-plane node with the appropriate credentials, run:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">kubectl drain &lt;node name&gt; --delete-local-data --force --ignore-daemonsets
kubectl delete node &lt;node name&gt;</code></pre></div>
<p>Then, on the node being removed, reset all kubeadm installed state:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">kubeadm reset</code></pre></div>
<p>The reset process does not reset or clean up iptables rules or IPVS tables. If you wish to reset iptables, you must do so manually:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">iptables -F <span style="color:#666">&amp;&amp;</span> iptables -t nat -F <span style="color:#666">&amp;&amp;</span> iptables -t mangle -F <span style="color:#666">&amp;&amp;</span> iptables -X</code></pre></div>
<p>If you want to reset the IPVS tables, you must run the following command:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">ipvsadm -C</code></pre></div>
<p>If you wish to start over simply run <code>kubeadm init</code> or <code>kubeadm join</code> with the
appropriate arguments.</p>

<p>More options and information about the
<a href="/ja/docs/reference/setup-tools/kubeadm/kubeadm-reset/"><code>kubeadm reset command</code></a>.</p>

<h2 id="lifecycle">クラスターの維持</h2>

<p>Instructions for maintaining kubeadm clusters (e.g. upgrades,downgrades, etc.) can be found <a href="/ja/docs/tasks/administer-cluster/kubeadm">here.</a></p>

<h2 id="other-addons">他アドオンの参照</h2>

<p>See the <a href="/ja/docs/concepts/cluster-administration/addons/">list of add-ons</a> to explore other add-ons,
including tools for logging, monitoring, network policy, visualization &amp;
control of your Kubernetes cluster.</p>

<h2 id="whats-next">次の手順</h2>

<ul>
<li>Verify that your cluster is running properly with <a href="https://github.com/heptio/sonobuoy" target="_blank">Sonobuoy</a></li>
<li>Learn about kubeadm&rsquo;s advanced usage in the <a href="/ja/docs/reference/setup-tools/kubeadm/kubeadm">kubeadm reference documentation</a></li>
<li>Learn more about Kubernetes <a href="/ja/docs/concepts/">concepts</a> and <a href="/ja/docs/user-guide/kubectl-overview/"><code>kubectl</code></a>.</li>
<li>Configure log rotation. You can use <strong>logrotate</strong> for that. When using Docker, you can specify log rotation options for Docker daemon, for example <code>--log-driver=json-file --log-opt=max-size=10m --log-opt=max-file=5</code>. See <a href="https://docs.docker.com/engine/admin/" target="_blank">Configure and troubleshoot the Docker daemon</a> for more details.</li>
<li>See the <a href="/docs/concepts/cluster-administration/networking/">Cluster Networking</a> page for a bigger list
of Pod network add-ons.</li>
</ul>

<h2 id="feedback">フィードバック</h2>

<ul>
<li>For bugs, visit <a href="https://github.com/kubernetes/kubeadm/issues" target="_blank">kubeadm GitHub issue tracker</a></li>
<li>For support, visit kubeadm Slack Channel:
<a href="https://kubernetes.slack.com/messages/kubeadm/" target="_blank">#kubeadm</a></li>
<li>General SIG Cluster Lifecycle Development Slack Channel:
<a href="https://kubernetes.slack.com/messages/sig-cluster-lifecycle/" target="_blank">#sig-cluster-lifecycle</a></li>
<li>SIG Cluster Lifecycle <a href="#TODO">SIG information</a></li>
<li>SIG Cluster Lifecycle Mailing List:
<a href="https://groups.google.com/forum/#!forum/kubernetes-sig-cluster-lifecycle" target="_blank">kubernetes-sig-cluster-lifecycle</a></li>
</ul>

<h2 id="version-skew-policy">バージョン互換ポリシー</h2>

<p>The kubeadm CLI tool of version vX.Y may deploy clusters with a control plane of version vX.Y or vX.(Y-1).
kubeadm CLI vX.Y can also upgrade an existing kubeadm-created cluster of version vX.(Y-1).</p>

<p>Due to that we can&rsquo;t see into the future, kubeadm CLI vX.Y may or may not be able to deploy vX.(Y+1) clusters.</p>

<p>Example: kubeadm v1.8 can deploy both v1.7 and v1.8 clusters and upgrade v1.7 kubeadm-created clusters to
v1.8.</p>

<p>These resources provide more information on supported version skew between kubelets and the control plane, and other Kubernetes components:</p>

<ul>
<li>Kubernetes <a href="/ja/docs/setup/release/version-skew-policy/">version and version-skew policy</a></li>
<li>Kubeadm-specific <a href="/ja/docs/setup/production-environment/tools/kubeadm/install-kubeadm/#installing-kubeadm-kubelet-and-kubectl">installation guide</a></li>
</ul>

<h2 id="kubeadmは様々なプラットフォームで動く">kubeadmは様々なプラットフォームで動く</h2>

<p>kubeadm deb/rpm packages and binaries are built for amd64, arm (32-bit), arm64, ppc64le, and s390x
following the <a href="https://github.com/kubernetes/community/blob/master/contributors/design-proposals/multi-platform.md" target="_blank">multi-platform
proposal</a>.</p>

<p>Multiplatform container images for the control plane and addons are also supported since v1.12.</p>

<p>Only some of the network providers offer solutions for all platforms. Please consult the list of
network providers above or the documentation from each provider to figure out whether the provider
supports your chosen platform.</p>

<h2 id="limitations">制限事項</h2>

<p>The cluster created here has a single control-plane node, with a single etcd database
running on it. This means that if the control-plane node fails, your cluster may lose
data and may need to be recreated from scratch.</p>

<p>Workarounds:</p>

<ul>
<li><p>Regularly <a href="https://coreos.com/etcd/docs/latest/admin_guide.html" target="_blank">back up etcd</a>. The
etcd data directory configured by kubeadm is at <code>/var/lib/etcd</code> on the control-plane node.</p></li>

<li><p>Use multiple control-plane nodes by completing the
<a href="/ja/docs/setup/independent/ha-topology">HA setup</a> instead.</p></li>
</ul>

<h2 id="troubleshooting">トラブルシューティング</h2>

<p>If you are running into difficulties with kubeadm, please consult our <a href="/ja/docs/setup/production-environment/tools/kubeadm/troubleshooting-kubeadm/">troubleshooting docs</a>.</p>




















    
            
  <h2>フィードバック</h2>
  <p class="feedback--prompt">このページは役に立ちましたか？ </p>
  <button class="button feedback--yes">はい</button>
  <button class="button feedback--no">いいえ</button>
  <p class="feedback--response feedback--response__hidden">
    Thanks for the feedback. If you have a specific, answerable question about how to use Kubernetes, ask it on
    <a target="_blank" rel="noopener"
      href="https://stackoverflow.com/questions/tagged/kubernetes">
      Stack Overflow</a>.
    Open an issue in the GitHub repo if you want to 
    <a class="feedback--link" target="_blank" rel="noopener"
      href="https://github.com/kubernetes/website/issues/new?title=Issue%20with%20k8s.io">
      問題を報告する</a>
    or
    <a class="feedback--link" target="_blank" rel="noopener"
      href="https://github.com/kubernetes/website/issues/new?title=Improvement%20for%20k8s.io">
      改善を提案</a>.
  </p>
  <script>
    const yes = document.querySelector('.feedback--yes');
    const no = document.querySelector('.feedback--no');
    document.querySelectorAll('.feedback--link').forEach(link => {
      link.href = link.href + window.location.pathname;
    });
    const sendFeedback = (value) => {
      if (!gtag) { console.log('!gtag'); }
      gtag('event', 'click', {
        'event_category': 'Helpful',
        'event_label': window.location.pathname,
        value
      });
    };
    const disableButtons = () => {
      yes.disabled = true;
      yes.classList.add('feedback--button__disabled');
      no.disabled = true;
      no.classList.add('feedback--button__disabled');
    };
    yes.addEventListener('click', () => {
      sendFeedback(1);
      disableButtons();
      document.querySelector('.feedback--response').classList.remove('feedback--response__hidden');
    });
    no.addEventListener('click', () => {
      sendFeedback(0);
      disableButtons();
      document.querySelector('.feedback--response').classList.remove('feedback--response__hidden');
    });
  </script>


    
            <div id="pre-footer"> 
  <hr />

  <div class="issue-button-container">
    <p><a href=""><img src="https://kubernetes-site.appspot.com/UA-36037335-10/GitHub/docs/setup/production-environment/tools/kubeadm/create-cluster-kubeadm.md?pixel" alt="Analytics" /></a></p>
    
    
    <script type="text/javascript">
    PDRTJS_settings_8345992 = {
    "id" : "8345992",
    "unique_id" : "\/ja\/docs\/setup\/production-environment\/tools\/kubeadm\/create-cluster-kubeadm\/",
    "title" : "kubeadmを使用したシングルコントロールプレーンクラスターの作成",
    "permalink" : "https:\/\/kubernetes.io\/ja\/docs\/setup\/production-environment\/tools\/kubeadm\/create-cluster-kubeadm\/"
    };
    (function(d,c,j){if(!document.getElementById(j)){var pd=d.createElement(c),s;pd.id=j;pd.src=('https:'==document.location.protocol)?'https://polldaddy.com/js/rating/rating.js':'http://i0.poll.fm/js/rating/rating.js';s=document.getElementsByTagName(c)[0];s.parentNode.insertBefore(pd,s);}}(document,'script','pd-rating-js'));
    </script>
    <a href="" onclick="window.open('https://github.com/kubernetes/website/issues/new?template=bug-report.md&title=Issue%20with%20' +
    'k8s.io'+window.location.pathname)" class="button issue">Issue作成</a>
    
    
    
    <a href="https://github.com/kubernetes/website/edit/master/content/ja/docs/setup/production-environment/tools/kubeadm/create-cluster-kubeadm.md" class="button issue">ページ編集</a>
    
  </div>
  

  <div id="lastedit" class="lastedit issue-button-container">
    ページの最終更新 February 18, 2020 at 4:41 PM PST by
    <a href="https://github.com/kubernetes/website/commit/004bcd1ff8f6d14033651e58b3a98f587e4cf60c/">Second Japanese l10n work for release-1.16 (#19157)</a> (<a href="https://github.com/kubernetes/website/commits/master/content/en/docs/setup/production-environment/tools/kubeadm/create-cluster-kubeadm.md">ページ履歴</a>)
  </div>
  
</div>

          </div>
        </section>
    </main>
		<footer>
    <div class="light-text main-section">
        <nav>
            
            
            
            <a href="/ja/docs/home/">ホーム</a>
            
            
            
            
            
            
            
            
            
            <a href="/ja/case-studies/">ケーススタディ</a>
            
        </nav>
        <div class="social" role="region" aria-label="Social hyperlinks">
            <div>
                <a href="https://twitter.com/kubernetesio" class="twitter"><span>Twitter</span></a>
                <a href="https://github.com/kubernetes/kubernetes" class="github"><span>GitHub</span></a>
                <a href="https://slack.k8s.io/" class="slack"><span>Slack</span></a>
            </div>
            <div>
                <a href="https://stackoverflow.com/questions/tagged/kubernetes" class="stack-overflow"><span>Stack Overflow</span></a>
                <a href="https://www.youtube.com/kubernetescommunity" class="youtube"><span>YouTube</span></a>
                <a href="https://discuss.kubernetes.io" class="mailing-list"><span>フォーラム</span></a>
                <a href="https://calendar.google.com/calendar/embed?src=nt2tcnbtbied3l6gi2h29slvc0%40group.calendar.google.com" class="calendar"><span>イベントカレンダー</span></a>
            </div>
            <div>
                
                <a href="https://git.k8s.io/community/contributors/guide" class="button">コントリビュート</a>
            </div>
        </div>
        <div class="miceType center">
            &copy; 2023 The Kubernetes Authors | Documentation Distributed under <a href="https://git.k8s.io/website/LICENSE" class="light-text">CC BY 4.0</a></a>
        </div>
        <div class="miceType center">
            Copyright &copy; 2023 The Linux Foundation &reg;. All rights reserved. The Linux Foundation has registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our <a href="https://www.linuxfoundation.org/trademark-usage" class="light-text">Trademark Usage page</a>
        </div>
        <div class="miceType center">
            ICP license: 京ICP备17074266号-3
        </div>
    </div>
</footer>

		<button class="flyout-button" onclick="kub.toggleToc()" aria-label="Toggle table of contents visibility"></button>

<script>

(function () {
    window.addEventListener('DOMContentLoaded', init)

        
        function init() {
            window.removeEventListener('DOMContentLoaded', init)
                hideNav()
        }

    function hideNav(toc){
        if (!toc) toc = document.querySelector('#docsToc')
        if (!toc) return
            var container = toc.querySelector('.container')

                
                if (container) {
                    if (container.childElementCount === 0 || toc.querySelectorAll('a.item').length === 1) {
                        toc.style.display = 'none'
                            document.getElementById('docsContent').style.width = '100%'
                    }
                } else {
                    requestAnimationFrame(function () {
                        hideNav(toc)
                    })
                }
    }
})();
</script>



    <script language="application/javascript">
      
      (function addHeadingLinks(){
        var article = document.getElementById('docsContent');
        var headings = article.querySelectorAll('h1, h2, h3, h4, h5, h6');
        headings.forEach(function(heading){
          if(heading.id){
            var a = document.createElement('a');
            a.innerHTML = heading.innerHTML;
            a.href = '#'+heading.id;
            a.classList.add('inpage_heading');
            heading.innerHTML = '';
            heading.appendChild(a);
          }
        });
      })();
    </script>
	</body>
</html>
