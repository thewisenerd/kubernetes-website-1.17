<!DOCTYPE html>
<html id="docs" lang="ja" class="">
	<head>
	

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-36037335-10"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-36037335-10');
</script>
<meta charset="utf-8">
<title>kubeadmのインストール - Kubernetes</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="theme-color" content="#326ce5">
<link rel="shortcut icon" type="image/png" href="/images/favicon.png">









<link rel="stylesheet" href="/css/style.b7b8403eb5b1fddd0a2da2a8383d5b53e6ef81c23e4b0e292e6103bd91f9502d.css" integrity="sha256-t7hAPrWx/d0KLaKoOD1bU&#43;bvgcI&#43;Sw4pLmEDvZH5UC0=">


<link rel="stylesheet" href="/css/base_fonts.css">
<link rel="stylesheet" href="/css/jquery-ui.min.css">
<link rel="stylesheet" href="/css/callouts.css">
<link rel="stylesheet" href="/css/custom-jekyll/tags.css">



<meta name="description" content="">
<meta property="og:description" content="">
<meta name="twitter:description" content="">
<meta property="og:url" content="https://kubernetes.io/ja/docs/setup/production-environment/tools/kubeadm/install-kubeadm/">
<meta property="og:title" content="kubeadmのインストール">
<meta name="twitter:title" content="kubeadmのインストール">
<meta name="twitter:image" content="https://kubernetes.io/images/favicon.png" />

<meta name="twitter:image:alt" content="Kubernetes">

<meta property="og:image" content="/images/kubernetes-horizontal-color.png">

<meta property="og:type" content="article">
<script src="/js/anchor-4.1.1.min.js"></script>
<script src="/js/jquery-3.2.1.min.js"></script>
<script src="/js/jquery-ui-1.12.1.min.js"></script>
<script src="/js/bootstrap-4.3.1.min.js"></script>
<script src="/js/sweetalert-2.1.2.min.js"></script>

<script src="/js/script.js"></script>
<script src="/js/custom-jekyll/tags.js"></script>


	</head>
	<body>
		<div id="cellophane" onclick="kub.toggleMenu()"></div>

<header>
    <a href="/ja/" class="logo" title="プロダクショングレードのコンテナ管理基盤 - Kubernetes" aria-label="Kubernetes website"></a>

    <div class="nav-buttons" data-auto-burger="primary">
        <ul class="global-nav">
            
            
            <li><a href="/ja/docs/" class="active">ドキュメント</a></li>
            
            
            
            
            
            
            
            
            
            <li><a href="/ja/case-studies/">ケーススタディ</a></li>
            
            
            
             <li>
                <a href="#">
                    日本語 Japanese <span class="ui-icon ui-icon-carat-1-s"></span>
                </a>
                <ul>
                
                    <li><a href="/docs/setup/production-environment/tools/kubeadm/install-kubeadm/">English</a></li>
                
                    <li><a href="/zh/docs/setup/production-environment/tools/kubeadm/install-kubeadm/">中文 Chinese</a></li>
                
                </ul>
            </li>

            <li>
                <a href="#">
                    v1.17 <span class="ui-icon ui-icon-carat-1-s"></span>
                </a>
                <ul>
                
                    <li><a href="https://kubernetes.io/ja/docs/setup/production-environment/tools/kubeadm/install-kubeadm/">v1.21</a></li>
                
                    <li><a href="https://v1-20.docs.kubernetes.io/ja/docs/setup/production-environment/tools/kubeadm/install-kubeadm/">v1.20</a></li>
                
                    <li><a href="https://v1-19.docs.kubernetes.io/ja/docs/setup/production-environment/tools/kubeadm/install-kubeadm/">v1.19</a></li>
                
                    <li><a href="https://v1-18.docs.kubernetes.io/ja/docs/setup/production-environment/tools/kubeadm/install-kubeadm/">v1.18</a></li>
                
                    <li><a href="https://v1-17.docs.kubernetes.io/ja/docs/setup/production-environment/tools/kubeadm/install-kubeadm/">v1.17</a></li>
                
                </ul>
            </li>
        </ul>
        
        <a href="/ja/docs/tutorials/kubernetes-basics/" class="button" id="tryKubernetes" data-auto-burger-exclude>Kubernetesの基本を学ぶ</a>
        

        <button id="hamburger" onclick="kub.toggleMenu()" data-auto-burger-exclude><div></div></button>
    </div>

    <nav id="mainNav">
        <div class="main-section" data-auto-burger="primary">
         
           <div class="nav-box">
            <h3><a href="/ja/docs/tutorials/hello-minikube/">Get Started</a></h3>
           <p>手を動かす準備はできていますか？本チュートリアルでは、Node.jsを使った簡単な"Hello World"を実行するKubernetesクラスタをビルドします。</p>

            </div>
         
           <div class="nav-box">
            <h3><a href="/ja/docs/home/">ドキュメント</a></h3>
           <p>チュートリアル、サンプルやドキュメントのリファレンスを使って Kubernetes の利用方法を学んでください。あなたは<a href="/editdocs/" data-auto-burger-exclude>ドキュメントへコントリビュートをする</a>こともできます!</p>

            </div>
         
        </div>
        <div class="main-section" data-auto-burger="primary">
            <div class="left">
                <h5 class="github-invite">Kubernetesのコードを編集することに興味がありますか？</h5>
                <a href="https://github.com/kubernetes/kubernetes" class="button" data-auto-burger-exclude>GitHubで参照する</a>
            </div>

            <div class="right">
                <h5 class="github-invite">コミュニティを探す</h5>
                <div class="social">
                    <a href="https://twitter.com/kubernetesio" class="twitter"><span>Twitter</span></a>
                    <a href="https://github.com/kubernetes/kubernetes" class="github"><span>GitHub</span></a>
                    <a href="http://slack.k8s.io/" class="slack"><span>Slack Slack</span></a>
                    <a href="https://stackoverflow.com/questions/tagged/kubernetes" class="stack-overflow"><span>Stack Overflow</span></a>
                    <a href="https://www.youtube.com/kubernetescommunity" class="youtube"><span>YouTube</span></a>
                    <a href="https://discuss.kubernetes.io" class="mailing-list"><span>フォーラム</span></a>
                    <a href="https://calendar.google.com/calendar/embed?src=nt2tcnbtbied3l6gi2h29slvc0%40group.calendar.google.com" class="calendar"><span>イベントカレンダー</span></a>
                </div>
            </div>
            <div class="clear" style="clear: both"></div>
        </div>
    </nav>
</header>

		
		
		<section id="hero" class="light-text no-sub">
			







<h1>はじめに</h1>
<h5></h5>












<div id="vendorStrip" class="light-text">
	<ul>
		
		
		<li><a href="/ja/docs/home/">ホーム</a></li>
		
		
		<li><a href="/ja/docs/setup/" class="YAH">はじめに</a></li>
		
		
		<li><a href="/ja/docs/concepts/">コンセプト</a></li>
		
		
		<li><a href="/ja/docs/tasks/">タスク</a></li>
		
		
		<li><a href="/ja/docs/tutorials/">チュートリアル</a></li>
		
		
		<li><a href="/ja/docs/reference/">リファレンス</a></li>
		
		
		<li><a href="/ja/docs/contribute/">貢献</a></li>
		
	</ul>
	<form id="searchBox" action="/docs/search/" role="search">
		<input type="text" id="search" name="q" placeholder="検索" aria-label="Search">
	</form>
</div>

		</section>
		
    
		
<section id="deprecationWarning">
  <main>
    <div class="content deprecation-warning">
      <h3>
	 Kubernetes v1.17
	  のドキュメントは積極的にメンテナンスされていません。現在表示されているバージョンはスナップショットです。最新のドキュメントはこちらです: 
	 <a href="https://kubernetes.io/docs/home/">最新バージョン</a>
      </h3>
    </div>
  </main>
</section>


    <main>
        <section id="encyclopedia">
          
<div id="docsToc">
     <div class="pi-accordion">
    	
        
        
        
        
        
         
             
                 
             
         
             
                 
                          
                          
                 
             
         
             
         
             
         
             
         
             
         
             
         
         
        
        <a class="item" data-title="はじめに" href="/ja/docs/setup/"></a>

	
	
			
			
			
			
			
		
	
	
	
		
			
<div class="item" data-title="リリースノート及びバージョンスキュー">
	<div class="container">
		
		
	
	
			
			
			
			
			
		
	
	
	
		
			

<a class="item" target="_blank" data-title="v1.17 Release Notes <small>(EN)</small>" href="/docs/setup/release/notes/"></a>

		
	
		
			

<a class="item" data-title="Kubernetesバージョンとバージョンスキューサポートポリシー" href="/ja/docs/setup/release/version-skew-policy/"></a>

		
	
		
			

<a class="item" data-title="リリースのビルド" href="/ja/docs/setup/release/building-from-source/"></a>

		
	

	</div>
</div>

		
	
		
			
<div class="item" data-title="環境について学ぶ">
	<div class="container">
		
		
	
	
			
			
			
			
			
		
	
	
	
		
			

<a class="item" target="_blank" data-title="Installing Kubernetes with Kind <small>(EN)</small>" href="/docs/setup/learning-environment/kind/"></a>

		
	
		
			

<a class="item" data-title="Minikubeを使用してローカル環境でKubernetesを動かす" href="/ja/docs/setup/learning-environment/minikube/"></a>

		
	

	</div>
</div>

		
	
		
			
<div class="item" data-title="プロダクション環境">
	<div class="container">
		
		
	
	
			
			
			
			
			
		
	
	
	
		
			

<a class="item" data-title="CRIのインストール" href="/ja/docs/setup/production-environment/container-runtimes/"></a>

		
	
		
			
<div class="item" data-title="Kubernetesをデプロイツールでインストールする">
	<div class="container">
		
		
	
	
			
			
			
			
			
		
	
	
	
		
			
<div class="item" data-title="kubeadmを使ってクラスターを構築する">
	<div class="container">
		
		
	
	
			
			
			
			
			
		
	
	
	
		
			

<a class="item" data-title="kubeadmのインストール" href="/ja/docs/setup/production-environment/tools/kubeadm/install-kubeadm/"></a>

		
	
		
			

<a class="item" data-title="kubeadmを使用したシングルコントロールプレーンクラスターの作成" href="/ja/docs/setup/production-environment/tools/kubeadm/create-cluster-kubeadm/"></a>

		
	
		
			

<a class="item" data-title="kubeadmを使ったコントロールプレーンの設定のカスタマイズ" href="/ja/docs/setup/production-environment/tools/kubeadm/control-plane-flags/"></a>

		
	
		
			

<a class="item" data-title="Options for Highly Available topology" href="/ja/docs/setup/production-environment/tools/kubeadm/ha-topology/"></a>

		
	
		
			

<a class="item" data-title="kubeadmを使用した高可用性クラスターの作成" href="/ja/docs/setup/production-environment/tools/kubeadm/high-availability/"></a>

		
	
		
			

<a class="item" data-title="kubeadmを使用した高可用性etcdクラスターの作成" href="/ja/docs/setup/production-environment/tools/kubeadm/setup-ha-etcd-with-kubeadm/"></a>

		
	
		
			

<a class="item" data-title="kubeadmを使用したクラスター内の各kubeletの設定" href="/ja/docs/setup/production-environment/tools/kubeadm/kubelet-integration/"></a>

		
	
		
			

<a class="item" data-title="kubeadmのトラブルシューティング" href="/ja/docs/setup/production-environment/tools/kubeadm/troubleshooting-kubeadm/"></a>

		
	
		
			

<a class="item" data-title="Configuring your kubernetes cluster to self-host the control plane" href="/ja/docs/setup/production-environment/tools/kubeadm/self-hosting/"></a>

		
	

	</div>
</div>

		
	
		
			

<a class="item" data-title="kopsを使ったAWS上でのKubernetesのインストール" href="/ja/docs/setup/production-environment/tools/kops/"></a>

		
	
		
			

<a class="item" data-title="KRIBを使用してDigital Rebar Provision (DRP)と共にKubernetesをインストールする" href="/ja/docs/setup/production-environment/tools/krib/"></a>

		
	
		
			

<a class="item" data-title="kubesprayを使ったオンプレミス/クラウドプロバイダへのKubernetesのインストール" href="/ja/docs/setup/production-environment/tools/kubespray/"></a>

		
	

	</div>
</div>

		
	
		
			
<div class="item" data-title="ターンキークラウドソリューション">
	<div class="container">
		
		
	
	
			
			
			
			
			
		
	
	
	
		
			

<a class="item" data-title="Alibaba CloudでKubernetesを動かす" href="/ja/docs/setup/production-environment/turnkey/alibaba-cloud/"></a>

		
	
		
			

<a class="item" data-title="AWS EC2上でKubernetesを動かす" href="/ja/docs/setup/production-environment/turnkey/aws/"></a>

		
	
		
			

<a class="item" data-title="Azure 上で Kubernetes を動かす" href="/ja/docs/setup/production-environment/turnkey/azure/"></a>

		
	
		
			

<a class="item" data-title="CenturyLink Cloud上でKubernetesを動かす" href="/ja/docs/setup/production-environment/turnkey/clc/"></a>

		
	
		
			

<a class="item" data-title="Google Compute Engine上でKubernetesを動かす" href="/ja/docs/setup/production-environment/turnkey/gce/"></a>

		
	
		
			

<a class="item" data-title="IBM Cloud Privateを使ってマルチクラウドでKubernetesを動かす" href="/ja/docs/setup/production-environment/turnkey/icp/"></a>

		
	
		
			

<a class="item" target="_blank" data-title="Running Kubernetes on Tencent Kubernetes Engine <small>(EN)</small>" href="/docs/setup/production-environment/turnkey/tencent/"></a>

		
	
		
			

<a class="item" data-title="Stackpoint.ioを利用して複数のクラウド上でKubernetesを動かす" href="/ja/docs/setup/production-environment/turnkey/stackpoint/"></a>

		
	

	</div>
</div>

		
	
		
			
<div class="item" data-title="Windows in Kubernetes">
	<div class="container">
		
		
	
	
			
			
			
			
			
		
	
	
	
		
			

<a class="item" data-title="Intro to Windows support in Kubernetes" href="/ja/docs/setup/production-environment/windows/intro-windows-in-kubernetes/"></a>

		
	
		
			

<a class="item" data-title="Guide for adding Windows Nodes in Kubernetes" href="/ja/docs/setup/production-environment/windows/user-guide-windows-nodes/"></a>

		
	
		
			

<a class="item" data-title="Guide for scheduling Windows containers in Kubernetes" href="/ja/docs/setup/production-environment/windows/user-guide-windows-containers/"></a>

		
	

	</div>
</div>

		
	
		
			
<div class="item" data-title="オンプレミスVM">
	<div class="container">
		
		
	
	
			
			
			
			
			
		
	
	
	
		
			

<a class="item" data-title="Cloudstack" href="/ja/docs/setup/production-environment/on-premises-vm/cloudstack/"></a>

		
	
		
			

<a class="item" data-title="DC/OS上のKubernetes" href="/ja/docs/setup/production-environment/on-premises-vm/dcos/"></a>

		
	
		
			

<a class="item" data-title="oVirt" href="/ja/docs/setup/production-environment/on-premises-vm/ovirt/"></a>

		
	

	</div>
</div>

		
	

	</div>
</div>

		
	
		
			
<div class="item" data-title="ベストプラクティス">
	<div class="container">
		
		
	
	
			
			
			
			
			
		
	
	
	
		
			

<a class="item" data-title="複数のゾーンで動かす" href="/ja/docs/setup/best-practices/multiple-zones/"></a>

		
	
		
			

<a class="item" data-title="大規模クラスタの構築" href="/ja/docs/setup/best-practices/cluster-large/"></a>

		
	
		
			

<a class="item" data-title="ノードのセットアップの検証" href="/ja/docs/setup/best-practices/node-conformance/"></a>

		
	
		
			

<a class="item" data-title="PKI証明書とその要件" href="/ja/docs/setup/best-practices/certificates/"></a>

		
	

	</div>
</div>

		
	





     </div> 
    <button class="push-menu-close-button" onclick="kub.toggleToc()"></button>
</div> 


          <div id="docsContent">
            

<p>
  <a href="https://github.com/kubernetes/website/edit/master/content/ja/docs/setup/production-environment/tools/kubeadm/install-kubeadm.md" id="editPageButton" target="_blank">
    Edit This Page
  </a>
</p>

<h1>kubeadmのインストール</h1>




<p><img src="https://raw.githubusercontent.com/kubernetes/kubeadm/master/logos/stacked/color/kubeadm-stacked-color.png" align="right" width="150px">
このページでは<code>kubeadm</code>コマンドをインストールする方法を示します。このインストール処理実行後にkubeadmを使用してクラスターを作成する方法については、<a href="/ja/docs/setup/production-environment/tools/kubeadm/create-cluster-kubeadm/">kubeadmを使用したシングルマスタークラスターの作成</a>を参照してください。</p>











<ul id="markdown-toc">










<li><a href="#%e5%a7%8b%e3%82%81%e3%82%8b%e5%89%8d%e3%81%ab">始める前に</a></li>












<li><a href="#mac%e3%82%a2%e3%83%89%e3%83%ac%e3%82%b9%e3%81%a8product-uuid%e3%81%8c%e5%85%a8%e3%81%a6%e3%81%ae%e3%83%8e%e3%83%bc%e3%83%89%e3%81%a7%e3%83%a6%e3%83%8b%e3%83%bc%e3%82%af%e3%81%a7%e3%81%82%e3%82%8b%e3%81%93%e3%81%a8%e3%81%ae%e6%a4%9c%e8%a8%bc">MACアドレスとproduct_uuidが全てのノードでユニークであることの検証</a></li>




<li><a href="#%e3%83%8d%e3%83%83%e3%83%88%e3%83%af%e3%83%bc%e3%82%af%e3%82%a2%e3%83%80%e3%83%97%e3%82%bf%e3%81%ae%e7%a2%ba%e8%aa%8d">ネットワークアダプタの確認</a></li>




<li><a href="#iptables%e3%81%8cnftables%e3%83%90%e3%83%83%e3%82%af%e3%82%a8%e3%83%b3%e3%83%89%e3%82%92%e4%bd%bf%e7%94%a8%e3%81%97%e3%81%aa%e3%81%84%e3%82%88%e3%81%86%e3%81%ab%e3%81%99%e3%82%8b">iptablesがnftablesバックエンドを使用しないようにする</a></li>




<li><a href="#%e5%bf%85%e9%a0%88%e3%83%9d%e3%83%bc%e3%83%88%e3%81%ae%e7%a2%ba%e8%aa%8d">必須ポートの確認</a></li>




<li><a href="#%e3%83%a9%e3%83%b3%e3%82%bf%e3%82%a4%e3%83%a0%e3%81%ae%e3%82%a4%e3%83%b3%e3%82%b9%e3%83%88%e3%83%bc%e3%83%ab">ランタイムのインストール</a></li>




<li><a href="#kubeadm-kubelet-kubectl%e3%81%ae%e3%82%a4%e3%83%b3%e3%82%b9%e3%83%88%e3%83%bc%e3%83%ab">kubeadm、kubelet、kubectlのインストール</a></li>




<li><a href="#%e3%83%9e%e3%82%b9%e3%82%bf%e3%83%bc%e3%83%8e%e3%83%bc%e3%83%89%e3%81%aekubelet%e3%81%ab%e3%82%88%e3%81%a3%e3%81%a6%e4%bd%bf%e7%94%a8%e3%81%95%e3%82%8c%e3%82%8bcgroup%e3%83%89%e3%83%a9%e3%82%a4%e3%83%90%e3%83%bc%e3%81%ae%e8%a8%ad%e5%ae%9a">マスターノードのkubeletによって使用されるcgroupドライバーの設定</a></li>




<li><a href="#%e3%83%88%e3%83%a9%e3%83%96%e3%83%ab%e3%82%b7%e3%83%a5%e3%83%bc%e3%83%88">トラブルシュート</a></li>




























<li><a href="#%e6%ac%a1%e3%81%ae%e9%a0%85%e7%9b%ae">次の項目</a></li>



</ul>



<h2 id="始める前に">始める前に</h2>
<ul>
<li>次のいずれかが動作しているマシンが必要です

<ul>
<li>Ubuntu 16.04+</li>
<li>Debian 9+</li>
<li>CentOS 7</li>
<li>Red Hat Enterprise Linux (RHEL) 7</li>
<li>Fedora 25+</li>
<li>HypriotOS v1.0.1+</li>
<li>Container Linux (tested with 1800.6.0)</li>
</ul></li>
<li>1台あたり2GB以上のメモリ(2GBの場合、アプリ用のスペースはほとんどありません)</li>
<li>2コア以上のCPU</li>
<li>クラスター内のすべてのマシン間で通信可能なネットワーク(パブリックネットワークでもプライベートネットワークでも構いません)</li>
<li>ユニークなhostname、MACアドレス、とproduct_uuidが各ノードに必要です。詳細は<a href="#MACアドレスとproduct_uuidが全てのノードでユニークであることの検証">ここ</a>を参照してください。</li>
<li>マシン内の特定のポートが開いていること。詳細は<a href="#必須ポートの確認">ここ</a>を参照してください。</li>
<li>Swapがオフであること。kubeletが正常に動作するためにはswapは<strong>必ず</strong>オフでなければなりません。</li>
</ul>




<h2 id="macアドレスとproduct-uuidが全てのノードでユニークであることの検証">MACアドレスとproduct_uuidが全てのノードでユニークであることの検証</h2>

<ul>
<li>ネットワークインターフェースのMACアドレスは<code>ip link</code>もしくは<code>ifconfig -a</code>コマンドで取得できます。</li>
<li>product_uuidは<code>sudo cat /sys/class/dmi/id/product_uuid</code>コマンドで確認できます。</li>
</ul>

<p>ハードウェアデバイスではユニークなアドレスが割り当てられる可能性が非常に高いですが、VMでは同じになることがあります。Kubernetesはこれらの値を使用して、クラスター内のノードを一意に識別します。これらの値が各ノードに固有ではない場合、インストール処理が<a href="https://github.com/kubernetes/kubeadm/issues/31" target="_blank">失敗</a>することもあります。</p>

<h2 id="ネットワークアダプタの確認">ネットワークアダプタの確認</h2>

<p>複数のネットワークアダプターがあり、Kubernetesコンポーネントにデフォルトで到達できない場合、IPルートを追加して、Kubernetesクラスターのアドレスが適切なアダプターを経由するように設定することをお勧めします。</p>

<h2 id="iptablesがnftablesバックエンドを使用しないようにする">iptablesがnftablesバックエンドを使用しないようにする</h2>

<p>Linuxでは、カーネルのiptablesサブシステムの最新の代替品としてnftablesが利用できます。<code>iptables</code>ツールは互換性レイヤーとして機能し、iptablesのように動作しますが、実際にはnftablesを設定します。このnftablesバックエンドは現在のkubeadmパッケージと互換性がありません。(ファイアウォールルールが重複し、<code>kube-proxy</code>を破壊するためです。)</p>

<p>もしあなたのシステムの<code>iptables</code>ツールがnftablesバックエンドを使用している場合、これらの問題を避けるために<code>iptables</code>ツールをレガシーモードに切り替える必要があります。これは、少なくともDebian 10(Buster)、Ubuntu 19.04、Fedora 29、およびこれらのディストリビューションの新しいリリースでのデフォルトです。RHEL 8はレガシーモードへの切り替えをサポートしていないため、現在のkubeadmパッケージと互換性がありません。</p>

<div id="iptables-legacy">
<ul>
    
      
  <li><a href="#iptables-legacy-0">Debian or Ubuntu</a></li>

      
  <li><a href="#iptables-legacy-1">Fedora</a></li>

</ul>


<div id="iptables-legacy-0">
    
        <div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#080;font-style:italic"># レガシーバイナリがインストールされていることを確認してください</span>
sudo apt-get install -y iptables arptables ebtables

sudo update-alternatives --set iptables /usr/sbin/iptables-legacy
sudo update-alternatives --set ip6tables /usr/sbin/ip6tables-legacy
sudo update-alternatives --set arptables /usr/sbin/arptables-legacy
sudo update-alternatives --set ebtables /usr/sbin/ebtables-legacy</code></pre></div>
    

<p></div></p>

<div id="iptables-legacy-1">
    
        <div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">update-alternatives --set iptables /usr/sbin/iptables-legacy</code></pre></div>
    

<p></div></p>

<p></div></p>

<script>$(function(){$("#iptables-legacy").tabs();});</script>

<h2 id="必須ポートの確認">必須ポートの確認</h2>

<h3 id="マスターノード">マスターノード</h3>

<table>
<thead>
<tr>
<th>プロトコル</th>
<th>通信の向き</th>
<th>ポート範囲</th>
<th>目的</th>
<th>使用者</th>
</tr>
</thead>

<tbody>
<tr>
<td>TCP</td>
<td>Inbound</td>
<td>6443*</td>
<td>Kubernetes API server</td>
<td>All</td>
</tr>

<tr>
<td>TCP</td>
<td>Inbound</td>
<td>2379-2380</td>
<td>etcd server client API</td>
<td>kube-apiserver, etcd</td>
</tr>

<tr>
<td>TCP</td>
<td>Inbound</td>
<td>10250</td>
<td>Kubelet API</td>
<td>Self, Control plane</td>
</tr>

<tr>
<td>TCP</td>
<td>Inbound</td>
<td>10251</td>
<td>kube-scheduler</td>
<td>Self</td>
</tr>

<tr>
<td>TCP</td>
<td>Inbound</td>
<td>10252</td>
<td>kube-controller-manager</td>
<td>Self</td>
</tr>
</tbody>
</table>

<h3 id="ワーカーノード">ワーカーノード</h3>

<table>
<thead>
<tr>
<th>プロトコル</th>
<th>通信の向き</th>
<th>ポート範囲</th>
<th>目的</th>
<th>使用者</th>
</tr>
</thead>

<tbody>
<tr>
<td>TCP</td>
<td>Inbound</td>
<td>10250</td>
<td>Kubelet API</td>
<td>Self, Control plane</td>
</tr>

<tr>
<td>TCP</td>
<td>Inbound</td>
<td>30000-32767</td>
<td>NodePort Services**</td>
<td>All</td>
</tr>
</tbody>
</table>

<p>** <a href="/docs/concepts/services-networking/service/">NodePort Services</a>のデフォルトのポートの範囲</p>

<p>*の項目は書き換え可能です。そのため、あなたが指定したカスタムポートも開いていることを確認する必要があります。</p>

<p>etcdポートはコントロールプレーンノードに含まれていますが、独自のetcdクラスターを外部またはカスタムポートでホストすることもできます。</p>

<p>使用するPodネットワークプラグイン（以下を参照）のポートも開く必要があります。これは各Podネットワークプラグインによって異なるため、必要なポートについてはプラグインのドキュメントを参照してください。</p>

<h2 id="ランタイムのインストール">ランタイムのインストール</h2>

<p>v1.6.0以降、KubernetesはデフォルトでCRI(Container Runtime Interface)の使用を有効にしています。</p>

<p>また、v1.14.0以降、kubeadmは既知のドメインソケットのリストをスキャンして、Linuxノード上のコンテナランタイムを自動的に検出しようとします。検出可能なランタイムとソケットパスは、以下の表に記載されています。</p>

<table>
<thead>
<tr>
<th>ランタイム</th>
<th>ドメインソケット</th>
</tr>
</thead>

<tbody>
<tr>
<td>Docker</td>
<td>/var/run/docker.sock</td>
</tr>

<tr>
<td>containerd</td>
<td>/run/containerd/containerd.sock</td>
</tr>

<tr>
<td>CRI-O</td>
<td>/var/run/crio/crio.sock</td>
</tr>
</tbody>
</table>

<p>Dockerとcontainerdの両方が同時に検出された場合、Dockerが優先されます。Docker 18.09にはcontainerdが同梱されており、両方が検出可能であるため、この仕様が必要です。他の2つ以上のランタイムが検出された場合、kubeadmは適切なエラーメッセージで終了します。</p>

<p>Linux以外のノードでは、デフォルトで使用されるコンテナランタイムはDockerです。</p>

<p>もしコンテナランタイムとしてDockerを選択した場合、<code>kebelet</code>内に組み込まれた<code>dockershim</code> CRIが使用されます。</p>

<p>その他のCRIに基づくランタイムでは以下を使用します</p>

<ul>
<li><a href="https://github.com/containerd/cri" target="_blank">containerd</a> (CRI plugin built into containerd)</li>
<li><a href="https://cri-o.io/" target="_blank">cri-o</a></li>
<li><a href="https://github.com/kubernetes/frakti" target="_blank">frakti</a></li>
</ul>

<p>詳細は<a href="/ja/docs/setup/production-environment/container-runtimes/">CRIのインストール</a>を参照してください。</p>

<h2 id="kubeadm-kubelet-kubectlのインストール">kubeadm、kubelet、kubectlのインストール</h2>

<p>以下のパッケージをマシン上にインストールしてください</p>

<ul>
<li><p><code>kubeadm</code>: クラスターを起動するコマンドです。</p></li>

<li><p><code>kubelet</code>: クラスター内のすべてのマシンで実行されるコンポーネントです。
 Podやコンテナの起動などを行います。</p></li>

<li><p><code>kubectl</code>: クラスターにアクセスするためのコマンドラインツールです。</p></li>
</ul>

<p>kubeadmは<code>kubelet</code>や<code>kubectl</code>をインストールまたは管理<strong>しない</strong>ため、kubeadmにインストールするKubernetesコントロールプレーンのバージョンと一致させる必要があります。そうしないと、予期しないバグのある動作につながる可能性のあるバージョン差異(version skew)が発生するリスクがあります。ただし、kubeletとコントロールプレーン間のマイナーバージョン差異(minor version skew)は_1つ_サポートされていますが、kubeletバージョンがAPIサーバーのバージョンを超えることはできません。たとえば、1.7.0を実行するkubeletは1.8.0 APIサーバーと完全に互換性がありますが、その逆はできません。</p>

<p><code>kubectl</code>のインストールに関する詳細情報は、<a href="/docs/tasks/tools/install-kubectl/">kubectlのインストールおよびセットアップ</a>を参照してください。</p>

<blockquote class="warning">
  <div><strong>警告:</strong> これらの手順はシステムアップグレードによるすべてのKubernetesパッケージの更新を除きます。これはkubeadmとKubernetesが<a href="docs/tasks/administer-cluster/kubeadm/kubeadm-upgrade/" target="_blank">アップグレードにおける特別な注意</a>を必要とするからです。</div>
</blockquote>

<p>バージョン差異(version skew)に関しては下記を参照してください。</p>

<ul>
<li>Kubernetes <a href="/ja/docs/setup/release/version-skew-policy/">Kubernetesバージョンとバージョンスキューサポートポリシー</a></li>
<li>Kubeadm-specific <a href="/ja/docs/setup/production-environment/tools/kubeadm/create-cluster-kubeadm/#version-skew-policy">バージョン互換ポリシー</a></li>
</ul>

<div id="k8s-install">
<ul>
    
      
  <li><a href="#k8s-install-0">Ubuntu, Debian or HypriotOS</a></li>

      
  <li><a href="#k8s-install-1">CentOS, RHEL or Fedora</a></li>

      
  <li><a href="#k8s-install-2">Container Linux</a></li>

</ul>


<div id="k8s-install-0">
    
        <div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo apt-get update <span style="color:#666">&amp;&amp;</span> sudo apt-get install -y apt-transport-https curl
curl -s https://packages.cloud.google.com/apt/doc/apt-key.gpg | sudo apt-key add -
cat <span style="color:#b44">&lt;&lt;EOF | sudo tee /etc/apt/sources.list.d/kubernetes.list
</span><span style="color:#b44">deb https://apt.kubernetes.io/ kubernetes-xenial main
</span><span style="color:#b44">EOF</span>
sudo apt-get update
sudo apt-get install -y kubelet kubeadm kubectl
sudo apt-mark hold kubelet kubeadm kubectl</code></pre></div>
    

<p></div></p>

<div id="k8s-install-1">
    
        <div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">cat <span style="color:#b44">&lt;&lt;EOF &gt; /etc/yum.repos.d/kubernetes.repo
</span><span style="color:#b44">[kubernetes]
</span><span style="color:#b44">name=Kubernetes
</span><span style="color:#b44">baseurl=https://packages.cloud.google.com/yum/repos/kubernetes-el7-x86_64
</span><span style="color:#b44">enabled=1
</span><span style="color:#b44">gpgcheck=1
</span><span style="color:#b44">repo_gpgcheck=1
</span><span style="color:#b44">gpgkey=https://packages.cloud.google.com/yum/doc/yum-key.gpg https://packages.cloud.google.com/yum/doc/rpm-package-key.gpg
</span><span style="color:#b44">EOF</span>

<span style="color:#080;font-style:italic"># Set SELinux in permissive mode (effectively disabling it)</span>
setenforce <span style="color:#666">0</span>
sed -i <span style="color:#b44">&#39;s/^SELINUX=enforcing$/SELINUX=permissive/&#39;</span> /etc/selinux/config

yum install -y kubelet kubeadm kubectl --disableexcludes<span style="color:#666">=</span>kubernetes

systemctl <span style="color:#a2f">enable</span> --now kubelet</code></pre></div>
<p><strong>Note:</strong></p>

<ul>
<li>Setting SELinux in permissive mode by running <code>setenforce 0</code> and <code>sed ...</code> effectively disables it.
This is required to allow containers to access the host filesystem, which is needed by pod networks for example.
You have to do this until SELinux support is improved in the kubelet.</li>

<li><p>Some users on RHEL/CentOS 7 have reported issues with traffic being routed incorrectly due to iptables being bypassed. You should ensure
<code>net.bridge.bridge-nf-call-iptables</code> is set to 1 in your <code>sysctl</code> config, e.g.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">cat <span style="color:#b44">&lt;&lt;EOF &gt; /etc/sysctl.d/k8s.conf
</span><span style="color:#b44">net.bridge.bridge-nf-call-ip6tables = 1
</span><span style="color:#b44">net.bridge.bridge-nf-call-iptables = 1
</span><span style="color:#b44">EOF</span>
sysctl --system</code></pre></div></li>

<li><p>Make sure that the <code>br_netfilter</code> module is loaded before this step. This can be done by running <code>lsmod | grep br_netfilter</code>. To load it explicitly call <code>modprobe br_netfilter</code>.</p></li>
</ul>

    
</div>

<div id="k8s-install-2">
    
        <p>Install CNI plugins (required for most pod network):</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#b8860b">CNI_VERSION</span><span style="color:#666">=</span><span style="color:#b44">&#34;v0.8.2&#34;</span>
mkdir -p /opt/cni/bin
curl -L <span style="color:#b44">&#34;https://github.com/containernetworking/plugins/releases/download/</span><span style="color:#b68;font-weight:bold">${</span><span style="color:#b8860b">CNI_VERSION</span><span style="color:#b68;font-weight:bold">}</span><span style="color:#b44">/cni-plugins-linux-amd64-</span><span style="color:#b68;font-weight:bold">${</span><span style="color:#b8860b">CNI_VERSION</span><span style="color:#b68;font-weight:bold">}</span><span style="color:#b44">.tgz&#34;</span> | tar -C /opt/cni/bin -xz</code></pre></div>
<p>Install crictl (required for kubeadm / Kubelet Container Runtime Interface (CRI))</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#b8860b">CRICTL_VERSION</span><span style="color:#666">=</span><span style="color:#b44">&#34;v1.16.0&#34;</span>
mkdir -p /opt/bin
curl -L <span style="color:#b44">&#34;https://github.com/kubernetes-sigs/cri-tools/releases/download/</span><span style="color:#b68;font-weight:bold">${</span><span style="color:#b8860b">CRICTL_VERSION</span><span style="color:#b68;font-weight:bold">}</span><span style="color:#b44">/crictl-</span><span style="color:#b68;font-weight:bold">${</span><span style="color:#b8860b">CRICTL_VERSION</span><span style="color:#b68;font-weight:bold">}</span><span style="color:#b44">-linux-amd64.tar.gz&#34;</span> | tar -C /opt/bin -xz</code></pre></div>
<p>Install <code>kubeadm</code>, <code>kubelet</code>, <code>kubectl</code> and add a <code>kubelet</code> systemd service:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#b8860b">RELEASE</span><span style="color:#666">=</span><span style="color:#b44">&#34;</span><span style="color:#a2f;font-weight:bold">$(</span>curl -sSL https://dl.k8s.io/release/stable.txt<span style="color:#a2f;font-weight:bold">)</span><span style="color:#b44">&#34;</span>

mkdir -p /opt/bin
<span style="color:#a2f">cd</span> /opt/bin
curl -L --remote-name-all https://storage.googleapis.com/kubernetes-release/release/<span style="color:#b68;font-weight:bold">${</span><span style="color:#b8860b">RELEASE</span><span style="color:#b68;font-weight:bold">}</span>/bin/linux/amd64/<span style="color:#666">{</span>kubeadm,kubelet,kubectl<span style="color:#666">}</span>
chmod +x <span style="color:#666">{</span>kubeadm,kubelet,kubectl<span style="color:#666">}</span>

curl -sSL <span style="color:#b44">&#34;https://raw.githubusercontent.com/kubernetes/kubernetes/</span><span style="color:#b68;font-weight:bold">${</span><span style="color:#b8860b">RELEASE</span><span style="color:#b68;font-weight:bold">}</span><span style="color:#b44">/build/debs/kubelet.service&#34;</span> | sed <span style="color:#b44">&#34;s:/usr/bin:/opt/bin:g&#34;</span> &gt; /etc/systemd/system/kubelet.service
mkdir -p /etc/systemd/system/kubelet.service.d
curl -sSL <span style="color:#b44">&#34;https://raw.githubusercontent.com/kubernetes/kubernetes/</span><span style="color:#b68;font-weight:bold">${</span><span style="color:#b8860b">RELEASE</span><span style="color:#b68;font-weight:bold">}</span><span style="color:#b44">/build/debs/10-kubeadm.conf&#34;</span> | sed <span style="color:#b44">&#34;s:/usr/bin:/opt/bin:g&#34;</span> &gt; /etc/systemd/system/kubelet.service.d/10-kubeadm.conf</code></pre></div>
<p>Enable and start <code>kubelet</code>:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">systemctl <span style="color:#a2f">enable</span> --now kubelet</code></pre></div>
    

<p></div></p>

<p></div></p>

<script>$(function(){$("#k8s-install").tabs();});</script>

<p>kubeadmが何をすべきか指示するまで、kubeletはクラッシュループで数秒ごとに再起動します。</p>

<h2 id="マスターノードのkubeletによって使用されるcgroupドライバーの設定">マスターノードのkubeletによって使用されるcgroupドライバーの設定</h2>

<p>Dockerを使用した場合、kubeadmは自動的にkubelet向けのcgroupドライバーを検出し、それを実行時に<code>/var/lib/kubelet/kubeadm-flags.env</code>ファイルに設定します。</p>

<p>もしあなたが異なるCRIを使用している場合、<code>/etc/default/kubelet</code>(CentOS、RHEL、Fedoraでは<code>/etc/sysconfig/kubelet</code>)ファイル内の<code>cgroup-driver</code>の値を以下のように変更する必要があります。</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#b8860b">KUBELET_EXTRA_ARGS</span><span style="color:#666">=</span>--cgroup-driver<span style="color:#666">=</span>&lt;value&gt;</code></pre></div>
<p>このファイルは、kubeletの追加のユーザー定義引数を取得するために、<code>kubeadm init</code>および<code>kubeadm join</code>によって使用されます。</p>

<p>CRIのcgroupドライバーが<code>cgroupfs</code>でない場合に<strong>のみ</strong>それを行う必要があることに注意してください。なぜなら、これは既にkubeletのデフォルト値であるためです。</p>

<p>kubeletをリスタートする方法:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">systemctl daemon-reload
systemctl restart kubelet</code></pre></div>
<p>CRI-Oやcontainerdといった他のコンテナランタイムのcgroup driverは実行中に自動的に検出されます。</p>

<h2 id="トラブルシュート">トラブルシュート</h2>

<p>kubeadmで問題が発生した場合は、<a href="/ja/docs/setup/production-environment/tools/kubeadm/troubleshooting-kubeadm/">トラブルシューティング</a>を参照してください。</p>















<h2 id="次の項目">次の項目</h2>
<ul>
<li><a href="/ja/docs/setup/production-environment/tools/kubeadm/create-cluster-kubeadm/">kubeadmを使用したシングルコントロールプレーンクラスターの作成</a></li>
</ul>







    
            
  <h2>フィードバック</h2>
  <p class="feedback--prompt">このページは役に立ちましたか？ </p>
  <button class="button feedback--yes">はい</button>
  <button class="button feedback--no">いいえ</button>
  <p class="feedback--response feedback--response__hidden">
    Thanks for the feedback. If you have a specific, answerable question about how to use Kubernetes, ask it on
    <a target="_blank" rel="noopener"
      href="https://stackoverflow.com/questions/tagged/kubernetes">
      Stack Overflow</a>.
    Open an issue in the GitHub repo if you want to 
    <a class="feedback--link" target="_blank" rel="noopener"
      href="https://github.com/kubernetes/website/issues/new?title=Issue%20with%20k8s.io">
      問題を報告する</a>
    or
    <a class="feedback--link" target="_blank" rel="noopener"
      href="https://github.com/kubernetes/website/issues/new?title=Improvement%20for%20k8s.io">
      改善を提案</a>.
  </p>
  <script>
    const yes = document.querySelector('.feedback--yes');
    const no = document.querySelector('.feedback--no');
    document.querySelectorAll('.feedback--link').forEach(link => {
      link.href = link.href + window.location.pathname;
    });
    const sendFeedback = (value) => {
      if (!gtag) { console.log('!gtag'); }
      gtag('event', 'click', {
        'event_category': 'Helpful',
        'event_label': window.location.pathname,
        value
      });
    };
    const disableButtons = () => {
      yes.disabled = true;
      yes.classList.add('feedback--button__disabled');
      no.disabled = true;
      no.classList.add('feedback--button__disabled');
    };
    yes.addEventListener('click', () => {
      sendFeedback(1);
      disableButtons();
      document.querySelector('.feedback--response').classList.remove('feedback--response__hidden');
    });
    no.addEventListener('click', () => {
      sendFeedback(0);
      disableButtons();
      document.querySelector('.feedback--response').classList.remove('feedback--response__hidden');
    });
  </script>


    
            <div id="pre-footer"> 
  <hr />

  <div class="issue-button-container">
    <p><a href=""><img src="https://kubernetes-site.appspot.com/UA-36037335-10/GitHub/docs/setup/production-environment/tools/kubeadm/install-kubeadm.md?pixel" alt="Analytics" /></a></p>
    
    
    <script type="text/javascript">
    PDRTJS_settings_8345992 = {
    "id" : "8345992",
    "unique_id" : "\/ja\/docs\/setup\/production-environment\/tools\/kubeadm\/install-kubeadm\/",
    "title" : "kubeadmのインストール",
    "permalink" : "https:\/\/kubernetes.io\/ja\/docs\/setup\/production-environment\/tools\/kubeadm\/install-kubeadm\/"
    };
    (function(d,c,j){if(!document.getElementById(j)){var pd=d.createElement(c),s;pd.id=j;pd.src=('https:'==document.location.protocol)?'https://polldaddy.com/js/rating/rating.js':'http://i0.poll.fm/js/rating/rating.js';s=document.getElementsByTagName(c)[0];s.parentNode.insertBefore(pd,s);}}(document,'script','pd-rating-js'));
    </script>
    <a href="" onclick="window.open('https://github.com/kubernetes/website/issues/new?template=bug-report.md&title=Issue%20with%20' +
    'k8s.io'+window.location.pathname)" class="button issue">Issue作成</a>
    
    
    
    <a href="https://github.com/kubernetes/website/edit/master/content/ja/docs/setup/production-environment/tools/kubeadm/install-kubeadm.md" class="button issue">ページ編集</a>
    
  </div>
  

  <div id="lastedit" class="lastedit issue-button-container">
    ページの最終更新 February 18, 2020 at 4:41 PM PST by
    <a href="https://github.com/kubernetes/website/commit/004bcd1ff8f6d14033651e58b3a98f587e4cf60c/">Second Japanese l10n work for release-1.16 (#19157)</a> (<a href="https://github.com/kubernetes/website/commits/master/content/en/docs/setup/production-environment/tools/kubeadm/install-kubeadm.md">ページ履歴</a>)
  </div>
  
</div>

          </div>
        </section>
    </main>
		<footer>
    <div class="light-text main-section">
        <nav>
            
            
            
            <a href="/ja/docs/home/">ホーム</a>
            
            
            
            
            
            
            
            
            
            <a href="/ja/case-studies/">ケーススタディ</a>
            
        </nav>
        <div class="social" role="region" aria-label="Social hyperlinks">
            <div>
                <a href="https://twitter.com/kubernetesio" class="twitter"><span>Twitter</span></a>
                <a href="https://github.com/kubernetes/kubernetes" class="github"><span>GitHub</span></a>
                <a href="https://slack.k8s.io/" class="slack"><span>Slack</span></a>
            </div>
            <div>
                <a href="https://stackoverflow.com/questions/tagged/kubernetes" class="stack-overflow"><span>Stack Overflow</span></a>
                <a href="https://www.youtube.com/kubernetescommunity" class="youtube"><span>YouTube</span></a>
                <a href="https://discuss.kubernetes.io" class="mailing-list"><span>フォーラム</span></a>
                <a href="https://calendar.google.com/calendar/embed?src=nt2tcnbtbied3l6gi2h29slvc0%40group.calendar.google.com" class="calendar"><span>イベントカレンダー</span></a>
            </div>
            <div>
                
                <a href="https://git.k8s.io/community/contributors/guide" class="button">コントリビュート</a>
            </div>
        </div>
        <div class="miceType center">
            &copy; 2023 The Kubernetes Authors | Documentation Distributed under <a href="https://git.k8s.io/website/LICENSE" class="light-text">CC BY 4.0</a></a>
        </div>
        <div class="miceType center">
            Copyright &copy; 2023 The Linux Foundation &reg;. All rights reserved. The Linux Foundation has registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our <a href="https://www.linuxfoundation.org/trademark-usage" class="light-text">Trademark Usage page</a>
        </div>
        <div class="miceType center">
            ICP license: 京ICP备17074266号-3
        </div>
    </div>
</footer>

		<button class="flyout-button" onclick="kub.toggleToc()" aria-label="Toggle table of contents visibility"></button>

<script>

(function () {
    window.addEventListener('DOMContentLoaded', init)

        
        function init() {
            window.removeEventListener('DOMContentLoaded', init)
                hideNav()
        }

    function hideNav(toc){
        if (!toc) toc = document.querySelector('#docsToc')
        if (!toc) return
            var container = toc.querySelector('.container')

                
                if (container) {
                    if (container.childElementCount === 0 || toc.querySelectorAll('a.item').length === 1) {
                        toc.style.display = 'none'
                            document.getElementById('docsContent').style.width = '100%'
                    }
                } else {
                    requestAnimationFrame(function () {
                        hideNav(toc)
                    })
                }
    }
})();
</script>



    <script language="application/javascript">
      
      (function addHeadingLinks(){
        var article = document.getElementById('docsContent');
        var headings = article.querySelectorAll('h1, h2, h3, h4, h5, h6');
        headings.forEach(function(heading){
          if(heading.id){
            var a = document.createElement('a');
            a.innerHTML = heading.innerHTML;
            a.href = '#'+heading.id;
            a.classList.add('inpage_heading');
            heading.innerHTML = '';
            heading.appendChild(a);
          }
        });
      })();
    </script>
	</body>
</html>
